!function(e){function t(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){"use strict";for(var n=document.querySelectorAll("[data-module]"),s=0;s<n.length;s++){var i=n[s],c=i.getAttribute("data-module");new(0,r(4)("./"+c).default)(i)}},function(e,t,r){"use strict";r(0);r(3)},function(e,t){},function(e,t,r){var n;/*! picturefill - v3.0.2 - 2016-02-12
 * https://scottjehl.github.io/picturefill/
 * Copyright (c) 2016 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT
 */
/*! Gecko-Picture - v1.0
 * https://github.com/scottjehl/picturefill/tree/3.0/src/plugins/gecko-picture
 * Firefox's early picture implementation (prior to FF41) is static and does
 * not react to viewport changes. This tiny module fixes this.
 */
!function(e){var t=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(t)&&t.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var t,r=document.createElement("source"),n=function(e){var t,n,s=e.parentNode;"PICTURE"===s.nodeName.toUpperCase()?(t=r.cloneNode(),s.insertBefore(t,s.firstElementChild),setTimeout(function(){s.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,n=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=n}))},s=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)n(t[e])},i=function(){clearTimeout(t),t=setTimeout(s,99)},c=e.matchMedia&&matchMedia("(orientation: landscape)"),a=function(){i(),c&&c.addListener&&c.addListener(i)};return r.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?a():document.addEventListener("DOMContentLoaded",a),i}())}(window),/*! Picturefill - v3.0.2
 * http://scottjehl.github.io/picturefill
 * Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt;
 *  License: MIT
 */
function(s,i,c){"use strict";function a(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function u(){$=!1,O=s.devicePixelRatio,W={},Q={},x.DPR=O||1,G.width=Math.max(s.innerWidth||0,C.clientWidth),G.height=Math.max(s.innerHeight||0,C.clientHeight),G.vw=G.width/100,G.vh=G.height/100,w=[G.height,G.width,O].join("-"),G.em=x.getEmValue(),G.rem=G.em}function o(e,t,r,n){var s,i,c,a;return"saveData"===M.algorithm?e>2.7?a=r+1:(i=t-r,s=Math.pow(e-.6,1.5),c=i*s,n&&(c+=.1*s),a=e+c):a=r>1?Math.sqrt(e*t):e,a>r}function l(e){var t,r=x.getSet(e),n=!1;"pending"!==r&&(n=w,r&&(t=x.setRes(r),x.applySetCandidate(t,e))),e[x.ns].evaled=n}function f(e,t){return e.res-t.res}function d(e,t,r){var n;return!r&&t&&(r=e[x.ns].sets,r=r&&r[r.length-1]),n=p(t,r),n&&(t=x.makeUrl(t),e[x.ns].curSrc=t,e[x.ns].curCan=n,n.res||Z(n,n.set.sizes)),n}function p(e,t){var r,n,s;if(e&&t)for(s=x.parseSet(t),e=x.makeUrl(e),r=0;r<s.length;r++)if(e===x.makeUrl(s[r].url)){n=s[r];break}return n}function A(e,t){var r,n,s,i,c=e.getElementsByTagName("source");for(r=0,n=c.length;r<n;r++)s=c[r],s[x.ns]=!0,(i=s.getAttribute("srcset"))&&t.push({srcset:i,media:s.getAttribute("media"),type:s.getAttribute("type"),sizes:s.getAttribute("sizes")})}function m(e,t){function r(t){var r,n=t.exec(e.substring(f));if(n)return r=n[0],f+=r.length,r}function n(){var e,r,n,c,a,u,o,l,f,p=!1,A={};for(c=0;c<i.length;c++)a=i[c],u=a[a.length-1],o=a.substring(0,a.length-1),l=parseInt(o,10),f=parseFloat(o),V.test(o)&&"w"===u?((e||r)&&(p=!0),0===l?p=!0:e=l):K.test(o)&&"x"===u?((e||r||n)&&(p=!0),f<0?p=!0:r=f):V.test(o)&&"h"===u?((n||r)&&(p=!0),0===l?p=!0:n=l):p=!0;p||(A.url=s,e&&(A.w=e),r&&(A.d=r),n&&(A.h=n),n||r||e||(A.d=1),1===A.d&&(t.has1x=!0),A.set=t,d.push(A))}for(var s,i,c,u,o,l=e.length,f=0,d=[];;){if(r(q),f>=l)return d;s=r(N),i=[],","===s.slice(-1)?(s=s.replace(_,""),n()):function(){for(r(F),c="",u="in descriptor";;){if(o=e.charAt(f),"in descriptor"===u)if(a(o))c&&(i.push(c),c="",u="after descriptor");else{if(","===o)return f+=1,c&&i.push(c),void n();if("("===o)c+=o,u="in parens";else{if(""===o)return c&&i.push(c),void n();c+=o}}else if("in parens"===u)if(")"===o)c+=o,u="in descriptor";else{if(""===o)return i.push(c),void n();c+=o}else if("after descriptor"===u)if(a(o));else{if(""===o)return void n();u="in descriptor",f-=1}f+=1}}()}}function h(e){var t,r,n,s,i,c,u=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,o=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(r=function(e){function t(){s&&(i.push(s),s="")}function r(){i[0]&&(c.push(i),i=[])}for(var n,s="",i=[],c=[],u=0,o=0,l=!1;;){if(""===(n=e.charAt(o)))return t(),r(),c;if(l){if("*"===n&&"/"===e[o+1]){l=!1,o+=2,t();continue}o+=1}else{if(a(n)){if(e.charAt(o-1)&&a(e.charAt(o-1))||!s){o+=1;continue}if(0===u){t(),o+=1;continue}n=" "}else if("("===n)u+=1;else if(")"===n)u-=1;else{if(","===n){t(),r(),o+=1;continue}if("/"===n&&"*"===e.charAt(o+1)){l=!0,o+=2;continue}}s+=n,o+=1}}}(e),n=r.length,t=0;t<n;t++)if(s=r[t],i=s[s.length-1],function(e){return!!(u.test(e)&&parseFloat(e)>=0)||(!!o.test(e)||("0"===e||"-0"===e||"+0"===e))}(i)){if(c=i,s.pop(),0===s.length)return c;if(s=s.join(" "),x.matchesMedia(s))return c}return"100vw"}i.createElement("picture");var g,v,w,x={},S=!1,y=function(){},b=i.createElement("img"),E=b.getAttribute,z=b.setAttribute,T=b.removeAttribute,C=i.documentElement,R={},M={algorithm:""},L=navigator.userAgent,P=/rident/.test(L)||/ecko/.test(L)&&L.match(/rv\:(\d+)/)&&RegExp.$1>35,D="currentSrc",k=/\s+\+?\d+(e\d+)?w/,B=/(\([^)]+\))?\s*(.+)/,I=s.picturefillCFG,U="font-size:100%!important;",$=!0,W={},Q={},O=s.devicePixelRatio,G={px:1,in:96},H=i.createElement("a"),j=!1,F=/^[ \t\n\r\u000c]+/,q=/^[, \t\n\r\u000c]+/,N=/^[^ \t\n\r\u000c]+/,_=/[,]+$/,V=/^\d+$/,K=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,J=function(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n||!1):e.attachEvent&&e.attachEvent("on"+t,r)},X=function(e){var t={};return function(r){return r in t||(t[r]=e(r)),t[r]}},Y=function(){var e=/^([\d\.]+)(em|vw|px)$/,t=function(){for(var e=arguments,t=0,r=e[0];++t in e;)r=r.replace(e[t],e[++t]);return r},r=X(function(e){return"return "+t((e||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(t,n){var s;if(!(t in W))if(W[t]=!1,n&&(s=t.match(e)))W[t]=s[1]*G[s[2]];else try{W[t]=new Function("e",r(t))(G)}catch(e){}return W[t]}}(),Z=function(e,t){return e.w?(e.cWidth=x.calcListLength(t||"100vw"),e.res=e.w/e.cWidth):e.res=e.d,e},ee=function(e){if(S){var t,r,n,s=e||{};if(s.elements&&1===s.elements.nodeType&&("IMG"===s.elements.nodeName.toUpperCase()?s.elements=[s.elements]:(s.context=s.elements,s.elements=null)),t=s.elements||x.qsa(s.context||i,s.reevaluate||s.reselect?x.sel:x.selShort),n=t.length){for(x.setupRun(s),j=!0,r=0;r<n;r++)x.fillImg(t[r],s);x.teardownRun(s)}}};s.console&&console.warn,D in b||(D="src"),R["image/jpeg"]=!0,R["image/gif"]=!0,R["image/png"]=!0,R["image/svg+xml"]=i.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),x.ns=("pf"+(new Date).getTime()).substr(0,9),x.supSrcset="srcset"in b,x.supSizes="sizes"in b,x.supPicture=!!s.HTMLPictureElement,x.supSrcset&&x.supPicture&&!x.supSizes&&function(e){b.srcset="data:,a",e.src="data:,a",x.supSrcset=b.complete===e.complete,x.supPicture=x.supSrcset&&x.supPicture}(i.createElement("img")),x.supSrcset&&!x.supSizes?function(){var e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",t=i.createElement("img"),r=function(){2===t.width&&(x.supSizes=!0),v=x.supSrcset&&!x.supSizes,S=!0,setTimeout(ee)};t.onload=r,t.onerror=r,t.setAttribute("sizes","9px"),t.srcset=e+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",t.src=e}():S=!0,x.selShort="picture>img,img[srcset]",x.sel=x.selShort,x.cfg=M,x.DPR=O||1,x.u=G,x.types=R,x.setSize=y,x.makeUrl=X(function(e){return H.href=e,H.href}),x.qsa=function(e,t){return"querySelector"in e?e.querySelectorAll(t):[]},x.matchesMedia=function(){return s.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?x.matchesMedia=function(e){return!e||matchMedia(e).matches}:x.matchesMedia=x.mMQ,x.matchesMedia.apply(this,arguments)},x.mMQ=function(e){return!e||Y(e)},x.calcLength=function(e){var t=Y(e,!0)||!1;return t<0&&(t=!1),t},x.supportsType=function(e){return!e||R[e]},x.parseSize=X(function(e){var t=(e||"").match(B);return{media:t&&t[1],length:t&&t[2]}}),x.parseSet=function(e){return e.cands||(e.cands=m(e.srcset,e)),e.cands},x.getEmValue=function(){var e;if(!g&&(e=i.body)){var t=i.createElement("div"),r=C.style.cssText,n=e.style.cssText;t.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",C.style.cssText=U,e.style.cssText=U,e.appendChild(t),g=t.offsetWidth,e.removeChild(t),g=parseFloat(g,10),C.style.cssText=r,e.style.cssText=n}return g||16},x.calcListLength=function(e){if(!(e in Q)||M.uT){var t=x.calcLength(h(e));Q[e]=t||G.width}return Q[e]},x.setRes=function(e){var t;if(e){t=x.parseSet(e);for(var r=0,n=t.length;r<n;r++)Z(t[r],e.sizes)}return t},x.setRes.res=Z,x.applySetCandidate=function(e,t){if(e.length){var r,n,s,i,c,a,u,l,p,A=t[x.ns],m=x.DPR;if(a=A.curSrc||t[D],u=A.curCan||d(t,a,e[0].set),u&&u.set===e[0].set&&((p=P&&!t.complete&&u.res-.1>m)||(u.cached=!0,u.res>=m&&(c=u))),!c)for(e.sort(f),i=e.length,c=e[i-1],n=0;n<i;n++)if(r=e[n],r.res>=m){s=n-1,c=e[s]&&(p||a!==x.makeUrl(r.url))&&o(e[s].res,r.res,m,e[s].cached)?e[s]:r;break}c&&(l=x.makeUrl(c.url),A.curSrc=l,A.curCan=c,l!==a&&x.setSrc(t,c),x.setSize(t))}},x.setSrc=function(e,t){var r;e.src=t.url,"image/svg+xml"===t.set.type&&(r=e.style.width,e.style.width=e.offsetWidth+1+"px",e.offsetWidth+1&&(e.style.width=r))},x.getSet=function(e){var t,r,n,s=!1,i=e[x.ns].sets;for(t=0;t<i.length&&!s;t++)if(r=i[t],r.srcset&&x.matchesMedia(r.media)&&(n=x.supportsType(r.type))){"pending"===n&&(r=n),s=r;break}return s},x.parseSets=function(e,t,r){var n,s,i,c,a=t&&"PICTURE"===t.nodeName.toUpperCase(),u=e[x.ns];(void 0===u.src||r.src)&&(u.src=E.call(e,"src"),u.src?z.call(e,"data-pfsrc",u.src):T.call(e,"data-pfsrc")),(void 0===u.srcset||r.srcset||!x.supSrcset||e.srcset)&&(n=E.call(e,"srcset"),u.srcset=n,c=!0),u.sets=[],a&&(u.pic=!0,A(t,u.sets)),u.srcset?(s={srcset:u.srcset,sizes:E.call(e,"sizes")},u.sets.push(s),(i=(v||u.src)&&k.test(u.srcset||""))||!u.src||p(u.src,s)||s.has1x||(s.srcset+=", "+u.src,s.cands.push({url:u.src,d:1,set:s}))):u.src&&u.sets.push({srcset:u.src,sizes:null}),u.curCan=null,u.curSrc=void 0,u.supported=!(a||s&&!x.supSrcset||i&&!x.supSizes),c&&x.supSrcset&&!u.supported&&(n?(z.call(e,"data-pfsrcset",n),e.srcset=""):T.call(e,"data-pfsrcset")),u.supported&&!u.srcset&&(!u.src&&e.src||e.src!==x.makeUrl(u.src))&&(null===u.src?e.removeAttribute("src"):e.src=u.src),u.parsed=!0},x.fillImg=function(e,t){var r,n=t.reselect||t.reevaluate;e[x.ns]||(e[x.ns]={}),r=e[x.ns],(n||r.evaled!==w)&&(r.parsed&&!t.reevaluate||x.parseSets(e,e.parentNode,t),r.supported?r.evaled=w:l(e))},x.setupRun=function(){j&&!$&&O===s.devicePixelRatio||u()},x.supPicture?(ee=y,x.fillImg=y):function(){var e,t=s.attachEvent?/d$|^c/:/d$|^c|^i/,r=function(){var s=i.readyState||"";n=setTimeout(r,"loading"===s?200:999),i.body&&(x.fillImgs(),(e=e||t.test(s))&&clearTimeout(n))},n=setTimeout(r,i.body?9:99),c=C.clientHeight,a=function(){$=Math.max(s.innerWidth||0,C.clientWidth)!==G.width||C.clientHeight!==c,c=C.clientHeight,$&&x.fillImgs()};J(s,"resize",function(e,t){var r,n,s=function(){var i=new Date-n;i<t?r=setTimeout(s,t-i):(r=null,e())};return function(){n=new Date,r||(r=setTimeout(s,t))}}(a,99)),J(i,"readystatechange",r)}(),x.picturefill=ee,x.fillImgs=ee,x.teardownRun=y,ee._=x,s.picturefillCFG={pf:x,push:function(e){var t=e.shift();"function"==typeof x[t]?x[t].apply(x,e):(M[t]=e[0],j&&x.fillImgs({reselect:!0}))}};for(;I&&I.length;)s.picturefillCFG.push(I.shift());s.picturefill=ee,"object"==typeof e&&"object"==typeof e.exports?e.exports=ee:void 0!==(n=function(){return ee}.call(t,r,t,e))&&(e.exports=n),x.supPicture||(R["image/webp"]=function(e,t){var r=new s.Image;return r.onerror=function(){R[e]=!1,ee()},r.onload=function(){R[e]=1===r.width,ee()},r.src=t,"pending"}("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document)},function(e,t,r){function n(e){return r(s(e))}function s(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var i={"./index":0,"./index.js":0};n.keys=function(){return Object.keys(i)},n.resolve=s,e.exports=n,n.id=4},function(e,t,r){r(1),e.exports=r(2)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvYnVuZGxlLm1pbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgOTc0NDBmZmE5NzVlMTg4NTg4MTQiLCJ3ZWJwYWNrOi8vLy4vanMvbW9kdWxlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4uL34vcGljdHVyZWZpbGwvZGlzdC9waWN0dXJlZmlsbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tb2R1bGVzIF5cXC5cXC8uKiQiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwibW9kdWxlRWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJlbCIsImdldEF0dHJpYnV0ZSIsIk1vZHVsZSIsImRlZmF1bHQiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIndpbmRvdyIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiSFRNTFBpY3R1cmVFbGVtZW50IiwidGVzdCIsIm1hdGNoIiwiUmVnRXhwIiwiJDEiLCJhZGRFdmVudExpc3RlbmVyIiwidGltZXIiLCJkdW1teVNyYyIsImNyZWF0ZUVsZW1lbnQiLCJmaXhSZXNwaW1nIiwiaW1nIiwic291cmNlIiwic2l6ZXMiLCJwaWN0dXJlIiwicGFyZW50Tm9kZSIsIm5vZGVOYW1lIiwidG9VcHBlckNhc2UiLCJjbG9uZU5vZGUiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInNldFRpbWVvdXQiLCJyZW1vdmVDaGlsZCIsIl9wZkxhc3RTaXplIiwib2Zmc2V0V2lkdGgiLCJmaW5kUGljdHVyZUltZ3MiLCJpbWdzIiwib25SZXNpemUiLCJjbGVhclRpbWVvdXQiLCJtcSIsIm1hdGNoTWVkaWEiLCJpbml0IiwiYWRkTGlzdGVuZXIiLCJzcmNzZXQiLCJyZWFkeVN0YXRlIiwidW5kZWZpbmVkIiwiaXNTcGFjZSIsInVwZGF0ZU1ldHJpY3MiLCJpc1Z3RGlydHkiLCJEUFIiLCJkZXZpY2VQaXhlbFJhdGlvIiwiY3NzQ2FjaGUiLCJzaXplTGVuZ3RoQ2FjaGUiLCJwZiIsInVuaXRzIiwid2lkdGgiLCJNYXRoIiwibWF4IiwiaW5uZXJXaWR0aCIsImRvY0VsZW0iLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwidnciLCJ2aCIsImV2YWxJZCIsImpvaW4iLCJlbSIsImdldEVtVmFsdWUiLCJyZW0iLCJjaG9vc2VMb3dSZXMiLCJsb3dlclZhbHVlIiwiaGlnaGVyVmFsdWUiLCJkcHJWYWx1ZSIsImlzQ2FjaGVkIiwiYm9udXNGYWN0b3IiLCJ0b29NdWNoIiwiYm9udXMiLCJtZWFuRGVuc2l0eSIsImNmZyIsImFsZ29yaXRobSIsInBvdyIsInNxcnQiLCJhcHBseUJlc3RDYW5kaWRhdGUiLCJzcmNTZXRDYW5kaWRhdGVzIiwibWF0Y2hpbmdTZXQiLCJnZXRTZXQiLCJldmFsdWF0ZWQiLCJzZXRSZXMiLCJhcHBseVNldENhbmRpZGF0ZSIsIm5zIiwiZXZhbGVkIiwiYXNjZW5kaW5nU29ydCIsImEiLCJiIiwicmVzIiwic2V0U3JjVG9DdXIiLCJzcmMiLCJzZXQiLCJjYW5kaWRhdGUiLCJzZXRzIiwiZ2V0Q2FuZGlkYXRlRm9yU3JjIiwibWFrZVVybCIsImN1clNyYyIsImN1ckNhbiIsInNldFJlc29sdXRpb24iLCJjYW5kaWRhdGVzIiwicGFyc2VTZXQiLCJ1cmwiLCJnZXRBbGxTb3VyY2VFbGVtZW50cyIsImxlbiIsInNvdXJjZXMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInB1c2giLCJtZWRpYSIsInR5cGUiLCJwYXJzZVNyY3NldCIsImlucHV0IiwiY29sbGVjdENoYXJhY3RlcnMiLCJyZWdFeCIsImNoYXJzIiwiZXhlYyIsInN1YnN0cmluZyIsInBvcyIsInBhcnNlRGVzY3JpcHRvcnMiLCJ3IiwiaCIsImRlc2MiLCJsYXN0Q2hhciIsImludFZhbCIsImZsb2F0VmFsIiwicEVycm9yIiwiZGVzY3JpcHRvcnMiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJyZWdleE5vbk5lZ2F0aXZlSW50ZWdlciIsInJlZ2V4RmxvYXRpbmdQb2ludCIsImhhczF4IiwiY3VycmVudERlc2NyaXB0b3IiLCJzdGF0ZSIsImlucHV0TGVuZ3RoIiwicmVnZXhMZWFkaW5nQ29tbWFzT3JTcGFjZXMiLCJyZWdleExlYWRpbmdOb3RTcGFjZXMiLCJzbGljZSIsInJlcGxhY2UiLCJyZWdleFRyYWlsaW5nQ29tbWFzIiwicmVnZXhMZWFkaW5nU3BhY2VzIiwiY2hhckF0IiwicGFyc2VTaXplcyIsInN0clZhbHVlIiwidW5wYXJzZWRTaXplc0xpc3QiLCJ1bnBhcnNlZFNpemVzTGlzdExlbmd0aCIsInVucGFyc2VkU2l6ZSIsImxhc3RDb21wb25lbnRWYWx1ZSIsInNpemUiLCJyZWdleENzc0xlbmd0aFdpdGhVbml0cyIsInJlZ2V4Q3NzQ2FsYyIsInN0ciIsInB1c2hDb21wb25lbnQiLCJjb21wb25lbnQiLCJjb21wb25lbnRBcnJheSIsInB1c2hDb21wb25lbnRBcnJheSIsImxpc3RBcnJheSIsImNocmN0ciIsInBhcmVuRGVwdGgiLCJpbkNvbW1lbnQiLCJwb3AiLCJtYXRjaGVzTWVkaWEiLCJlbWlucHgiLCJhbHdheXNDaGVja1dEZXNjcmlwdG9yIiwiaXNTdXBwb3J0VGVzdFJlYWR5Iiwibm9vcCIsImltYWdlIiwiZ2V0SW1nQXR0ciIsInNldEltZ0F0dHIiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVJbWdBdHRyIiwicmVtb3ZlQXR0cmlidXRlIiwiZG9jdW1lbnRFbGVtZW50IiwidHlwZXMiLCJzdXBwb3J0QWJvcnQiLCJjdXJTcmNQcm9wIiwicmVnV0Rlc2MiLCJyZWdTaXplIiwic2V0T3B0aW9ucyIsInBpY3R1cmVmaWxsQ0ZHIiwiZnNDc3MiLCJweCIsImluIiwiYW5jaG9yIiwiYWxyZWFkeVJ1biIsIm9uIiwib2JqIiwiZXZ0IiwiZm4iLCJjYXB0dXJlIiwiYXR0YWNoRXZlbnQiLCJtZW1vaXplIiwiY2FjaGUiLCJldmFsQ1NTIiwicmVnTGVuZ3RoIiwiYXJncyIsImFyZ3VtZW50cyIsImluZGV4Iiwic3RyaW5nIiwiYnVpbGRTdHIiLCJjc3MiLCJ0b0xvd2VyQ2FzZSIsInBhcnNlZExlbmd0aCIsIkZ1bmN0aW9uIiwiZSIsInNpemVzYXR0ciIsImNXaWR0aCIsImNhbGNMaXN0TGVuZ3RoIiwicGljdHVyZWZpbGwiLCJvcHQiLCJlbGVtZW50cyIsInBsZW4iLCJvcHRpb25zIiwibm9kZVR5cGUiLCJjb250ZXh0IiwicXNhIiwicmVldmFsdWF0ZSIsInJlc2VsZWN0Iiwic2VsIiwic2VsU2hvcnQiLCJzZXR1cFJ1biIsImZpbGxJbWciLCJ0ZWFyZG93blJ1biIsImNvbnNvbGUiLCJ3YXJuIiwiaW1wbGVtZW50YXRpb24iLCJoYXNGZWF0dXJlIiwiRGF0ZSIsImdldFRpbWUiLCJzdWJzdHIiLCJzdXBTcmNzZXQiLCJzdXBTaXplcyIsInN1cFBpY3R1cmUiLCJpbWFnZTIiLCJjb21wbGV0ZSIsIndpZHRoMSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJ1Iiwic2V0U2l6ZSIsImhyZWYiLCJtYXRjaGVzIiwibU1RIiwiYXBwbHkiLCJ0aGlzIiwiY2FsY0xlbmd0aCIsInNvdXJjZVNpemVWYWx1ZSIsInN1cHBvcnRzVHlwZSIsInBhcnNlU2l6ZSIsInNvdXJjZVNpemVTdHIiLCJjYW5kcyIsImJvZHkiLCJkaXYiLCJvcmlnaW5hbEhUTUxDU1MiLCJzdHlsZSIsImNzc1RleHQiLCJvcmlnaW5hbEJvZHlDU1MiLCJhcHBlbmRDaGlsZCIsInNvdXJjZVNpemVMaXN0U3RyIiwidVQiLCJ3aW5uaW5nTGVuZ3RoIiwiaiIsImJlc3RDYW5kaWRhdGUiLCJjYW5kaWRhdGVTcmMiLCJhYm9ydEN1clNyYyIsImltYWdlRGF0YSIsImRwciIsImNhY2hlZCIsInNvcnQiLCJzZXRTcmMiLCJvcmlnV2lkdGgiLCJwYXJzZVNldHMiLCJlbGVtZW50IiwicGFyZW50Iiwic3Jjc2V0QXR0cmlidXRlIiwiaW1hZ2VTZXQiLCJpc1dEZXNjcmlwb3IiLCJzcmNzZXRQYXJzZWQiLCJoYXNQaWN0dXJlIiwicGljIiwic3VwcG9ydGVkIiwic3JjQXR0ciIsInBhcnNlZCIsImV4dHJlbWUiLCJpc0RvbVJlYWR5IiwicmVnUmVhZHkiLCJydW4iLCJ0aW1lcklkIiwiZmlsbEltZ3MiLCJsYXN0Q2xpZW50V2lkdGgiLCJmdW5jIiwid2FpdCIsInRpbWVvdXQiLCJ0aW1lc3RhbXAiLCJsYXRlciIsImxhc3QiLCJfIiwic2hpZnQiLCJ0eXBlVXJpIiwiSW1hZ2UiLCJ3ZWJwYWNrQ29udGV4dCIsInJlcSIsIndlYnBhY2tDb250ZXh0UmVzb2x2ZSIsImlkIiwibWFwIiwiRXJyb3IiLCIuL2luZGV4IiwiLi9pbmRleC5qcyIsImtleXMiLCJyZXNvbHZlIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBSSxFQUFBSixFQUNBSyxHQUFBLEVBQ0FILFdBVUEsT0FOQUosR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQTRCQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQUssRUFBQSxTQUFBSyxHQUEyQyxNQUFBQSxJQUczQ1YsRUFBQVcsRUFBQSxTQUFBUixF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LFFBQUFpQyxHQUkzRCtDLEVBQUEwTCxhQUNBM0QsRUFBQSxjQTVzQ0EsU0FBQWhFLEVBQUE2TCxHQUdBLEdBQUFwSSxHQUFBLEdBQUF0SyxHQUFBMlMsS0FVQSxPQVRBckksR0FBQXVFLFFBQUEsV0FDQWhFLEVBQUFoRSxJQUFBLEVBQ0FtRyxNQUVBMUMsRUFBQXNFLE9BQUEsV0FDQS9ELEVBQUFoRSxHQUFBLElBQUF5RCxFQUFBdEgsTUFDQWdLLE1BRUExQyxFQUFBM0UsSUFBQStNLEVBQ0EsV0ErckNBLDBKQUdDMVMsT0FBQVIsV0pxSUssU0FBVXpCLEVBQVFELEVBQVNILEdLeG9EakMsUUFBQWlWLEdBQUFDLEdBQ0EsTUFBQWxWLEdBQUFtVixFQUFBRCxJQUVBLFFBQUFDLEdBQUFELEdBQ0EsR0FBQUUsR0FBQUMsRUFBQUgsRUFDQSxNQUFBRSxFQUFBLEdBQ0EsU0FBQUUsT0FBQSx1QkFBQUosRUFBQSxLQUNBLE9BQUFFLEdBWEEsR0FBQUMsSUFDQUUsVUFBQSxFQUNBQyxhQUFBLEVBV0FQLEdBQUFRLEtBQUEsV0FDQSxNQUFBMVUsUUFBQTBVLEtBQUFKLElBRUFKLEVBQUFTLFFBQUFQLEVBQ0EvVSxFQUFBRCxRQUFBOFUsRUFDQUEsRUFBQUcsR0FBQSxHTGtwRE0sU0FBVWhWLEVBQVFELEVBQVNILEdBRWpDQSxFQUFvQixHQUNwQkksRUFBT0QsUUFBVUgsRUFBb0IiLCJmaWxlIjoianMvYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vKlxyXG4gIGh0dHBzOi8vZ2l0aHViLmNvbS92aWdldGxhYnMvYmxlbmRpZC9ibG9iL21hc3Rlci9zcmMvamF2YXNjcmlwdHMvbW9kdWxlcy9pbmRleC5qc1xyXG4gIEF1dG9tYXRpY2FsbHkgaW5zdGFudGlhdGVzIG1vZHVsZXMgYmFzZWQgb24gZGF0YS1hdHRyaWJ1dGVzXHJcbiAgc3BlY2lmeWluZyBtb2R1bGUgZmlsZS1uYW1lcy5cclxuKi9cblxudmFyIG1vZHVsZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbW9kdWxlXScpO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gIHZhciBlbCA9IG1vZHVsZUVsZW1lbnRzW2ldO1xuICB2YXIgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1tb2R1bGUnKTtcbiAgdmFyIE1vZHVsZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCkoXCIuL1wiICsgbmFtZSkuZGVmYXVsdDtcbiAgbmV3IE1vZHVsZShlbCk7XG59XG5cbi8qXHJcbiAgVXNhZ2U6XHJcbiAgPT09PT09XHJcbiAgaHRtbFxyXG4gIC0tLS1cclxuICA8YnV0dG9uIGRhdGEtbW9kdWxlPVwiZGlzYXBwZWFyXCI+ZGlzYXBwZWFyITwvYnV0dG9uPlxyXG4gIGpzXHJcbiAgLS1cclxuICAvLyBtb2R1bGVzL2Rpc2FwcGVhci5qc1xyXG4gIGV4cG9ydCBkZWZhdWx0IGNsYXNzIERpc2FwcGVhciB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbCkge1xyXG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICB9XHJcbiAgfVxyXG4qL1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIHBpY3R1cmVmaWxsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohIHBpY3R1cmVmaWxsIC0gdjMuMC4yIC0gMjAxNi0wMi0xMlxuICogaHR0cHM6Ly9zY290dGplaGwuZ2l0aHViLmlvL3BpY3R1cmVmaWxsL1xuICogQ29weXJpZ2h0IChjKSAyMDE2IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvYmxvYi9tYXN0ZXIvQXV0aG9ycy50eHQ7IExpY2Vuc2VkIE1JVFxuICovXG4vKiEgR2Vja28tUGljdHVyZSAtIHYxLjBcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvdHJlZS8zLjAvc3JjL3BsdWdpbnMvZ2Vja28tcGljdHVyZVxuICogRmlyZWZveCdzIGVhcmx5IHBpY3R1cmUgaW1wbGVtZW50YXRpb24gKHByaW9yIHRvIEZGNDEpIGlzIHN0YXRpYyBhbmQgZG9lc1xuICogbm90IHJlYWN0IHRvIHZpZXdwb3J0IGNoYW5nZXMuIFRoaXMgdGlueSBtb2R1bGUgZml4ZXMgdGhpcy5cbiAqL1xuKGZ1bmN0aW9uKHdpbmRvdykge1xuXHQvKmpzaGludCBlcW51bGw6dHJ1ZSAqL1xuXHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXG5cdGlmICggd2luZG93LkhUTUxQaWN0dXJlRWxlbWVudCAmJiAoKC9lY2tvLykudGVzdCh1YSkgJiYgdWEubWF0Y2goL3J2XFw6KFxcZCspLykgJiYgUmVnRXhwLiQxIDwgNDUpICkge1xuXHRcdGFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHRpbWVyO1xuXG5cdFx0XHR2YXIgZHVtbXlTcmMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic291cmNlXCIpO1xuXG5cdFx0XHR2YXIgZml4UmVzcGltZyA9IGZ1bmN0aW9uKGltZykge1xuXHRcdFx0XHR2YXIgc291cmNlLCBzaXplcztcblx0XHRcdFx0dmFyIHBpY3R1cmUgPSBpbWcucGFyZW50Tm9kZTtcblxuXHRcdFx0XHRpZiAocGljdHVyZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIlBJQ1RVUkVcIikge1xuXHRcdFx0XHRcdHNvdXJjZSA9IGR1bW15U3JjLmNsb25lTm9kZSgpO1xuXG5cdFx0XHRcdFx0cGljdHVyZS5pbnNlcnRCZWZvcmUoc291cmNlLCBwaWN0dXJlLmZpcnN0RWxlbWVudENoaWxkKTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cGljdHVyZS5yZW1vdmVDaGlsZChzb3VyY2UpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCFpbWcuX3BmTGFzdFNpemUgfHwgaW1nLm9mZnNldFdpZHRoID4gaW1nLl9wZkxhc3RTaXplKSB7XG5cdFx0XHRcdFx0aW1nLl9wZkxhc3RTaXplID0gaW1nLm9mZnNldFdpZHRoO1xuXHRcdFx0XHRcdHNpemVzID0gaW1nLnNpemVzO1xuXHRcdFx0XHRcdGltZy5zaXplcyArPSBcIiwxMDB2d1wiO1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpbWcuc2l6ZXMgPSBzaXplcztcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0dmFyIGZpbmRQaWN0dXJlSW1ncyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgaTtcblx0XHRcdFx0dmFyIGltZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicGljdHVyZSA+IGltZywgaW1nW3NyY3NldF1bc2l6ZXNdXCIpO1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgaW1ncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGZpeFJlc3BpbWcoaW1nc1tpXSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHR2YXIgb25SZXNpemUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KGZpbmRQaWN0dXJlSW1ncywgOTkpO1xuXHRcdFx0fTtcblx0XHRcdHZhciBtcSA9IHdpbmRvdy5tYXRjaE1lZGlhICYmIG1hdGNoTWVkaWEoXCIob3JpZW50YXRpb246IGxhbmRzY2FwZSlcIik7XG5cdFx0XHR2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRvblJlc2l6ZSgpO1xuXG5cdFx0XHRcdGlmIChtcSAmJiBtcS5hZGRMaXN0ZW5lcikge1xuXHRcdFx0XHRcdG1xLmFkZExpc3RlbmVyKG9uUmVzaXplKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0ZHVtbXlTcmMuc3Jjc2V0ID0gXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PVwiO1xuXG5cdFx0XHRpZiAoL15bY3xpXXxkJC8udGVzdChkb2N1bWVudC5yZWFkeVN0YXRlIHx8IFwiXCIpKSB7XG5cdFx0XHRcdGluaXQoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGluaXQpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb25SZXNpemU7XG5cdFx0fSkoKSk7XG5cdH1cbn0pKHdpbmRvdyk7XG5cbi8qISBQaWN0dXJlZmlsbCAtIHYzLjAuMlxuICogaHR0cDovL3Njb3R0amVobC5naXRodWIuaW8vcGljdHVyZWZpbGxcbiAqIENvcHlyaWdodCAoYykgMjAxNSBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL3BpY3R1cmVmaWxsL2Jsb2IvbWFzdGVyL0F1dGhvcnMudHh0O1xuICogIExpY2Vuc2U6IE1JVFxuICovXG5cbihmdW5jdGlvbiggd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkICkge1xuXHQvLyBFbmFibGUgc3RyaWN0IG1vZGVcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0Ly8gSFRNTCBzaGltfHYgaXQgZm9yIG9sZCBJRSAoSUU5IHdpbGwgc3RpbGwgbmVlZCB0aGUgSFRNTCB2aWRlbyB0YWcgd29ya2Fyb3VuZClcblx0ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJwaWN0dXJlXCIgKTtcblxuXHR2YXIgd2FybiwgZW1pbnB4LCBhbHdheXNDaGVja1dEZXNjcmlwdG9yLCBldmFsSWQ7XG5cdC8vIGxvY2FsIG9iamVjdCBmb3IgbWV0aG9kIHJlZmVyZW5jZXMgYW5kIHRlc3RpbmcgZXhwb3N1cmVcblx0dmFyIHBmID0ge307XG5cdHZhciBpc1N1cHBvcnRUZXN0UmVhZHkgPSBmYWxzZTtcblx0dmFyIG5vb3AgPSBmdW5jdGlvbigpIHt9O1xuXHR2YXIgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImltZ1wiICk7XG5cdHZhciBnZXRJbWdBdHRyID0gaW1hZ2UuZ2V0QXR0cmlidXRlO1xuXHR2YXIgc2V0SW1nQXR0ciA9IGltYWdlLnNldEF0dHJpYnV0ZTtcblx0dmFyIHJlbW92ZUltZ0F0dHIgPSBpbWFnZS5yZW1vdmVBdHRyaWJ1dGU7XG5cdHZhciBkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHR2YXIgdHlwZXMgPSB7fTtcblx0dmFyIGNmZyA9IHtcblx0XHQvL3Jlc291cmNlIHNlbGVjdGlvbjpcblx0XHRhbGdvcml0aG06IFwiXCJcblx0fTtcblx0dmFyIHNyY0F0dHIgPSBcImRhdGEtcGZzcmNcIjtcblx0dmFyIHNyY3NldEF0dHIgPSBzcmNBdHRyICsgXCJzZXRcIjtcblx0Ly8gdWEgc25pZmZpbmcgaXMgZG9uZSBmb3IgdW5kZXRlY3RhYmxlIGltZyBsb2FkaW5nIGZlYXR1cmVzLFxuXHQvLyB0byBkbyBzb21lIG5vbiBjcnVjaWFsIHBlcmYgb3B0aW1pemF0aW9uc1xuXHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXHR2YXIgc3VwcG9ydEFib3J0ID0gKC9yaWRlbnQvKS50ZXN0KHVhKSB8fCAoKC9lY2tvLykudGVzdCh1YSkgJiYgdWEubWF0Y2goL3J2XFw6KFxcZCspLykgJiYgUmVnRXhwLiQxID4gMzUgKTtcblx0dmFyIGN1clNyY1Byb3AgPSBcImN1cnJlbnRTcmNcIjtcblx0dmFyIHJlZ1dEZXNjID0gL1xccytcXCs/XFxkKyhlXFxkKyk/dy87XG5cdHZhciByZWdTaXplID0gLyhcXChbXildK1xcKSk/XFxzKiguKykvO1xuXHR2YXIgc2V0T3B0aW9ucyA9IHdpbmRvdy5waWN0dXJlZmlsbENGRztcblx0LyoqXG5cdCAqIFNob3J0Y3V0IHByb3BlcnR5IGZvciBodHRwczovL3czYy5naXRodWIuaW8vd2ViYXBwc2VjL3NwZWNzL21peGVkY29udGVudC8jcmVzdHJpY3RzLW1peGVkLWNvbnRlbnQgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcblx0ICovXG5cdC8vIGJhc2VTdHlsZSBhbHNvIHVzZWQgYnkgZ2V0RW1WYWx1ZSAoaS5lLjogd2lkdGg6IDFlbSBpcyBpbXBvcnRhbnQpXG5cdHZhciBiYXNlU3R5bGUgPSBcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt2aXNpYmlsaXR5OmhpZGRlbjtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6MDtib3JkZXI6bm9uZTtmb250LXNpemU6MWVtO3dpZHRoOjFlbTtvdmVyZmxvdzpoaWRkZW47Y2xpcDpyZWN0KDBweCwgMHB4LCAwcHgsIDBweClcIjtcblx0dmFyIGZzQ3NzID0gXCJmb250LXNpemU6MTAwJSFpbXBvcnRhbnQ7XCI7XG5cdHZhciBpc1Z3RGlydHkgPSB0cnVlO1xuXG5cdHZhciBjc3NDYWNoZSA9IHt9O1xuXHR2YXIgc2l6ZUxlbmd0aENhY2hlID0ge307XG5cdHZhciBEUFIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcblx0dmFyIHVuaXRzID0ge1xuXHRcdHB4OiAxLFxuXHRcdFwiaW5cIjogOTZcblx0fTtcblx0dmFyIGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdC8qKlxuXHQgKiBhbHJlYWR5UnVuIGZsYWcgdXNlZCBmb3Igc2V0T3B0aW9ucy4gaXMgaXQgdHJ1ZSBzZXRPcHRpb25zIHdpbGwgcmVldmFsdWF0ZVxuXHQgKiBAdHlwZSB7Ym9vbGVhbn1cblx0ICovXG5cdHZhciBhbHJlYWR5UnVuID0gZmFsc2U7XG5cblx0Ly8gUmV1c2FibGUsIG5vbi1cImdcIiBSZWdleGVzXG5cblx0Ly8gKERvbid0IHVzZSBcXHMsIHRvIGF2b2lkIG1hdGNoaW5nIG5vbi1icmVha2luZyBzcGFjZS4pXG5cdHZhciByZWdleExlYWRpbmdTcGFjZXMgPSAvXlsgXFx0XFxuXFxyXFx1MDAwY10rLyxcblx0ICAgIHJlZ2V4TGVhZGluZ0NvbW1hc09yU3BhY2VzID0gL15bLCBcXHRcXG5cXHJcXHUwMDBjXSsvLFxuXHQgICAgcmVnZXhMZWFkaW5nTm90U3BhY2VzID0gL15bXiBcXHRcXG5cXHJcXHUwMDBjXSsvLFxuXHQgICAgcmVnZXhUcmFpbGluZ0NvbW1hcyA9IC9bLF0rJC8sXG5cdCAgICByZWdleE5vbk5lZ2F0aXZlSW50ZWdlciA9IC9eXFxkKyQvLFxuXG5cdCAgICAvLyAoIFBvc2l0aXZlIG9yIG5lZ2F0aXZlIG9yIHVuc2lnbmVkIGludGVnZXJzIG9yIGRlY2ltYWxzLCB3aXRob3V0IG9yIHdpdGhvdXQgZXhwb25lbnRzLlxuXHQgICAgLy8gTXVzdCBpbmNsdWRlIGF0IGxlYXN0IG9uZSBkaWdpdC5cblx0ICAgIC8vIEFjY29yZGluZyB0byBzcGVjIHRlc3RzIGFueSBkZWNpbWFsIHBvaW50IG11c3QgYmUgZm9sbG93ZWQgYnkgYSBkaWdpdC5cblx0ICAgIC8vIE5vIGxlYWRpbmcgcGx1cyBzaWduIGlzIGFsbG93ZWQuKVxuXHQgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvaW5mcmFzdHJ1Y3R1cmUuaHRtbCN2YWxpZC1mbG9hdGluZy1wb2ludC1udW1iZXJcblx0ICAgIHJlZ2V4RmxvYXRpbmdQb2ludCA9IC9eLT8oPzpbMC05XSt8WzAtOV0qXFwuWzAtOV0rKSg/OltlRV1bKy1dP1swLTldKyk/JC87XG5cblx0dmFyIG9uID0gZnVuY3Rpb24ob2JqLCBldnQsIGZuLCBjYXB0dXJlKSB7XG5cdFx0aWYgKCBvYmouYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdG9iai5hZGRFdmVudExpc3RlbmVyKGV2dCwgZm4sIGNhcHR1cmUgfHwgZmFsc2UpO1xuXHRcdH0gZWxzZSBpZiAoIG9iai5hdHRhY2hFdmVudCApIHtcblx0XHRcdG9iai5hdHRhY2hFdmVudCggXCJvblwiICsgZXZ0LCBmbik7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBzaW1wbGUgbWVtb2l6ZSBmdW5jdGlvbjpcblx0ICovXG5cblx0dmFyIG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xuXHRcdHZhciBjYWNoZSA9IHt9O1xuXHRcdHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuXHRcdFx0aWYgKCAhKGlucHV0IGluIGNhY2hlKSApIHtcblx0XHRcdFx0Y2FjaGVbIGlucHV0IF0gPSBmbihpbnB1dCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gY2FjaGVbIGlucHV0IF07XG5cdFx0fTtcblx0fTtcblxuXHQvLyBVVElMSVRZIEZVTkNUSU9OU1xuXG5cdC8vIE1hbnVhbCBpcyBmYXN0ZXIgdGhhbiBSZWdFeFxuXHQvLyBodHRwOi8vanNwZXJmLmNvbS93aGl0ZXNwYWNlLWNoYXJhY3Rlci81XG5cdGZ1bmN0aW9uIGlzU3BhY2UoYykge1xuXHRcdHJldHVybiAoYyA9PT0gXCJcXHUwMDIwXCIgfHwgLy8gc3BhY2Vcblx0XHQgICAgICAgIGMgPT09IFwiXFx1MDAwOVwiIHx8IC8vIGhvcml6b250YWwgdGFiXG5cdFx0ICAgICAgICBjID09PSBcIlxcdTAwMEFcIiB8fCAvLyBuZXcgbGluZVxuXHRcdCAgICAgICAgYyA9PT0gXCJcXHUwMDBDXCIgfHwgLy8gZm9ybSBmZWVkXG5cdFx0ICAgICAgICBjID09PSBcIlxcdTAwMERcIik7ICAvLyBjYXJyaWFnZSByZXR1cm5cblx0fVxuXG5cdC8qKlxuXHQgKiBnZXRzIGEgbWVkaWFxdWVyeSBhbmQgcmV0dXJucyBhIGJvb2xlYW4gb3IgZ2V0cyBhIGNzcyBsZW5ndGggYW5kIHJldHVybnMgYSBudW1iZXJcblx0ICogQHBhcmFtIGNzcyBtZWRpYXF1ZXJpZXMgb3IgY3NzIGxlbmd0aFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbnxudW1iZXJ9XG5cdCAqXG5cdCAqIGJhc2VkIG9uOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qb25hdGhhbnRuZWFsL2RiNGY3NzAwOWIxNTVmMDgzNzM4XG5cdCAqL1xuXHR2YXIgZXZhbENTUyA9IChmdW5jdGlvbigpIHtcblxuXHRcdHZhciByZWdMZW5ndGggPSAvXihbXFxkXFwuXSspKGVtfHZ3fHB4KSQvO1xuXHRcdHZhciByZXBsYWNlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cywgaW5kZXggPSAwLCBzdHJpbmcgPSBhcmdzWzBdO1xuXHRcdFx0d2hpbGUgKCsraW5kZXggaW4gYXJncykge1xuXHRcdFx0XHRzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShhcmdzW2luZGV4XSwgYXJnc1srK2luZGV4XSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gc3RyaW5nO1xuXHRcdH07XG5cblx0XHR2YXIgYnVpbGRTdHIgPSBtZW1vaXplKGZ1bmN0aW9uKGNzcykge1xuXG5cdFx0XHRyZXR1cm4gXCJyZXR1cm4gXCIgKyByZXBsYWNlKChjc3MgfHwgXCJcIikudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0Ly8gaW50ZXJwcmV0IGBhbmRgXG5cdFx0XHRcdC9cXGJhbmRcXGIvZywgXCImJlwiLFxuXG5cdFx0XHRcdC8vIGludGVycHJldCBgLGBcblx0XHRcdFx0LywvZywgXCJ8fFwiLFxuXG5cdFx0XHRcdC8vIGludGVycHJldCBgbWluLWAgYXMgPj1cblx0XHRcdFx0L21pbi0oW2Etei1cXHNdKyk6L2csIFwiZS4kMT49XCIsXG5cblx0XHRcdFx0Ly8gaW50ZXJwcmV0IGBtYXgtYCBhcyA8PVxuXHRcdFx0XHQvbWF4LShbYS16LVxcc10rKTovZywgXCJlLiQxPD1cIixcblxuXHRcdFx0XHQvL2NhbGMgdmFsdWVcblx0XHRcdFx0L2NhbGMoW14pXSspL2csIFwiKCQxKVwiLFxuXG5cdFx0XHRcdC8vIGludGVycHJldCBjc3MgdmFsdWVzXG5cdFx0XHRcdC8oXFxkK1tcXC5dKltcXGRdKikoW2Etel0rKS9nLCBcIigkMSAqIGUuJDIpXCIsXG5cdFx0XHRcdC8vbWFrZSBldmFsIGxlc3MgZXZpbFxuXHRcdFx0XHQvXig/IShlLlthLXpdfFswLTlcXC4mPXw+PFxcK1xcLVxcKlxcKFxcKVxcL10pKS4qL2lnLCBcIlwiXG5cdFx0XHQpICsgXCI7XCI7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24oY3NzLCBsZW5ndGgpIHtcblx0XHRcdHZhciBwYXJzZWRMZW5ndGg7XG5cdFx0XHRpZiAoIShjc3MgaW4gY3NzQ2FjaGUpKSB7XG5cdFx0XHRcdGNzc0NhY2hlW2Nzc10gPSBmYWxzZTtcblx0XHRcdFx0aWYgKGxlbmd0aCAmJiAocGFyc2VkTGVuZ3RoID0gY3NzLm1hdGNoKCByZWdMZW5ndGggKSkpIHtcblx0XHRcdFx0XHRjc3NDYWNoZVtjc3NdID0gcGFyc2VkTGVuZ3RoWyAxIF0gKiB1bml0c1twYXJzZWRMZW5ndGhbIDIgXV07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Lypqc2hpbnQgZXZpbDp0cnVlICovXG5cdFx0XHRcdFx0dHJ5e1xuXHRcdFx0XHRcdFx0Y3NzQ2FjaGVbY3NzXSA9IG5ldyBGdW5jdGlvbihcImVcIiwgYnVpbGRTdHIoY3NzKSkodW5pdHMpO1xuXHRcdFx0XHRcdH0gY2F0Y2goZSkge31cblx0XHRcdFx0XHQvKmpzaGludCBldmlsOmZhbHNlICovXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBjc3NDYWNoZVtjc3NdO1xuXHRcdH07XG5cdH0pKCk7XG5cblx0dmFyIHNldFJlc29sdXRpb24gPSBmdW5jdGlvbiggY2FuZGlkYXRlLCBzaXplc2F0dHIgKSB7XG5cdFx0aWYgKCBjYW5kaWRhdGUudyApIHsgLy8gaCA9IG1lYW5zIGhlaWdodDogfHwgZGVzY3JpcHRvci50eXBlID09PSAnaCcgZG8gbm90IGhhbmRsZSB5ZXQuLi5cblx0XHRcdGNhbmRpZGF0ZS5jV2lkdGggPSBwZi5jYWxjTGlzdExlbmd0aCggc2l6ZXNhdHRyIHx8IFwiMTAwdndcIiApO1xuXHRcdFx0Y2FuZGlkYXRlLnJlcyA9IGNhbmRpZGF0ZS53IC8gY2FuZGlkYXRlLmNXaWR0aCA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNhbmRpZGF0ZS5yZXMgPSBjYW5kaWRhdGUuZDtcblx0XHR9XG5cdFx0cmV0dXJuIGNhbmRpZGF0ZTtcblx0fTtcblxuXHQvKipcblx0ICpcblx0ICogQHBhcmFtIG9wdFxuXHQgKi9cblx0dmFyIHBpY3R1cmVmaWxsID0gZnVuY3Rpb24oIG9wdCApIHtcblxuXHRcdGlmICghaXNTdXBwb3J0VGVzdFJlYWR5KSB7cmV0dXJuO31cblxuXHRcdHZhciBlbGVtZW50cywgaSwgcGxlbjtcblxuXHRcdHZhciBvcHRpb25zID0gb3B0IHx8IHt9O1xuXG5cdFx0aWYgKCBvcHRpb25zLmVsZW1lbnRzICYmIG9wdGlvbnMuZWxlbWVudHMubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRpZiAoIG9wdGlvbnMuZWxlbWVudHMubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJJTUdcIiApIHtcblx0XHRcdFx0b3B0aW9ucy5lbGVtZW50cyA9ICBbIG9wdGlvbnMuZWxlbWVudHMgXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9wdGlvbnMuY29udGV4dCA9IG9wdGlvbnMuZWxlbWVudHM7XG5cdFx0XHRcdG9wdGlvbnMuZWxlbWVudHMgPSAgbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRlbGVtZW50cyA9IG9wdGlvbnMuZWxlbWVudHMgfHwgcGYucXNhKCAob3B0aW9ucy5jb250ZXh0IHx8IGRvY3VtZW50KSwgKCBvcHRpb25zLnJlZXZhbHVhdGUgfHwgb3B0aW9ucy5yZXNlbGVjdCApID8gcGYuc2VsIDogcGYuc2VsU2hvcnQgKTtcblxuXHRcdGlmICggKHBsZW4gPSBlbGVtZW50cy5sZW5ndGgpICkge1xuXG5cdFx0XHRwZi5zZXR1cFJ1biggb3B0aW9ucyApO1xuXHRcdFx0YWxyZWFkeVJ1biA9IHRydWU7XG5cblx0XHRcdC8vIExvb3AgdGhyb3VnaCBhbGwgZWxlbWVudHNcblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgcGxlbjsgaSsrICkge1xuXHRcdFx0XHRwZi5maWxsSW1nKGVsZW1lbnRzWyBpIF0sIG9wdGlvbnMpO1xuXHRcdFx0fVxuXG5cdFx0XHRwZi50ZWFyZG93blJ1biggb3B0aW9ucyApO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogb3V0cHV0cyBhIHdhcm5pbmcgZm9yIHRoZSBkZXZlbG9wZXJcblx0ICogQHBhcmFtIHttZXNzYWdlfVxuXHQgKiBAdHlwZSB7RnVuY3Rpb259XG5cdCAqL1xuXHR3YXJuID0gKCB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLndhcm4gKSA/XG5cdFx0ZnVuY3Rpb24oIG1lc3NhZ2UgKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oIG1lc3NhZ2UgKTtcblx0XHR9IDpcblx0XHRub29wXG5cdDtcblxuXHRpZiAoICEoY3VyU3JjUHJvcCBpbiBpbWFnZSkgKSB7XG5cdFx0Y3VyU3JjUHJvcCA9IFwic3JjXCI7XG5cdH1cblxuXHQvLyBBZGQgc3VwcG9ydCBmb3Igc3RhbmRhcmQgbWltZSB0eXBlcy5cblx0dHlwZXNbIFwiaW1hZ2UvanBlZ1wiIF0gPSB0cnVlO1xuXHR0eXBlc1sgXCJpbWFnZS9naWZcIiBdID0gdHJ1ZTtcblx0dHlwZXNbIFwiaW1hZ2UvcG5nXCIgXSA9IHRydWU7XG5cblx0ZnVuY3Rpb24gZGV0ZWN0VHlwZVN1cHBvcnQoIHR5cGUsIHR5cGVVcmkgKSB7XG5cdFx0Ly8gYmFzZWQgb24gTW9kZXJuaXpyJ3MgbG9zc2xlc3MgaW1nLXdlYnAgdGVzdFxuXHRcdC8vIG5vdGU6IGFzeW5jaHJvbm91c1xuXHRcdHZhciBpbWFnZSA9IG5ldyB3aW5kb3cuSW1hZ2UoKTtcblx0XHRpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR0eXBlc1sgdHlwZSBdID0gZmFsc2U7XG5cdFx0XHRwaWN0dXJlZmlsbCgpO1xuXHRcdH07XG5cdFx0aW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR0eXBlc1sgdHlwZSBdID0gaW1hZ2Uud2lkdGggPT09IDE7XG5cdFx0XHRwaWN0dXJlZmlsbCgpO1xuXHRcdH07XG5cdFx0aW1hZ2Uuc3JjID0gdHlwZVVyaTtcblx0XHRyZXR1cm4gXCJwZW5kaW5nXCI7XG5cdH1cblxuXHQvLyB0ZXN0IHN2ZyBzdXBwb3J0XG5cdHR5cGVzWyBcImltYWdlL3N2Zyt4bWxcIiBdID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSggXCJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0ltYWdlXCIsIFwiMS4xXCIgKTtcblxuXHQvKipcblx0ICogdXBkYXRlcyB0aGUgaW50ZXJuYWwgdlcgcHJvcGVydHkgd2l0aCB0aGUgY3VycmVudCB2aWV3cG9ydCB3aWR0aCBpbiBweFxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlTWV0cmljcygpIHtcblxuXHRcdGlzVndEaXJ0eSA9IGZhbHNlO1xuXHRcdERQUiA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuXHRcdGNzc0NhY2hlID0ge307XG5cdFx0c2l6ZUxlbmd0aENhY2hlID0ge307XG5cblx0XHRwZi5EUFIgPSBEUFIgfHwgMTtcblxuXHRcdHVuaXRzLndpZHRoID0gTWF0aC5tYXgod2luZG93LmlubmVyV2lkdGggfHwgMCwgZG9jRWxlbS5jbGllbnRXaWR0aCk7XG5cdFx0dW5pdHMuaGVpZ2h0ID0gTWF0aC5tYXgod2luZG93LmlubmVySGVpZ2h0IHx8IDAsIGRvY0VsZW0uY2xpZW50SGVpZ2h0KTtcblxuXHRcdHVuaXRzLnZ3ID0gdW5pdHMud2lkdGggLyAxMDA7XG5cdFx0dW5pdHMudmggPSB1bml0cy5oZWlnaHQgLyAxMDA7XG5cblx0XHRldmFsSWQgPSBbIHVuaXRzLmhlaWdodCwgdW5pdHMud2lkdGgsIERQUiBdLmpvaW4oXCItXCIpO1xuXG5cdFx0dW5pdHMuZW0gPSBwZi5nZXRFbVZhbHVlKCk7XG5cdFx0dW5pdHMucmVtID0gdW5pdHMuZW07XG5cdH1cblxuXHRmdW5jdGlvbiBjaG9vc2VMb3dSZXMoIGxvd2VyVmFsdWUsIGhpZ2hlclZhbHVlLCBkcHJWYWx1ZSwgaXNDYWNoZWQgKSB7XG5cdFx0dmFyIGJvbnVzRmFjdG9yLCB0b29NdWNoLCBib251cywgbWVhbkRlbnNpdHk7XG5cblx0XHQvL2V4cGVyaW1lbnRhbFxuXHRcdGlmIChjZmcuYWxnb3JpdGhtID09PSBcInNhdmVEYXRhXCIgKXtcblx0XHRcdGlmICggbG93ZXJWYWx1ZSA+IDIuNyApIHtcblx0XHRcdFx0bWVhbkRlbnNpdHkgPSBkcHJWYWx1ZSArIDE7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0b29NdWNoID0gaGlnaGVyVmFsdWUgLSBkcHJWYWx1ZTtcblx0XHRcdFx0Ym9udXNGYWN0b3IgPSBNYXRoLnBvdyhsb3dlclZhbHVlIC0gMC42LCAxLjUpO1xuXG5cdFx0XHRcdGJvbnVzID0gdG9vTXVjaCAqIGJvbnVzRmFjdG9yO1xuXG5cdFx0XHRcdGlmIChpc0NhY2hlZCkge1xuXHRcdFx0XHRcdGJvbnVzICs9IDAuMSAqIGJvbnVzRmFjdG9yO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bWVhbkRlbnNpdHkgPSBsb3dlclZhbHVlICsgYm9udXM7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1lYW5EZW5zaXR5ID0gKGRwclZhbHVlID4gMSkgP1xuXHRcdFx0XHRNYXRoLnNxcnQobG93ZXJWYWx1ZSAqIGhpZ2hlclZhbHVlKSA6XG5cdFx0XHRcdGxvd2VyVmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1lYW5EZW5zaXR5ID4gZHByVmFsdWU7XG5cdH1cblxuXHRmdW5jdGlvbiBhcHBseUJlc3RDYW5kaWRhdGUoIGltZyApIHtcblx0XHR2YXIgc3JjU2V0Q2FuZGlkYXRlcztcblx0XHR2YXIgbWF0Y2hpbmdTZXQgPSBwZi5nZXRTZXQoIGltZyApO1xuXHRcdHZhciBldmFsdWF0ZWQgPSBmYWxzZTtcblx0XHRpZiAoIG1hdGNoaW5nU2V0ICE9PSBcInBlbmRpbmdcIiApIHtcblx0XHRcdGV2YWx1YXRlZCA9IGV2YWxJZDtcblx0XHRcdGlmICggbWF0Y2hpbmdTZXQgKSB7XG5cdFx0XHRcdHNyY1NldENhbmRpZGF0ZXMgPSBwZi5zZXRSZXMoIG1hdGNoaW5nU2V0ICk7XG5cdFx0XHRcdHBmLmFwcGx5U2V0Q2FuZGlkYXRlKCBzcmNTZXRDYW5kaWRhdGVzLCBpbWcgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aW1nWyBwZi5ucyBdLmV2YWxlZCA9IGV2YWx1YXRlZDtcblx0fVxuXG5cdGZ1bmN0aW9uIGFzY2VuZGluZ1NvcnQoIGEsIGIgKSB7XG5cdFx0cmV0dXJuIGEucmVzIC0gYi5yZXM7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRTcmNUb0N1ciggaW1nLCBzcmMsIHNldCApIHtcblx0XHR2YXIgY2FuZGlkYXRlO1xuXHRcdGlmICggIXNldCAmJiBzcmMgKSB7XG5cdFx0XHRzZXQgPSBpbWdbIHBmLm5zIF0uc2V0cztcblx0XHRcdHNldCA9IHNldCAmJiBzZXRbc2V0Lmxlbmd0aCAtIDFdO1xuXHRcdH1cblxuXHRcdGNhbmRpZGF0ZSA9IGdldENhbmRpZGF0ZUZvclNyYyhzcmMsIHNldCk7XG5cblx0XHRpZiAoIGNhbmRpZGF0ZSApIHtcblx0XHRcdHNyYyA9IHBmLm1ha2VVcmwoc3JjKTtcblx0XHRcdGltZ1sgcGYubnMgXS5jdXJTcmMgPSBzcmM7XG5cdFx0XHRpbWdbIHBmLm5zIF0uY3VyQ2FuID0gY2FuZGlkYXRlO1xuXG5cdFx0XHRpZiAoICFjYW5kaWRhdGUucmVzICkge1xuXHRcdFx0XHRzZXRSZXNvbHV0aW9uKCBjYW5kaWRhdGUsIGNhbmRpZGF0ZS5zZXQuc2l6ZXMgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhbmRpZGF0ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldENhbmRpZGF0ZUZvclNyYyggc3JjLCBzZXQgKSB7XG5cdFx0dmFyIGksIGNhbmRpZGF0ZSwgY2FuZGlkYXRlcztcblx0XHRpZiAoIHNyYyAmJiBzZXQgKSB7XG5cdFx0XHRjYW5kaWRhdGVzID0gcGYucGFyc2VTZXQoIHNldCApO1xuXHRcdFx0c3JjID0gcGYubWFrZVVybChzcmMpO1xuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBjYW5kaWRhdGVzLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIHNyYyA9PT0gcGYubWFrZVVybChjYW5kaWRhdGVzWyBpIF0udXJsKSApIHtcblx0XHRcdFx0XHRjYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBpIF07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhbmRpZGF0ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFsbFNvdXJjZUVsZW1lbnRzKCBwaWN0dXJlLCBjYW5kaWRhdGVzICkge1xuXHRcdHZhciBpLCBsZW4sIHNvdXJjZSwgc3Jjc2V0O1xuXG5cdFx0Ly8gU1BFQyBtaXNtYXRjaCBpbnRlbmRlZCBmb3Igc2l6ZSBhbmQgcGVyZjpcblx0XHQvLyBhY3R1YWxseSBvbmx5IHNvdXJjZSBlbGVtZW50cyBwcmVjZWRpbmcgdGhlIGltZyBzaG91bGQgYmUgdXNlZFxuXHRcdC8vIGFsc28gbm90ZTogZG9uJ3QgdXNlIHFzYSBoZXJlLCBiZWNhdXNlIElFOCBzb21ldGltZXMgZG9lc24ndCBsaWtlIHNvdXJjZSBhcyB0aGUga2V5IHBhcnQgaW4gYSBzZWxlY3RvclxuXHRcdHZhciBzb3VyY2VzID0gcGljdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJzb3VyY2VcIiApO1xuXG5cdFx0Zm9yICggaSA9IDAsIGxlbiA9IHNvdXJjZXMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRzb3VyY2UgPSBzb3VyY2VzWyBpIF07XG5cdFx0XHRzb3VyY2VbIHBmLm5zIF0gPSB0cnVlO1xuXHRcdFx0c3Jjc2V0ID0gc291cmNlLmdldEF0dHJpYnV0ZSggXCJzcmNzZXRcIiApO1xuXG5cdFx0XHQvLyBpZiBzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIHNyY3NldCBhdHRyaWJ1dGUsIHNraXBcblx0XHRcdGlmICggc3Jjc2V0ICkge1xuXHRcdFx0XHRjYW5kaWRhdGVzLnB1c2goIHtcblx0XHRcdFx0XHRzcmNzZXQ6IHNyY3NldCxcblx0XHRcdFx0XHRtZWRpYTogc291cmNlLmdldEF0dHJpYnV0ZSggXCJtZWRpYVwiICksXG5cdFx0XHRcdFx0dHlwZTogc291cmNlLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSxcblx0XHRcdFx0XHRzaXplczogc291cmNlLmdldEF0dHJpYnV0ZSggXCJzaXplc1wiIClcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTcmNzZXQgUGFyc2VyXG5cdCAqIEJ5IEFsZXggQmVsbCB8ICBNSVQgTGljZW5zZVxuXHQgKlxuXHQgKiBAcmV0dXJucyBBcnJheSBbe3VybDogXywgZDogXywgdzogXywgaDpfLCBzZXQ6Xyg/Pz8/KX0sIC4uLl1cblx0ICpcblx0ICogQmFzZWQgc3VwZXIgZHVwZXIgY2xvc2VseSBvbiB0aGUgcmVmZXJlbmNlIGFsZ29yaXRobSBhdDpcblx0ICogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI3BhcnNlLWEtc3Jjc2V0LWF0dHJpYnV0ZVxuXHQgKi9cblxuXHQvLyAxLiBMZXQgaW5wdXQgYmUgdGhlIHZhbHVlIHBhc3NlZCB0byB0aGlzIGFsZ29yaXRobS5cblx0Ly8gKFRPLURPIDogRXhwbGFpbiB3aGF0IFwic2V0XCIgYXJndW1lbnQgaXMgaGVyZS4gTWF5YmUgY2hvb3NlIGEgbW9yZVxuXHQvLyBkZXNjcmlwdGl2ZSAmIG1vcmUgc2VhcmNoYWJsZSBuYW1lLiAgU2luY2UgcGFzc2luZyB0aGUgXCJzZXRcIiBpbiByZWFsbHkgaGFzXG5cdC8vIG5vdGhpbmcgdG8gZG8gd2l0aCBwYXJzaW5nIHByb3BlciwgSSB3b3VsZCBwcmVmZXIgdGhpcyBhc3NpZ25tZW50IGV2ZW50dWFsbHlcblx0Ly8gZ28gaW4gYW4gZXh0ZXJuYWwgZm4uKVxuXHRmdW5jdGlvbiBwYXJzZVNyY3NldChpbnB1dCwgc2V0KSB7XG5cblx0XHRmdW5jdGlvbiBjb2xsZWN0Q2hhcmFjdGVycyhyZWdFeCkge1xuXHRcdFx0dmFyIGNoYXJzLFxuXHRcdFx0ICAgIG1hdGNoID0gcmVnRXguZXhlYyhpbnB1dC5zdWJzdHJpbmcocG9zKSk7XG5cdFx0XHRpZiAobWF0Y2gpIHtcblx0XHRcdFx0Y2hhcnMgPSBtYXRjaFsgMCBdO1xuXHRcdFx0XHRwb3MgKz0gY2hhcnMubGVuZ3RoO1xuXHRcdFx0XHRyZXR1cm4gY2hhcnM7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dmFyIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxuXHRcdCAgICB1cmwsXG5cdFx0ICAgIGRlc2NyaXB0b3JzLFxuXHRcdCAgICBjdXJyZW50RGVzY3JpcHRvcixcblx0XHQgICAgc3RhdGUsXG5cdFx0ICAgIGMsXG5cblx0XHQgICAgLy8gMi4gTGV0IHBvc2l0aW9uIGJlIGEgcG9pbnRlciBpbnRvIGlucHV0LCBpbml0aWFsbHkgcG9pbnRpbmcgYXQgdGhlIHN0YXJ0XG5cdFx0ICAgIC8vICAgIG9mIHRoZSBzdHJpbmcuXG5cdFx0ICAgIHBvcyA9IDAsXG5cblx0XHQgICAgLy8gMy4gTGV0IGNhbmRpZGF0ZXMgYmUgYW4gaW5pdGlhbGx5IGVtcHR5IHNvdXJjZSBzZXQuXG5cdFx0ICAgIGNhbmRpZGF0ZXMgPSBbXTtcblxuXHRcdC8qKlxuXHRcdCogQWRkcyBkZXNjcmlwdG9yIHByb3BlcnRpZXMgdG8gYSBjYW5kaWRhdGUsIHB1c2hlcyB0byB0aGUgY2FuZGlkYXRlcyBhcnJheVxuXHRcdCogQHJldHVybiB1bmRlZmluZWRcblx0XHQqL1xuXHRcdC8vIChEZWNsYXJlZCBvdXRzaWRlIG9mIHRoZSB3aGlsZSBsb29wIHNvIHRoYXQgaXQncyBvbmx5IGNyZWF0ZWQgb25jZS5cblx0XHQvLyAoVGhpcyBmbiBpcyBkZWZpbmVkIGJlZm9yZSBpdCBpcyB1c2VkLCBpbiBvcmRlciB0byBwYXNzIEpTSElOVC5cblx0XHQvLyBVbmZvcnR1bmF0ZWx5IHRoaXMgYnJlYWtzIHRoZSBzZXF1ZW5jaW5nIG9mIHRoZSBzcGVjIGNvbW1lbnRzLiA6LyApXG5cdFx0ZnVuY3Rpb24gcGFyc2VEZXNjcmlwdG9ycygpIHtcblxuXHRcdFx0Ly8gOS4gRGVzY3JpcHRvciBwYXJzZXI6IExldCBlcnJvciBiZSBuby5cblx0XHRcdHZhciBwRXJyb3IgPSBmYWxzZSxcblxuXHRcdFx0Ly8gMTAuIExldCB3aWR0aCBiZSBhYnNlbnQuXG5cdFx0XHQvLyAxMS4gTGV0IGRlbnNpdHkgYmUgYWJzZW50LlxuXHRcdFx0Ly8gMTIuIExldCBmdXR1cmUtY29tcGF0LWggYmUgYWJzZW50LiAoV2UncmUgaW1wbGVtZW50aW5nIGl0IG5vdyBhcyBoKVxuXHRcdFx0ICAgIHcsIGQsIGgsIGksXG5cdFx0XHQgICAgY2FuZGlkYXRlID0ge30sXG5cdFx0XHQgICAgZGVzYywgbGFzdENoYXIsIHZhbHVlLCBpbnRWYWwsIGZsb2F0VmFsO1xuXG5cdFx0XHQvLyAxMy4gRm9yIGVhY2ggZGVzY3JpcHRvciBpbiBkZXNjcmlwdG9ycywgcnVuIHRoZSBhcHByb3ByaWF0ZSBzZXQgb2Ygc3RlcHNcblx0XHRcdC8vIGZyb20gdGhlIGZvbGxvd2luZyBsaXN0OlxuXHRcdFx0Zm9yIChpID0gMCA7IGkgPCBkZXNjcmlwdG9ycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRkZXNjID0gZGVzY3JpcHRvcnNbIGkgXTtcblxuXHRcdFx0XHRsYXN0Q2hhciA9IGRlc2NbIGRlc2MubGVuZ3RoIC0gMSBdO1xuXHRcdFx0XHR2YWx1ZSA9IGRlc2Muc3Vic3RyaW5nKDAsIGRlc2MubGVuZ3RoIC0gMSk7XG5cdFx0XHRcdGludFZhbCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cdFx0XHRcdGZsb2F0VmFsID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGRlc2NyaXB0b3IgY29uc2lzdHMgb2YgYSB2YWxpZCBub24tbmVnYXRpdmUgaW50ZWdlciBmb2xsb3dlZCBieVxuXHRcdFx0XHQvLyBhIFUrMDA3NyBMQVRJTiBTTUFMTCBMRVRURVIgVyBjaGFyYWN0ZXJcblx0XHRcdFx0aWYgKHJlZ2V4Tm9uTmVnYXRpdmVJbnRlZ2VyLnRlc3QodmFsdWUpICYmIChsYXN0Q2hhciA9PT0gXCJ3XCIpKSB7XG5cblx0XHRcdFx0XHQvLyBJZiB3aWR0aCBhbmQgZGVuc2l0eSBhcmUgbm90IGJvdGggYWJzZW50LCB0aGVuIGxldCBlcnJvciBiZSB5ZXMuXG5cdFx0XHRcdFx0aWYgKHcgfHwgZCkge3BFcnJvciA9IHRydWU7fVxuXG5cdFx0XHRcdFx0Ly8gQXBwbHkgdGhlIHJ1bGVzIGZvciBwYXJzaW5nIG5vbi1uZWdhdGl2ZSBpbnRlZ2VycyB0byB0aGUgZGVzY3JpcHRvci5cblx0XHRcdFx0XHQvLyBJZiB0aGUgcmVzdWx0IGlzIHplcm8sIGxldCBlcnJvciBiZSB5ZXMuXG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBsZXQgd2lkdGggYmUgdGhlIHJlc3VsdC5cblx0XHRcdFx0XHRpZiAoaW50VmFsID09PSAwKSB7cEVycm9yID0gdHJ1ZTt9IGVsc2Uge3cgPSBpbnRWYWw7fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBkZXNjcmlwdG9yIGNvbnNpc3RzIG9mIGEgdmFsaWQgZmxvYXRpbmctcG9pbnQgbnVtYmVyIGZvbGxvd2VkIGJ5XG5cdFx0XHRcdC8vIGEgVSswMDc4IExBVElOIFNNQUxMIExFVFRFUiBYIGNoYXJhY3RlclxuXHRcdFx0XHR9IGVsc2UgaWYgKHJlZ2V4RmxvYXRpbmdQb2ludC50ZXN0KHZhbHVlKSAmJiAobGFzdENoYXIgPT09IFwieFwiKSkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgd2lkdGgsIGRlbnNpdHkgYW5kIGZ1dHVyZS1jb21wYXQtaCBhcmUgbm90IGFsbCBhYnNlbnQsIHRoZW4gbGV0IGVycm9yXG5cdFx0XHRcdFx0Ly8gYmUgeWVzLlxuXHRcdFx0XHRcdGlmICh3IHx8IGQgfHwgaCkge3BFcnJvciA9IHRydWU7fVxuXG5cdFx0XHRcdFx0Ly8gQXBwbHkgdGhlIHJ1bGVzIGZvciBwYXJzaW5nIGZsb2F0aW5nLXBvaW50IG51bWJlciB2YWx1ZXMgdG8gdGhlIGRlc2NyaXB0b3IuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlIHJlc3VsdCBpcyBsZXNzIHRoYW4gemVybywgbGV0IGVycm9yIGJlIHllcy4gT3RoZXJ3aXNlLCBsZXQgZGVuc2l0eVxuXHRcdFx0XHRcdC8vIGJlIHRoZSByZXN1bHQuXG5cdFx0XHRcdFx0aWYgKGZsb2F0VmFsIDwgMCkge3BFcnJvciA9IHRydWU7fSBlbHNlIHtkID0gZmxvYXRWYWw7fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBkZXNjcmlwdG9yIGNvbnNpc3RzIG9mIGEgdmFsaWQgbm9uLW5lZ2F0aXZlIGludGVnZXIgZm9sbG93ZWQgYnlcblx0XHRcdFx0Ly8gYSBVKzAwNjggTEFUSU4gU01BTEwgTEVUVEVSIEggY2hhcmFjdGVyXG5cdFx0XHRcdH0gZWxzZSBpZiAocmVnZXhOb25OZWdhdGl2ZUludGVnZXIudGVzdCh2YWx1ZSkgJiYgKGxhc3RDaGFyID09PSBcImhcIikpIHtcblxuXHRcdFx0XHRcdC8vIElmIGhlaWdodCBhbmQgZGVuc2l0eSBhcmUgbm90IGJvdGggYWJzZW50LCB0aGVuIGxldCBlcnJvciBiZSB5ZXMuXG5cdFx0XHRcdFx0aWYgKGggfHwgZCkge3BFcnJvciA9IHRydWU7fVxuXG5cdFx0XHRcdFx0Ly8gQXBwbHkgdGhlIHJ1bGVzIGZvciBwYXJzaW5nIG5vbi1uZWdhdGl2ZSBpbnRlZ2VycyB0byB0aGUgZGVzY3JpcHRvci5cblx0XHRcdFx0XHQvLyBJZiB0aGUgcmVzdWx0IGlzIHplcm8sIGxldCBlcnJvciBiZSB5ZXMuIE90aGVyd2lzZSwgbGV0IGZ1dHVyZS1jb21wYXQtaFxuXHRcdFx0XHRcdC8vIGJlIHRoZSByZXN1bHQuXG5cdFx0XHRcdFx0aWYgKGludFZhbCA9PT0gMCkge3BFcnJvciA9IHRydWU7fSBlbHNlIHtoID0gaW50VmFsO31cblxuXHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlLCBMZXQgZXJyb3IgYmUgeWVzLlxuXHRcdFx0XHR9IGVsc2Uge3BFcnJvciA9IHRydWU7fVxuXHRcdFx0fSAvLyAoY2xvc2Ugc3RlcCAxMyBmb3IgbG9vcClcblxuXHRcdFx0Ly8gMTUuIElmIGVycm9yIGlzIHN0aWxsIG5vLCB0aGVuIGFwcGVuZCBhIG5ldyBpbWFnZSBzb3VyY2UgdG8gY2FuZGlkYXRlcyB3aG9zZVxuXHRcdFx0Ly8gVVJMIGlzIHVybCwgYXNzb2NpYXRlZCB3aXRoIGEgd2lkdGggd2lkdGggaWYgbm90IGFic2VudCBhbmQgYSBwaXhlbFxuXHRcdFx0Ly8gZGVuc2l0eSBkZW5zaXR5IGlmIG5vdCBhYnNlbnQuIE90aGVyd2lzZSwgdGhlcmUgaXMgYSBwYXJzZSBlcnJvci5cblx0XHRcdGlmICghcEVycm9yKSB7XG5cdFx0XHRcdGNhbmRpZGF0ZS51cmwgPSB1cmw7XG5cblx0XHRcdFx0aWYgKHcpIHsgY2FuZGlkYXRlLncgPSB3O31cblx0XHRcdFx0aWYgKGQpIHsgY2FuZGlkYXRlLmQgPSBkO31cblx0XHRcdFx0aWYgKGgpIHsgY2FuZGlkYXRlLmggPSBoO31cblx0XHRcdFx0aWYgKCFoICYmICFkICYmICF3KSB7Y2FuZGlkYXRlLmQgPSAxO31cblx0XHRcdFx0aWYgKGNhbmRpZGF0ZS5kID09PSAxKSB7c2V0LmhhczF4ID0gdHJ1ZTt9XG5cdFx0XHRcdGNhbmRpZGF0ZS5zZXQgPSBzZXQ7XG5cblx0XHRcdFx0Y2FuZGlkYXRlcy5wdXNoKGNhbmRpZGF0ZSk7XG5cdFx0XHR9XG5cdFx0fSAvLyAoY2xvc2UgcGFyc2VEZXNjcmlwdG9ycyBmbilcblxuXHRcdC8qKlxuXHRcdCogVG9rZW5pemVzIGRlc2NyaXB0b3IgcHJvcGVydGllcyBwcmlvciB0byBwYXJzaW5nXG5cdFx0KiBSZXR1cm5zIHVuZGVmaW5lZC5cblx0XHQqIChBZ2FpbiwgdGhpcyBmbiBpcyBkZWZpbmVkIGJlZm9yZSBpdCBpcyB1c2VkLCBpbiBvcmRlciB0byBwYXNzIEpTSElOVC5cblx0XHQqIFVuZm9ydHVuYXRlbHkgdGhpcyBicmVha3MgdGhlIGxvZ2ljYWwgc2VxdWVuY2luZyBvZiB0aGUgc3BlYyBjb21tZW50cy4gOi8gKVxuXHRcdCovXG5cdFx0ZnVuY3Rpb24gdG9rZW5pemUoKSB7XG5cblx0XHRcdC8vIDguMS4gRGVzY3JpcHRvciB0b2tlbmlzZXI6IFNraXAgd2hpdGVzcGFjZVxuXHRcdFx0Y29sbGVjdENoYXJhY3RlcnMocmVnZXhMZWFkaW5nU3BhY2VzKTtcblxuXHRcdFx0Ly8gOC4yLiBMZXQgY3VycmVudCBkZXNjcmlwdG9yIGJlIHRoZSBlbXB0eSBzdHJpbmcuXG5cdFx0XHRjdXJyZW50RGVzY3JpcHRvciA9IFwiXCI7XG5cblx0XHRcdC8vIDguMy4gTGV0IHN0YXRlIGJlIGluIGRlc2NyaXB0b3IuXG5cdFx0XHRzdGF0ZSA9IFwiaW4gZGVzY3JpcHRvclwiO1xuXG5cdFx0XHR3aGlsZSAodHJ1ZSkge1xuXG5cdFx0XHRcdC8vIDguNC4gTGV0IGMgYmUgdGhlIGNoYXJhY3RlciBhdCBwb3NpdGlvbi5cblx0XHRcdFx0YyA9IGlucHV0LmNoYXJBdChwb3MpO1xuXG5cdFx0XHRcdC8vICBEbyB0aGUgZm9sbG93aW5nIGRlcGVuZGluZyBvbiB0aGUgdmFsdWUgb2Ygc3RhdGUuXG5cdFx0XHRcdC8vICBGb3IgdGhlIHB1cnBvc2Ugb2YgdGhpcyBzdGVwLCBcIkVPRlwiIGlzIGEgc3BlY2lhbCBjaGFyYWN0ZXIgcmVwcmVzZW50aW5nXG5cdFx0XHRcdC8vICB0aGF0IHBvc2l0aW9uIGlzIHBhc3QgdGhlIGVuZCBvZiBpbnB1dC5cblxuXHRcdFx0XHQvLyBJbiBkZXNjcmlwdG9yXG5cdFx0XHRcdGlmIChzdGF0ZSA9PT0gXCJpbiBkZXNjcmlwdG9yXCIpIHtcblx0XHRcdFx0XHQvLyBEbyB0aGUgZm9sbG93aW5nLCBkZXBlbmRpbmcgb24gdGhlIHZhbHVlIG9mIGM6XG5cblx0XHRcdFx0ICAvLyBTcGFjZSBjaGFyYWN0ZXJcblx0XHRcdFx0ICAvLyBJZiBjdXJyZW50IGRlc2NyaXB0b3IgaXMgbm90IGVtcHR5LCBhcHBlbmQgY3VycmVudCBkZXNjcmlwdG9yIHRvXG5cdFx0XHRcdCAgLy8gZGVzY3JpcHRvcnMgYW5kIGxldCBjdXJyZW50IGRlc2NyaXB0b3IgYmUgdGhlIGVtcHR5IHN0cmluZy5cblx0XHRcdFx0ICAvLyBTZXQgc3RhdGUgdG8gYWZ0ZXIgZGVzY3JpcHRvci5cblx0XHRcdFx0XHRpZiAoaXNTcGFjZShjKSkge1xuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnREZXNjcmlwdG9yKSB7XG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0b3JzLnB1c2goY3VycmVudERlc2NyaXB0b3IpO1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50RGVzY3JpcHRvciA9IFwiXCI7XG5cdFx0XHRcdFx0XHRcdHN0YXRlID0gXCJhZnRlciBkZXNjcmlwdG9yXCI7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBVKzAwMkMgQ09NTUEgKCwpXG5cdFx0XHRcdFx0Ly8gQWR2YW5jZSBwb3NpdGlvbiB0byB0aGUgbmV4dCBjaGFyYWN0ZXIgaW4gaW5wdXQuIElmIGN1cnJlbnQgZGVzY3JpcHRvclxuXHRcdFx0XHRcdC8vIGlzIG5vdCBlbXB0eSwgYXBwZW5kIGN1cnJlbnQgZGVzY3JpcHRvciB0byBkZXNjcmlwdG9ycy4gSnVtcCB0byB0aGUgc3RlcFxuXHRcdFx0XHRcdC8vIGxhYmVsZWQgZGVzY3JpcHRvciBwYXJzZXIuXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjID09PSBcIixcIikge1xuXHRcdFx0XHRcdFx0cG9zICs9IDE7XG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudERlc2NyaXB0b3IpIHtcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRvcnMucHVzaChjdXJyZW50RGVzY3JpcHRvcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRwYXJzZURlc2NyaXB0b3JzKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0XHQvLyBVKzAwMjggTEVGVCBQQVJFTlRIRVNJUyAoKClcblx0XHRcdFx0XHQvLyBBcHBlbmQgYyB0byBjdXJyZW50IGRlc2NyaXB0b3IuIFNldCBzdGF0ZSB0byBpbiBwYXJlbnMuXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjID09PSBcIlxcdTAwMjhcIikge1xuXHRcdFx0XHRcdFx0Y3VycmVudERlc2NyaXB0b3IgPSBjdXJyZW50RGVzY3JpcHRvciArIGM7XG5cdFx0XHRcdFx0XHRzdGF0ZSA9IFwiaW4gcGFyZW5zXCI7XG5cblx0XHRcdFx0XHQvLyBFT0Zcblx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IGRlc2NyaXB0b3IgaXMgbm90IGVtcHR5LCBhcHBlbmQgY3VycmVudCBkZXNjcmlwdG9yIHRvXG5cdFx0XHRcdFx0Ly8gZGVzY3JpcHRvcnMuIEp1bXAgdG8gdGhlIHN0ZXAgbGFiZWxlZCBkZXNjcmlwdG9yIHBhcnNlci5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKGMgPT09IFwiXCIpIHtcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50RGVzY3JpcHRvcikge1xuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdG9ycy5wdXNoKGN1cnJlbnREZXNjcmlwdG9yKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHBhcnNlRGVzY3JpcHRvcnMoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblxuXHRcdFx0XHRcdC8vIEFueXRoaW5nIGVsc2Vcblx0XHRcdFx0XHQvLyBBcHBlbmQgYyB0byBjdXJyZW50IGRlc2NyaXB0b3IuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGN1cnJlbnREZXNjcmlwdG9yID0gY3VycmVudERlc2NyaXB0b3IgKyBjO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0Ly8gKGVuZCBcImluIGRlc2NyaXB0b3JcIlxuXG5cdFx0XHRcdC8vIEluIHBhcmVuc1xuXHRcdFx0XHR9IGVsc2UgaWYgKHN0YXRlID09PSBcImluIHBhcmVuc1wiKSB7XG5cblx0XHRcdFx0XHQvLyBVKzAwMjkgUklHSFQgUEFSRU5USEVTSVMgKCkpXG5cdFx0XHRcdFx0Ly8gQXBwZW5kIGMgdG8gY3VycmVudCBkZXNjcmlwdG9yLiBTZXQgc3RhdGUgdG8gaW4gZGVzY3JpcHRvci5cblx0XHRcdFx0XHRpZiAoYyA9PT0gXCIpXCIpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnREZXNjcmlwdG9yID0gY3VycmVudERlc2NyaXB0b3IgKyBjO1xuXHRcdFx0XHRcdFx0c3RhdGUgPSBcImluIGRlc2NyaXB0b3JcIjtcblxuXHRcdFx0XHRcdC8vIEVPRlxuXHRcdFx0XHRcdC8vIEFwcGVuZCBjdXJyZW50IGRlc2NyaXB0b3IgdG8gZGVzY3JpcHRvcnMuIEp1bXAgdG8gdGhlIHN0ZXAgbGFiZWxlZFxuXHRcdFx0XHRcdC8vIGRlc2NyaXB0b3IgcGFyc2VyLlxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYyA9PT0gXCJcIikge1xuXHRcdFx0XHRcdFx0ZGVzY3JpcHRvcnMucHVzaChjdXJyZW50RGVzY3JpcHRvcik7XG5cdFx0XHRcdFx0XHRwYXJzZURlc2NyaXB0b3JzKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlXG5cdFx0XHRcdFx0Ly8gQXBwZW5kIGMgdG8gY3VycmVudCBkZXNjcmlwdG9yLlxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50RGVzY3JpcHRvciA9IGN1cnJlbnREZXNjcmlwdG9yICsgYztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQWZ0ZXIgZGVzY3JpcHRvclxuXHRcdFx0XHR9IGVsc2UgaWYgKHN0YXRlID09PSBcImFmdGVyIGRlc2NyaXB0b3JcIikge1xuXG5cdFx0XHRcdFx0Ly8gRG8gdGhlIGZvbGxvd2luZywgZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZSBvZiBjOlxuXHRcdFx0XHRcdC8vIFNwYWNlIGNoYXJhY3RlcjogU3RheSBpbiB0aGlzIHN0YXRlLlxuXHRcdFx0XHRcdGlmIChpc1NwYWNlKGMpKSB7XG5cblx0XHRcdFx0XHQvLyBFT0Y6IEp1bXAgdG8gdGhlIHN0ZXAgbGFiZWxlZCBkZXNjcmlwdG9yIHBhcnNlci5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKGMgPT09IFwiXCIpIHtcblx0XHRcdFx0XHRcdHBhcnNlRGVzY3JpcHRvcnMoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblxuXHRcdFx0XHRcdC8vIEFueXRoaW5nIGVsc2Vcblx0XHRcdFx0XHQvLyBTZXQgc3RhdGUgdG8gaW4gZGVzY3JpcHRvci4gU2V0IHBvc2l0aW9uIHRvIHRoZSBwcmV2aW91cyBjaGFyYWN0ZXIgaW4gaW5wdXQuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHN0YXRlID0gXCJpbiBkZXNjcmlwdG9yXCI7XG5cdFx0XHRcdFx0XHRwb3MgLT0gMTtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkdmFuY2UgcG9zaXRpb24gdG8gdGhlIG5leHQgY2hhcmFjdGVyIGluIGlucHV0LlxuXHRcdFx0XHRwb3MgKz0gMTtcblxuXHRcdFx0Ly8gUmVwZWF0IHRoaXMgc3RlcC5cblx0XHRcdH0gLy8gKGNsb3NlIHdoaWxlIHRydWUgbG9vcClcblx0XHR9XG5cblx0XHQvLyA0LiBTcGxpdHRpbmcgbG9vcDogQ29sbGVjdCBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgc3BhY2Vcblx0XHQvLyAgICBjaGFyYWN0ZXJzIG9yIFUrMDAyQyBDT01NQSBjaGFyYWN0ZXJzLiBJZiBhbnkgVSswMDJDIENPTU1BIGNoYXJhY3RlcnNcblx0XHQvLyAgICB3ZXJlIGNvbGxlY3RlZCwgdGhhdCBpcyBhIHBhcnNlIGVycm9yLlxuXHRcdHdoaWxlICh0cnVlKSB7XG5cdFx0XHRjb2xsZWN0Q2hhcmFjdGVycyhyZWdleExlYWRpbmdDb21tYXNPclNwYWNlcyk7XG5cblx0XHRcdC8vIDUuIElmIHBvc2l0aW9uIGlzIHBhc3QgdGhlIGVuZCBvZiBpbnB1dCwgcmV0dXJuIGNhbmRpZGF0ZXMgYW5kIGFib3J0IHRoZXNlIHN0ZXBzLlxuXHRcdFx0aWYgKHBvcyA+PSBpbnB1dExlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gY2FuZGlkYXRlczsgLy8gKHdlJ3JlIGRvbmUsIHRoaXMgaXMgdGhlIHNvbGUgcmV0dXJuIHBhdGgpXG5cdFx0XHR9XG5cblx0XHRcdC8vIDYuIENvbGxlY3QgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBzcGFjZSBjaGFyYWN0ZXJzLFxuXHRcdFx0Ly8gICAgYW5kIGxldCB0aGF0IGJlIHVybC5cblx0XHRcdHVybCA9IGNvbGxlY3RDaGFyYWN0ZXJzKHJlZ2V4TGVhZGluZ05vdFNwYWNlcyk7XG5cblx0XHRcdC8vIDcuIExldCBkZXNjcmlwdG9ycyBiZSBhIG5ldyBlbXB0eSBsaXN0LlxuXHRcdFx0ZGVzY3JpcHRvcnMgPSBbXTtcblxuXHRcdFx0Ly8gOC4gSWYgdXJsIGVuZHMgd2l0aCBhIFUrMDAyQyBDT01NQSBjaGFyYWN0ZXIgKCwpLCBmb2xsb3cgdGhlc2Ugc3Vic3RlcHM6XG5cdFx0XHQvL1x0XHQoMSkuIFJlbW92ZSBhbGwgdHJhaWxpbmcgVSswMDJDIENPTU1BIGNoYXJhY3RlcnMgZnJvbSB1cmwuIElmIHRoaXMgcmVtb3ZlZFxuXHRcdFx0Ly8gICAgICAgICBtb3JlIHRoYW4gb25lIGNoYXJhY3RlciwgdGhhdCBpcyBhIHBhcnNlIGVycm9yLlxuXHRcdFx0aWYgKHVybC5zbGljZSgtMSkgPT09IFwiLFwiKSB7XG5cdFx0XHRcdHVybCA9IHVybC5yZXBsYWNlKHJlZ2V4VHJhaWxpbmdDb21tYXMsIFwiXCIpO1xuXHRcdFx0XHQvLyAoSnVtcCBhaGVhZCB0byBzdGVwIDkgdG8gc2tpcCB0b2tlbml6YXRpb24gYW5kIGp1c3QgcHVzaCB0aGUgY2FuZGlkYXRlKS5cblx0XHRcdFx0cGFyc2VEZXNjcmlwdG9ycygpO1xuXG5cdFx0XHQvL1x0T3RoZXJ3aXNlLCBmb2xsb3cgdGhlc2Ugc3Vic3RlcHM6XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0b2tlbml6ZSgpO1xuXHRcdFx0fSAvLyAoY2xvc2UgZWxzZSBvZiBzdGVwIDgpXG5cblx0XHQvLyAxNi4gUmV0dXJuIHRvIHRoZSBzdGVwIGxhYmVsZWQgc3BsaXR0aW5nIGxvb3AuXG5cdFx0fSAvLyAoQ2xvc2Ugb2YgYmlnIHdoaWxlIGxvb3AuKVxuXHR9XG5cblx0Lypcblx0ICogU2l6ZXMgUGFyc2VyXG5cdCAqXG5cdCAqIEJ5IEFsZXggQmVsbCB8ICBNSVQgTGljZW5zZVxuXHQgKlxuXHQgKiBOb24tc3RyaWN0IGJ1dCBhY2N1cmF0ZSBhbmQgbGlnaHR3ZWlnaHQgSlMgUGFyc2VyIGZvciB0aGUgc3RyaW5nIHZhbHVlIDxpbWcgc2l6ZXM9XCJoZXJlXCI+XG5cdCAqXG5cdCAqIFJlZmVyZW5jZSBhbGdvcml0aG0gYXQ6XG5cdCAqIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCNwYXJzZS1hLXNpemVzLWF0dHJpYnV0ZVxuXHQgKlxuXHQgKiBNb3N0IGNvbW1lbnRzIGFyZSBjb3BpZWQgaW4gZGlyZWN0bHkgZnJvbSB0aGUgc3BlY1xuXHQgKiAoZXhjZXB0IGZvciBjb21tZW50cyBpbiBwYXJlbnMpLlxuXHQgKlxuXHQgKiBHcmFtbWFyIGlzOlxuXHQgKiA8c291cmNlLXNpemUtbGlzdD4gPSA8c291cmNlLXNpemU+IyBbICwgPHNvdXJjZS1zaXplLXZhbHVlPiBdPyB8IDxzb3VyY2Utc2l6ZS12YWx1ZT5cblx0ICogPHNvdXJjZS1zaXplPiA9IDxtZWRpYS1jb25kaXRpb24+IDxzb3VyY2Utc2l6ZS12YWx1ZT5cblx0ICogPHNvdXJjZS1zaXplLXZhbHVlPiA9IDxsZW5ndGg+XG5cdCAqIGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCNhdHRyLWltZy1zaXplc1xuXHQgKlxuXHQgKiBFLmcuIFwiKG1heC13aWR0aDogMzBlbSkgMTAwdncsIChtYXgtd2lkdGg6IDUwZW0pIDcwdncsIDEwMHZ3XCJcblx0ICogb3IgXCIobWluLXdpZHRoOiAzMGVtKSwgY2FsYygzMHZ3IC0gMTVweClcIiBvciBqdXN0IFwiMzB2d1wiXG5cdCAqXG5cdCAqIFJldHVybnMgdGhlIGZpcnN0IHZhbGlkIDxjc3MtbGVuZ3RoPiB3aXRoIGEgbWVkaWEgY29uZGl0aW9uIHRoYXQgZXZhbHVhdGVzIHRvIHRydWUsXG5cdCAqIG9yIFwiMTAwdndcIiBpZiBhbGwgdmFsaWQgbWVkaWEgY29uZGl0aW9ucyBldmFsdWF0ZSB0byBmYWxzZS5cblx0ICpcblx0ICovXG5cblx0ZnVuY3Rpb24gcGFyc2VTaXplcyhzdHJWYWx1ZSkge1xuXG5cdFx0Ly8gKFBlcmNlbnRhZ2UgQ1NTIGxlbmd0aHMgYXJlIG5vdCBhbGxvd2VkIGluIHRoaXMgY2FzZSwgdG8gYXZvaWQgY29uZnVzaW9uOlxuXHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2VtYmVkZGVkLWNvbnRlbnQuaHRtbCN2YWxpZC1zb3VyY2Utc2l6ZS1saXN0XG5cdFx0Ly8gQ1NTIGFsbG93cyBhIHNpbmdsZSBvcHRpb25hbCBwbHVzIG9yIG1pbnVzIHNpZ246XG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMi9zeW5kYXRhLmh0bWwjbnVtYmVyc1xuXHRcdC8vIENTUyBpcyBBU0NJSSBjYXNlLWluc2Vuc2l0aXZlOlxuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIvc3luZGF0YS5odG1sI2NoYXJhY3RlcnMgKVxuXHRcdC8vIFNwZWMgYWxsb3dzIGV4cG9uZW50aWFsIG5vdGF0aW9uIGZvciA8bnVtYmVyPiB0eXBlOlxuXHRcdC8vIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy12YWx1ZXMvI251bWJlcnNcblx0XHR2YXIgcmVnZXhDc3NMZW5ndGhXaXRoVW5pdHMgPSAvXig/OlsrLV0/WzAtOV0rfFswLTldKlxcLlswLTldKykoPzpbZUVdWystXT9bMC05XSspPyg/OmNofGNtfGVtfGV4fGlufG1tfHBjfHB0fHB4fHJlbXx2aHx2bWlufHZtYXh8dncpJC9pO1xuXG5cdFx0Ly8gKFRoaXMgaXMgYSBxdWljayBhbmQgbGVuaWVudCB0ZXN0LiBCZWNhdXNlIG9mIG9wdGlvbmFsIHVubGltaXRlZC1kZXB0aCBpbnRlcm5hbFxuXHRcdC8vIGdyb3VwaW5nIHBhcmVucyBhbmQgc3RyaWN0IHNwYWNpbmcgcnVsZXMsIHRoaXMgY291bGQgZ2V0IHZlcnkgY29tcGxpY2F0ZWQuKVxuXHRcdHZhciByZWdleENzc0NhbGMgPSAvXmNhbGNcXCgoPzpbMC05YS16IFxcLlxcK1xcLVxcKlxcL1xcKFxcKV0rKVxcKSQvaTtcblxuXHRcdHZhciBpO1xuXHRcdHZhciB1bnBhcnNlZFNpemVzTGlzdDtcblx0XHR2YXIgdW5wYXJzZWRTaXplc0xpc3RMZW5ndGg7XG5cdFx0dmFyIHVucGFyc2VkU2l6ZTtcblx0XHR2YXIgbGFzdENvbXBvbmVudFZhbHVlO1xuXHRcdHZhciBzaXplO1xuXG5cdFx0Ly8gVVRJTElUWSBGVU5DVElPTlNcblxuXHRcdC8vICAoVG95IENTUyBwYXJzZXIuIFRoZSBnb2FscyBoZXJlIGFyZTpcblx0XHQvLyAgMSkgZXhwYW5zaXZlIHRlc3QgY292ZXJhZ2Ugd2l0aG91dCB0aGUgd2VpZ2h0IG9mIGEgZnVsbCBDU1MgcGFyc2VyLlxuXHRcdC8vICAyKSBBdm9pZGluZyByZWdleCB3aGVyZXZlciBjb252ZW5pZW50LlxuXHRcdC8vICBRdWljayB0ZXN0czogaHR0cDovL2pzZmlkZGxlLm5ldC9ndG50TDRnci8zL1xuXHRcdC8vICBSZXR1cm5zIGFuIGFycmF5IG9mIGFycmF5cy4pXG5cdFx0ZnVuY3Rpb24gcGFyc2VDb21wb25lbnRWYWx1ZXMoc3RyKSB7XG5cdFx0XHR2YXIgY2hyY3RyO1xuXHRcdFx0dmFyIGNvbXBvbmVudCA9IFwiXCI7XG5cdFx0XHR2YXIgY29tcG9uZW50QXJyYXkgPSBbXTtcblx0XHRcdHZhciBsaXN0QXJyYXkgPSBbXTtcblx0XHRcdHZhciBwYXJlbkRlcHRoID0gMDtcblx0XHRcdHZhciBwb3MgPSAwO1xuXHRcdFx0dmFyIGluQ29tbWVudCA9IGZhbHNlO1xuXG5cdFx0XHRmdW5jdGlvbiBwdXNoQ29tcG9uZW50KCkge1xuXHRcdFx0XHRpZiAoY29tcG9uZW50KSB7XG5cdFx0XHRcdFx0Y29tcG9uZW50QXJyYXkucHVzaChjb21wb25lbnQpO1xuXHRcdFx0XHRcdGNvbXBvbmVudCA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gcHVzaENvbXBvbmVudEFycmF5KCkge1xuXHRcdFx0XHRpZiAoY29tcG9uZW50QXJyYXlbMF0pIHtcblx0XHRcdFx0XHRsaXN0QXJyYXkucHVzaChjb21wb25lbnRBcnJheSk7XG5cdFx0XHRcdFx0Y29tcG9uZW50QXJyYXkgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyAoTG9vcCBmb3J3YXJkcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZy4pXG5cdFx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0XHRjaHJjdHIgPSBzdHIuY2hhckF0KHBvcyk7XG5cblx0XHRcdFx0aWYgKGNocmN0ciA9PT0gXCJcIikgeyAvLyAoIEVuZCBvZiBzdHJpbmcgcmVhY2hlZC4pXG5cdFx0XHRcdFx0cHVzaENvbXBvbmVudCgpO1xuXHRcdFx0XHRcdHB1c2hDb21wb25lbnRBcnJheSgpO1xuXHRcdFx0XHRcdHJldHVybiBsaXN0QXJyYXk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaW5Db21tZW50KSB7XG5cdFx0XHRcdFx0aWYgKChjaHJjdHIgPT09IFwiKlwiKSAmJiAoc3RyW3BvcyArIDFdID09PSBcIi9cIikpIHsgLy8gKEF0IGVuZCBvZiBhIGNvbW1lbnQuKVxuXHRcdFx0XHRcdFx0aW5Db21tZW50ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRwb3MgKz0gMjtcblx0XHRcdFx0XHRcdHB1c2hDb21wb25lbnQoKTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRwb3MgKz0gMTsgLy8gKFNraXAgYWxsIGNoYXJhY3RlcnMgaW5zaWRlIGNvbW1lbnRzLilcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChpc1NwYWNlKGNocmN0cikpIHtcblx0XHRcdFx0XHQvLyAoSWYgcHJldmlvdXMgY2hhcmFjdGVyIGluIGxvb3Agd2FzIGFsc28gYSBzcGFjZSwgb3IgaWZcblx0XHRcdFx0XHQvLyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzdHJpbmcsIGRvIG5vdCBhZGQgc3BhY2UgY2hhciB0b1xuXHRcdFx0XHRcdC8vIGNvbXBvbmVudC4pXG5cdFx0XHRcdFx0aWYgKCAoc3RyLmNoYXJBdChwb3MgLSAxKSAmJiBpc1NwYWNlKCBzdHIuY2hhckF0KHBvcyAtIDEpICkgKSB8fCAhY29tcG9uZW50ICkge1xuXHRcdFx0XHRcdFx0cG9zICs9IDE7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHBhcmVuRGVwdGggPT09IDApIHtcblx0XHRcdFx0XHRcdHB1c2hDb21wb25lbnQoKTtcblx0XHRcdFx0XHRcdHBvcyArPTE7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gKFJlcGxhY2UgYW55IHNwYWNlIGNoYXJhY3RlciB3aXRoIGEgcGxhaW4gc3BhY2UgZm9yIGxlZ2liaWxpdHkuKVxuXHRcdFx0XHRcdFx0Y2hyY3RyID0gXCIgXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGNocmN0ciA9PT0gXCIoXCIpIHtcblx0XHRcdFx0XHRwYXJlbkRlcHRoICs9IDE7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2hyY3RyID09PSBcIilcIikge1xuXHRcdFx0XHRcdHBhcmVuRGVwdGggLT0gMTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaHJjdHIgPT09IFwiLFwiKSB7XG5cdFx0XHRcdFx0cHVzaENvbXBvbmVudCgpO1xuXHRcdFx0XHRcdHB1c2hDb21wb25lbnRBcnJheSgpO1xuXHRcdFx0XHRcdHBvcyArPSAxO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCAoY2hyY3RyID09PSBcIi9cIikgJiYgKHN0ci5jaGFyQXQocG9zICsgMSkgPT09IFwiKlwiKSApIHtcblx0XHRcdFx0XHRpbkNvbW1lbnQgPSB0cnVlO1xuXHRcdFx0XHRcdHBvcyArPSAyO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29tcG9uZW50ID0gY29tcG9uZW50ICsgY2hyY3RyO1xuXHRcdFx0XHRwb3MgKz0gMTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc1ZhbGlkTm9uTmVnYXRpdmVTb3VyY2VTaXplVmFsdWUocykge1xuXHRcdFx0aWYgKHJlZ2V4Q3NzTGVuZ3RoV2l0aFVuaXRzLnRlc3QocykgJiYgKHBhcnNlRmxvYXQocykgPj0gMCkpIHtyZXR1cm4gdHJ1ZTt9XG5cdFx0XHRpZiAocmVnZXhDc3NDYWxjLnRlc3QocykpIHtyZXR1cm4gdHJ1ZTt9XG5cdFx0XHQvLyAoIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIvc3luZGF0YS5odG1sI251bWJlcnMgc2F5czpcblx0XHRcdC8vIFwiLTAgaXMgZXF1aXZhbGVudCB0byAwIGFuZCBpcyBub3QgYSBuZWdhdGl2ZSBudW1iZXIuXCIgd2hpY2ggbWVhbnMgdGhhdFxuXHRcdFx0Ly8gdW5pdGxlc3MgemVybyBhbmQgdW5pdGxlc3MgbmVnYXRpdmUgemVybyBtdXN0IGJlIGFjY2VwdGVkIGFzIHNwZWNpYWwgY2FzZXMuKVxuXHRcdFx0aWYgKChzID09PSBcIjBcIikgfHwgKHMgPT09IFwiLTBcIikgfHwgKHMgPT09IFwiKzBcIikpIHtyZXR1cm4gdHJ1ZTt9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gV2hlbiBhc2tlZCB0byBwYXJzZSBhIHNpemVzIGF0dHJpYnV0ZSBmcm9tIGFuIGVsZW1lbnQsIHBhcnNlIGFcblx0XHQvLyBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBjb21wb25lbnQgdmFsdWVzIGZyb20gdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50J3Ncblx0XHQvLyBzaXplcyBhdHRyaWJ1dGUgKG9yIHRoZSBlbXB0eSBzdHJpbmcsIGlmIHRoZSBhdHRyaWJ1dGUgaXMgYWJzZW50KSwgYW5kIGxldFxuXHRcdC8vIHVucGFyc2VkIHNpemVzIGxpc3QgYmUgdGhlIHJlc3VsdC5cblx0XHQvLyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3Mtc3ludGF4LyNwYXJzZS1jb21tYS1zZXBhcmF0ZWQtbGlzdC1vZi1jb21wb25lbnQtdmFsdWVzXG5cblx0XHR1bnBhcnNlZFNpemVzTGlzdCA9IHBhcnNlQ29tcG9uZW50VmFsdWVzKHN0clZhbHVlKTtcblx0XHR1bnBhcnNlZFNpemVzTGlzdExlbmd0aCA9IHVucGFyc2VkU2l6ZXNMaXN0Lmxlbmd0aDtcblxuXHRcdC8vIEZvciBlYWNoIHVucGFyc2VkIHNpemUgaW4gdW5wYXJzZWQgc2l6ZXMgbGlzdDpcblx0XHRmb3IgKGkgPSAwOyBpIDwgdW5wYXJzZWRTaXplc0xpc3RMZW5ndGg7IGkrKykge1xuXHRcdFx0dW5wYXJzZWRTaXplID0gdW5wYXJzZWRTaXplc0xpc3RbaV07XG5cblx0XHRcdC8vIDEuIFJlbW92ZSBhbGwgY29uc2VjdXRpdmUgPHdoaXRlc3BhY2UtdG9rZW4+cyBmcm9tIHRoZSBlbmQgb2YgdW5wYXJzZWQgc2l6ZS5cblx0XHRcdC8vICggcGFyc2VDb21wb25lbnRWYWx1ZXMoKSBhbHJlYWR5IG9taXRzIHNwYWNlcyBvdXRzaWRlIG9mIHBhcmVucy4gKVxuXG5cdFx0XHQvLyBJZiB1bnBhcnNlZCBzaXplIGlzIG5vdyBlbXB0eSwgdGhhdCBpcyBhIHBhcnNlIGVycm9yOyBjb250aW51ZSB0byB0aGUgbmV4dFxuXHRcdFx0Ly8gaXRlcmF0aW9uIG9mIHRoaXMgYWxnb3JpdGhtLlxuXHRcdFx0Ly8gKCBwYXJzZUNvbXBvbmVudFZhbHVlcygpIHdvbid0IHB1c2ggYW4gZW1wdHkgYXJyYXkuIClcblxuXHRcdFx0Ly8gMi4gSWYgdGhlIGxhc3QgY29tcG9uZW50IHZhbHVlIGluIHVucGFyc2VkIHNpemUgaXMgYSB2YWxpZCBub24tbmVnYXRpdmVcblx0XHRcdC8vIDxzb3VyY2Utc2l6ZS12YWx1ZT4sIGxldCBzaXplIGJlIGl0cyB2YWx1ZSBhbmQgcmVtb3ZlIHRoZSBjb21wb25lbnQgdmFsdWVcblx0XHRcdC8vIGZyb20gdW5wYXJzZWQgc2l6ZS4gQW55IENTUyBmdW5jdGlvbiBvdGhlciB0aGFuIHRoZSBjYWxjKCkgZnVuY3Rpb24gaXNcblx0XHRcdC8vIGludmFsaWQuIE90aGVyd2lzZSwgdGhlcmUgaXMgYSBwYXJzZSBlcnJvcjsgY29udGludWUgdG8gdGhlIG5leHQgaXRlcmF0aW9uXG5cdFx0XHQvLyBvZiB0aGlzIGFsZ29yaXRobS5cblx0XHRcdC8vIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy1zeW50YXgvI3BhcnNlLWNvbXBvbmVudC12YWx1ZVxuXHRcdFx0bGFzdENvbXBvbmVudFZhbHVlID0gdW5wYXJzZWRTaXplW3VucGFyc2VkU2l6ZS5sZW5ndGggLSAxXTtcblxuXHRcdFx0aWYgKGlzVmFsaWROb25OZWdhdGl2ZVNvdXJjZVNpemVWYWx1ZShsYXN0Q29tcG9uZW50VmFsdWUpKSB7XG5cdFx0XHRcdHNpemUgPSBsYXN0Q29tcG9uZW50VmFsdWU7XG5cdFx0XHRcdHVucGFyc2VkU2l6ZS5wb3AoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyAzLiBSZW1vdmUgYWxsIGNvbnNlY3V0aXZlIDx3aGl0ZXNwYWNlLXRva2VuPnMgZnJvbSB0aGUgZW5kIG9mIHVucGFyc2VkXG5cdFx0XHQvLyBzaXplLiBJZiB1bnBhcnNlZCBzaXplIGlzIG5vdyBlbXB0eSwgcmV0dXJuIHNpemUgYW5kIGV4aXQgdGhpcyBhbGdvcml0aG0uXG5cdFx0XHQvLyBJZiB0aGlzIHdhcyBub3QgdGhlIGxhc3QgaXRlbSBpbiB1bnBhcnNlZCBzaXplcyBsaXN0LCB0aGF0IGlzIGEgcGFyc2UgZXJyb3IuXG5cdFx0XHRpZiAodW5wYXJzZWRTaXplLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRyZXR1cm4gc2l6ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gNC4gUGFyc2UgdGhlIHJlbWFpbmluZyBjb21wb25lbnQgdmFsdWVzIGluIHVucGFyc2VkIHNpemUgYXMgYVxuXHRcdFx0Ly8gPG1lZGlhLWNvbmRpdGlvbj4uIElmIGl0IGRvZXMgbm90IHBhcnNlIGNvcnJlY3RseSwgb3IgaXQgZG9lcyBwYXJzZVxuXHRcdFx0Ly8gY29ycmVjdGx5IGJ1dCB0aGUgPG1lZGlhLWNvbmRpdGlvbj4gZXZhbHVhdGVzIHRvIGZhbHNlLCBjb250aW51ZSB0byB0aGVcblx0XHRcdC8vIG5leHQgaXRlcmF0aW9uIG9mIHRoaXMgYWxnb3JpdGhtLlxuXHRcdFx0Ly8gKFBhcnNpbmcgYWxsIHBvc3NpYmxlIGNvbXBvdW5kIG1lZGlhIGNvbmRpdGlvbnMgaW4gSlMgaXMgaGVhdnksIGNvbXBsaWNhdGVkLFxuXHRcdFx0Ly8gYW5kIHRoZSBwYXlvZmYgaXMgdW5jbGVhci4gSXMgdGhlcmUgZXZlciBhbiBzaXR1YXRpb24gd2hlcmUgdGhlXG5cdFx0XHQvLyBtZWRpYSBjb25kaXRpb24gcGFyc2VzIGluY29ycmVjdGx5IGJ1dCBzdGlsbCBzb21laG93IGV2YWx1YXRlcyB0byB0cnVlP1xuXHRcdFx0Ly8gQ2FuIHdlIGp1c3QgcmVseSBvbiB0aGUgYnJvd3Nlci9wb2x5ZmlsbCB0byBkbyBpdD8pXG5cdFx0XHR1bnBhcnNlZFNpemUgPSB1bnBhcnNlZFNpemUuam9pbihcIiBcIik7XG5cdFx0XHRpZiAoIShwZi5tYXRjaGVzTWVkaWEoIHVucGFyc2VkU2l6ZSApICkgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyA1LiBSZXR1cm4gc2l6ZSBhbmQgZXhpdCB0aGlzIGFsZ29yaXRobS5cblx0XHRcdHJldHVybiBzaXplO1xuXHRcdH1cblxuXHRcdC8vIElmIHRoZSBhYm92ZSBhbGdvcml0aG0gZXhoYXVzdHMgdW5wYXJzZWQgc2l6ZXMgbGlzdCB3aXRob3V0IHJldHVybmluZyBhXG5cdFx0Ly8gc2l6ZSB2YWx1ZSwgcmV0dXJuIDEwMHZ3LlxuXHRcdHJldHVybiBcIjEwMHZ3XCI7XG5cdH1cblxuXHQvLyBuYW1lc3BhY2Vcblx0cGYubnMgPSAoXCJwZlwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkpLnN1YnN0cigwLCA5KTtcblxuXHQvLyBzcmNzZXQgc3VwcG9ydCB0ZXN0XG5cdHBmLnN1cFNyY3NldCA9IFwic3Jjc2V0XCIgaW4gaW1hZ2U7XG5cdHBmLnN1cFNpemVzID0gXCJzaXplc1wiIGluIGltYWdlO1xuXHRwZi5zdXBQaWN0dXJlID0gISF3aW5kb3cuSFRNTFBpY3R1cmVFbGVtZW50O1xuXG5cdC8vIFVDIGJyb3dzZXIgZG9lcyBjbGFpbSB0byBzdXBwb3J0IHNyY3NldCBhbmQgcGljdHVyZSwgYnV0IG5vdCBzaXplcyxcblx0Ly8gdGhpcyBleHRlbmRlZCB0ZXN0IHJldmVhbHMgdGhlIGJyb3dzZXIgZG9lcyBzdXBwb3J0IG5vdGhpbmdcblx0aWYgKHBmLnN1cFNyY3NldCAmJiBwZi5zdXBQaWN0dXJlICYmICFwZi5zdXBTaXplcykge1xuXHRcdChmdW5jdGlvbihpbWFnZTIpIHtcblx0XHRcdGltYWdlLnNyY3NldCA9IFwiZGF0YTosYVwiO1xuXHRcdFx0aW1hZ2UyLnNyYyA9IFwiZGF0YTosYVwiO1xuXHRcdFx0cGYuc3VwU3Jjc2V0ID0gaW1hZ2UuY29tcGxldGUgPT09IGltYWdlMi5jb21wbGV0ZTtcblx0XHRcdHBmLnN1cFBpY3R1cmUgPSBwZi5zdXBTcmNzZXQgJiYgcGYuc3VwUGljdHVyZTtcblx0XHR9KShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpKTtcblx0fVxuXG5cdC8vIFNhZmFyaTkgaGFzIGJhc2ljIHN1cHBvcnQgZm9yIHNpemVzLCBidXQgZG9lcyd0IGV4cG9zZSB0aGUgYHNpemVzYCBpZGwgYXR0cmlidXRlXG5cdGlmIChwZi5zdXBTcmNzZXQgJiYgIXBmLnN1cFNpemVzKSB7XG5cblx0XHQoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgd2lkdGgyID0gXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBZ0FCQVBBQUFQLy8vd0FBQUNINUJBQUFBQUFBTEFBQUFBQUNBQUVBQUFJQ0JBb0FPdz09XCI7XG5cdFx0XHR2YXIgd2lkdGgxID0gXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PVwiO1xuXHRcdFx0dmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cdFx0XHR2YXIgdGVzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgd2lkdGggPSBpbWcud2lkdGg7XG5cblx0XHRcdFx0aWYgKHdpZHRoID09PSAyKSB7XG5cdFx0XHRcdFx0cGYuc3VwU2l6ZXMgPSB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWx3YXlzQ2hlY2tXRGVzY3JpcHRvciA9IHBmLnN1cFNyY3NldCAmJiAhcGYuc3VwU2l6ZXM7XG5cblx0XHRcdFx0aXNTdXBwb3J0VGVzdFJlYWR5ID0gdHJ1ZTtcblx0XHRcdFx0Ly8gZm9yY2UgYXN5bmNcblx0XHRcdFx0c2V0VGltZW91dChwaWN0dXJlZmlsbCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRpbWcub25sb2FkID0gdGVzdDtcblx0XHRcdGltZy5vbmVycm9yID0gdGVzdDtcblx0XHRcdGltZy5zZXRBdHRyaWJ1dGUoXCJzaXplc1wiLCBcIjlweFwiKTtcblxuXHRcdFx0aW1nLnNyY3NldCA9IHdpZHRoMSArIFwiIDF3LFwiICsgd2lkdGgyICsgXCIgOXdcIjtcblx0XHRcdGltZy5zcmMgPSB3aWR0aDE7XG5cdFx0fSkoKTtcblxuXHR9IGVsc2Uge1xuXHRcdGlzU3VwcG9ydFRlc3RSZWFkeSA9IHRydWU7XG5cdH1cblxuXHQvLyB1c2luZyBwZi5xc2EgaW5zdGVhZCBvZiBkb20gdHJhdmVyc2luZyBkb2VzIHNjYWxlIG11Y2ggYmV0dGVyLFxuXHQvLyBlc3BlY2lhbGx5IG9uIHNpdGVzIG1peGluZyByZXNwb25zaXZlIGFuZCBub24tcmVzcG9uc2l2ZSBpbWFnZXNcblx0cGYuc2VsU2hvcnQgPSBcInBpY3R1cmU+aW1nLGltZ1tzcmNzZXRdXCI7XG5cdHBmLnNlbCA9IHBmLnNlbFNob3J0O1xuXHRwZi5jZmcgPSBjZmc7XG5cblx0LyoqXG5cdCAqIFNob3J0Y3V0IHByb3BlcnR5IGZvciBgZGV2aWNlUGl4ZWxSYXRpb2AgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcblx0ICovXG5cdHBmLkRQUiA9IChEUFIgIHx8IDEgKTtcblx0cGYudSA9IHVuaXRzO1xuXG5cdC8vIGNvbnRhaW5lciBvZiBzdXBwb3J0ZWQgbWltZSB0eXBlcyB0aGF0IG9uZSBtaWdodCBuZWVkIHRvIHF1YWxpZnkgYmVmb3JlIHVzaW5nXG5cdHBmLnR5cGVzID0gIHR5cGVzO1xuXG5cdHBmLnNldFNpemUgPSBub29wO1xuXG5cdC8qKlxuXHQgKiBHZXRzIGEgc3RyaW5nIGFuZCByZXR1cm5zIHRoZSBhYnNvbHV0ZSBVUkxcblx0ICogQHBhcmFtIHNyY1xuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBhYnNvbHV0ZSBVUkxcblx0ICovXG5cblx0cGYubWFrZVVybCA9IG1lbW9pemUoZnVuY3Rpb24oc3JjKSB7XG5cdFx0YW5jaG9yLmhyZWYgPSBzcmM7XG5cdFx0cmV0dXJuIGFuY2hvci5ocmVmO1xuXHR9KTtcblxuXHQvKipcblx0ICogR2V0cyBhIERPTSBlbGVtZW50IG9yIGRvY3VtZW50IGFuZCBhIHNlbGN0b3IgYW5kIHJldHVybnMgdGhlIGZvdW5kIG1hdGNoZXNcblx0ICogQ2FuIGJlIGV4dGVuZGVkIHdpdGggalF1ZXJ5L1NpenpsZSBmb3IgSUU3IHN1cHBvcnRcblx0ICogQHBhcmFtIGNvbnRleHRcblx0ICogQHBhcmFtIHNlbFxuXHQgKiBAcmV0dXJucyB7Tm9kZUxpc3R8QXJyYXl9XG5cdCAqL1xuXHRwZi5xc2EgPSBmdW5jdGlvbihjb250ZXh0LCBzZWwpIHtcblx0XHRyZXR1cm4gKCBcInF1ZXJ5U2VsZWN0b3JcIiBpbiBjb250ZXh0ICkgPyBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsKSA6IFtdO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBTaG9ydGN1dCBtZXRob2QgZm9yIG1hdGNoTWVkaWEgKCBmb3IgZWFzeSBvdmVycmlkaW5nIGluIHRlc3RzIClcblx0ICogd2V0aGVyIG5hdGl2ZSBvciBwZi5tTVEgaXMgdXNlZCB3aWxsIGJlIGRlY2lkZWQgbGF6eSBvbiBmaXJzdCBjYWxsXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cblx0cGYubWF0Y2hlc01lZGlhID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCB3aW5kb3cubWF0Y2hNZWRpYSAmJiAobWF0Y2hNZWRpYSggXCIobWluLXdpZHRoOiAwLjFlbSlcIiApIHx8IHt9KS5tYXRjaGVzICkge1xuXHRcdFx0cGYubWF0Y2hlc01lZGlhID0gZnVuY3Rpb24oIG1lZGlhICkge1xuXHRcdFx0XHRyZXR1cm4gIW1lZGlhIHx8ICggbWF0Y2hNZWRpYSggbWVkaWEgKS5tYXRjaGVzICk7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwZi5tYXRjaGVzTWVkaWEgPSBwZi5tTVE7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHBmLm1hdGNoZXNNZWRpYS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEEgc2ltcGxpZmllZCBtYXRjaE1lZGlhIGltcGxlbWVudGF0aW9uIGZvciBJRTggYW5kIElFOVxuXHQgKiBoYW5kbGVzIG9ubHkgbWluLXdpZHRoL21heC13aWR0aCB3aXRoIHB4IG9yIGVtIHZhbHVlc1xuXHQgKiBAcGFyYW0gbWVkaWFcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuXHRwZi5tTVEgPSBmdW5jdGlvbiggbWVkaWEgKSB7XG5cdFx0cmV0dXJuIG1lZGlhID8gZXZhbENTUyhtZWRpYSkgOiB0cnVlO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBjYWxjdWxhdGVkIGxlbmd0aCBpbiBjc3MgcGl4ZWwgZnJvbSB0aGUgZ2l2ZW4gc291cmNlU2l6ZVZhbHVlXG5cdCAqIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy12YWx1ZXMtMy8jbGVuZ3RoLXZhbHVlXG5cdCAqIGludGVuZGVkIFNwZWMgbWlzbWF0Y2hlczpcblx0ICogKiBEb2VzIG5vdCBjaGVjayBmb3IgaW52YWxpZCB1c2Ugb2YgQ1NTIGZ1bmN0aW9uc1xuXHQgKiAqIERvZXMgaGFuZGxlIGEgY29tcHV0ZWQgbGVuZ3RoIG9mIDAgdGhlIHNhbWUgYXMgYSBuZWdhdGl2ZSBhbmQgdGhlcmVmb3JlIGludmFsaWQgdmFsdWVcblx0ICogQHBhcmFtIHNvdXJjZVNpemVWYWx1ZVxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHQgKi9cblx0cGYuY2FsY0xlbmd0aCA9IGZ1bmN0aW9uKCBzb3VyY2VTaXplVmFsdWUgKSB7XG5cblx0XHR2YXIgdmFsdWUgPSBldmFsQ1NTKHNvdXJjZVNpemVWYWx1ZSwgdHJ1ZSkgfHwgZmFsc2U7XG5cdFx0aWYgKHZhbHVlIDwgMCkge1xuXHRcdFx0dmFsdWUgPSBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH07XG5cblx0LyoqXG5cdCAqIFRha2VzIGEgdHlwZSBzdHJpbmcgYW5kIGNoZWNrcyBpZiBpdHMgc3VwcG9ydGVkXG5cdCAqL1xuXG5cdHBmLnN1cHBvcnRzVHlwZSA9IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiAoIHR5cGUgKSA/IHR5cGVzWyB0eXBlIF0gOiB0cnVlO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBQYXJzZXMgYSBzb3VyY2VTaXplIGludG8gbWVkaWFDb25kaXRpb24gKG1lZGlhKSBhbmQgc291cmNlU2l6ZVZhbHVlIChsZW5ndGgpXG5cdCAqIEBwYXJhbSBzb3VyY2VTaXplU3RyXG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0cGYucGFyc2VTaXplID0gbWVtb2l6ZShmdW5jdGlvbiggc291cmNlU2l6ZVN0ciApIHtcblx0XHR2YXIgbWF0Y2ggPSAoIHNvdXJjZVNpemVTdHIgfHwgXCJcIiApLm1hdGNoKHJlZ1NpemUpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRtZWRpYTogbWF0Y2ggJiYgbWF0Y2hbMV0sXG5cdFx0XHRsZW5ndGg6IG1hdGNoICYmIG1hdGNoWzJdXG5cdFx0fTtcblx0fSk7XG5cblx0cGYucGFyc2VTZXQgPSBmdW5jdGlvbiggc2V0ICkge1xuXHRcdGlmICggIXNldC5jYW5kcyApIHtcblx0XHRcdHNldC5jYW5kcyA9IHBhcnNlU3Jjc2V0KHNldC5zcmNzZXQsIHNldCk7XG5cdFx0fVxuXHRcdHJldHVybiBzZXQuY2FuZHM7XG5cdH07XG5cblx0LyoqXG5cdCAqIHJldHVybnMgMWVtIGluIGNzcyBweCBmb3IgaHRtbC9ib2R5IGRlZmF1bHQgc2l6ZVxuXHQgKiBmdW5jdGlvbiB0YWtlbiBmcm9tIHJlc3BvbmRqc1xuXHQgKiBAcmV0dXJucyB7KnxudW1iZXJ9XG5cdCAqL1xuXHRwZi5nZXRFbVZhbHVlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGJvZHk7XG5cdFx0aWYgKCAhZW1pbnB4ICYmIChib2R5ID0gZG9jdW1lbnQuYm9keSkgKSB7XG5cdFx0XHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLFxuXHRcdFx0XHRvcmlnaW5hbEhUTUxDU1MgPSBkb2NFbGVtLnN0eWxlLmNzc1RleHQsXG5cdFx0XHRcdG9yaWdpbmFsQm9keUNTUyA9IGJvZHkuc3R5bGUuY3NzVGV4dDtcblxuXHRcdFx0ZGl2LnN0eWxlLmNzc1RleHQgPSBiYXNlU3R5bGU7XG5cblx0XHRcdC8vIDFlbSBpbiBhIG1lZGlhIHF1ZXJ5IGlzIHRoZSB2YWx1ZSBvZiB0aGUgZGVmYXVsdCBmb250IHNpemUgb2YgdGhlIGJyb3dzZXJcblx0XHRcdC8vIHJlc2V0IGRvY0VsZW0gYW5kIGJvZHkgdG8gZW5zdXJlIHRoZSBjb3JyZWN0IHZhbHVlIGlzIHJldHVybmVkXG5cdFx0XHRkb2NFbGVtLnN0eWxlLmNzc1RleHQgPSBmc0Nzcztcblx0XHRcdGJvZHkuc3R5bGUuY3NzVGV4dCA9IGZzQ3NzO1xuXG5cdFx0XHRib2R5LmFwcGVuZENoaWxkKCBkaXYgKTtcblx0XHRcdGVtaW5weCA9IGRpdi5vZmZzZXRXaWR0aDtcblx0XHRcdGJvZHkucmVtb3ZlQ2hpbGQoIGRpdiApO1xuXG5cdFx0XHQvL2Fsc28gdXBkYXRlIGVtaW5weCBiZWZvcmUgcmV0dXJuaW5nXG5cdFx0XHRlbWlucHggPSBwYXJzZUZsb2F0KCBlbWlucHgsIDEwICk7XG5cblx0XHRcdC8vIHJlc3RvcmUgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0ZG9jRWxlbS5zdHlsZS5jc3NUZXh0ID0gb3JpZ2luYWxIVE1MQ1NTO1xuXHRcdFx0Ym9keS5zdHlsZS5jc3NUZXh0ID0gb3JpZ2luYWxCb2R5Q1NTO1xuXG5cdFx0fVxuXHRcdHJldHVybiBlbWlucHggfHwgMTY7XG5cdH07XG5cblx0LyoqXG5cdCAqIFRha2VzIGEgc3RyaW5nIG9mIHNpemVzIGFuZCByZXR1cm5zIHRoZSB3aWR0aCBpbiBwaXhlbHMgYXMgYSBudW1iZXJcblx0ICovXG5cdHBmLmNhbGNMaXN0TGVuZ3RoID0gZnVuY3Rpb24oIHNvdXJjZVNpemVMaXN0U3RyICkge1xuXHRcdC8vIFNwbGl0IHVwIHNvdXJjZSBzaXplIGxpc3QsIGllICggbWF4LXdpZHRoOiAzMGVtICkgMTAwJSwgKCBtYXgtd2lkdGg6IDUwZW0gKSA1MCUsIDMzJVxuXHRcdC8vXG5cdFx0Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICBvciAobWluLXdpZHRoOjMwZW0pIGNhbGMoMzAlIC0gMTVweClcblx0XHRpZiAoICEoc291cmNlU2l6ZUxpc3RTdHIgaW4gc2l6ZUxlbmd0aENhY2hlKSB8fCBjZmcudVQgKSB7XG5cdFx0XHR2YXIgd2lubmluZ0xlbmd0aCA9IHBmLmNhbGNMZW5ndGgoIHBhcnNlU2l6ZXMoIHNvdXJjZVNpemVMaXN0U3RyICkgKTtcblxuXHRcdFx0c2l6ZUxlbmd0aENhY2hlWyBzb3VyY2VTaXplTGlzdFN0ciBdID0gIXdpbm5pbmdMZW5ndGggPyB1bml0cy53aWR0aCA6IHdpbm5pbmdMZW5ndGg7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNpemVMZW5ndGhDYWNoZVsgc291cmNlU2l6ZUxpc3RTdHIgXTtcblx0fTtcblxuXHQvKipcblx0ICogVGFrZXMgYSBjYW5kaWRhdGUgb2JqZWN0IHdpdGggYSBzcmNzZXQgcHJvcGVydHkgaW4gdGhlIGZvcm0gb2YgdXJsL1xuXHQgKiBleC4gXCJpbWFnZXMvcGljLW1lZGl1bS5wbmcgMXgsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyAyeFwiIG9yXG5cdCAqICAgICBcImltYWdlcy9waWMtbWVkaXVtLnBuZyA0MDB3LCBpbWFnZXMvcGljLW1lZGl1bS0yeC5wbmcgODAwd1wiIG9yXG5cdCAqICAgICBcImltYWdlcy9waWMtc21hbGwucG5nXCJcblx0ICogR2V0IGFuIGFycmF5IG9mIGltYWdlIGNhbmRpZGF0ZXMgaW4gdGhlIGZvcm0gb2Zcblx0ICogICAgICB7dXJsOiBcIi9mb28vYmFyLnBuZ1wiLCByZXNvbHV0aW9uOiAxfVxuXHQgKiB3aGVyZSByZXNvbHV0aW9uIGlzIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy12YWx1ZXMtMy8jcmVzb2x1dGlvbi12YWx1ZVxuXHQgKiBJZiBzaXplcyBpcyBzcGVjaWZpZWQsIHJlcyBpcyBjYWxjdWxhdGVkXG5cdCAqL1xuXHRwZi5zZXRSZXMgPSBmdW5jdGlvbiggc2V0ICkge1xuXHRcdHZhciBjYW5kaWRhdGVzO1xuXHRcdGlmICggc2V0ICkge1xuXG5cdFx0XHRjYW5kaWRhdGVzID0gcGYucGFyc2VTZXQoIHNldCApO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSA9IDAsIGxlbiA9IGNhbmRpZGF0ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdHNldFJlc29sdXRpb24oIGNhbmRpZGF0ZXNbIGkgXSwgc2V0LnNpemVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBjYW5kaWRhdGVzO1xuXHR9O1xuXG5cdHBmLnNldFJlcy5yZXMgPSBzZXRSZXNvbHV0aW9uO1xuXG5cdHBmLmFwcGx5U2V0Q2FuZGlkYXRlID0gZnVuY3Rpb24oIGNhbmRpZGF0ZXMsIGltZyApIHtcblx0XHRpZiAoICFjYW5kaWRhdGVzLmxlbmd0aCApIHtyZXR1cm47fVxuXHRcdHZhciBjYW5kaWRhdGUsXG5cdFx0XHRpLFxuXHRcdFx0aixcblx0XHRcdGxlbmd0aCxcblx0XHRcdGJlc3RDYW5kaWRhdGUsXG5cdFx0XHRjdXJTcmMsXG5cdFx0XHRjdXJDYW4sXG5cdFx0XHRjYW5kaWRhdGVTcmMsXG5cdFx0XHRhYm9ydEN1clNyYztcblxuXHRcdHZhciBpbWFnZURhdGEgPSBpbWdbIHBmLm5zIF07XG5cdFx0dmFyIGRwciA9IHBmLkRQUjtcblxuXHRcdGN1clNyYyA9IGltYWdlRGF0YS5jdXJTcmMgfHwgaW1nW2N1clNyY1Byb3BdO1xuXG5cdFx0Y3VyQ2FuID0gaW1hZ2VEYXRhLmN1ckNhbiB8fCBzZXRTcmNUb0N1cihpbWcsIGN1clNyYywgY2FuZGlkYXRlc1swXS5zZXQpO1xuXG5cdFx0Ly8gaWYgd2UgaGF2ZSBhIGN1cnJlbnQgc291cmNlLCB3ZSBtaWdodCBlaXRoZXIgYmVjb21lIGxhenkgb3IgZ2l2ZSB0aGlzIHNvdXJjZSBzb21lIGFkdmFudGFnZVxuXHRcdGlmICggY3VyQ2FuICYmIGN1ckNhbi5zZXQgPT09IGNhbmRpZGF0ZXNbIDAgXS5zZXQgKSB7XG5cblx0XHRcdC8vIGlmIGJyb3dzZXIgY2FuIGFib3J0IGltYWdlIHJlcXVlc3QgYW5kIHRoZSBpbWFnZSBoYXMgYSBoaWdoZXIgcGl4ZWwgZGVuc2l0eSB0aGFuIG5lZWRlZFxuXHRcdFx0Ly8gYW5kIHRoaXMgaW1hZ2UgaXNuJ3QgZG93bmxvYWRlZCB5ZXQsIHdlIHNraXAgbmV4dCBwYXJ0IGFuZCB0cnkgdG8gc2F2ZSBiYW5kd2lkdGhcblx0XHRcdGFib3J0Q3VyU3JjID0gKHN1cHBvcnRBYm9ydCAmJiAhaW1nLmNvbXBsZXRlICYmIGN1ckNhbi5yZXMgLSAwLjEgPiBkcHIpO1xuXG5cdFx0XHRpZiAoICFhYm9ydEN1clNyYyApIHtcblx0XHRcdFx0Y3VyQ2FuLmNhY2hlZCA9IHRydWU7XG5cblx0XHRcdFx0Ly8gaWYgY3VycmVudCBjYW5kaWRhdGUgaXMgXCJiZXN0XCIsIFwiYmV0dGVyXCIgb3IgXCJva2F5XCIsXG5cdFx0XHRcdC8vIHNldCBpdCB0byBiZXN0Q2FuZGlkYXRlXG5cdFx0XHRcdGlmICggY3VyQ2FuLnJlcyA+PSBkcHIgKSB7XG5cdFx0XHRcdFx0YmVzdENhbmRpZGF0ZSA9IGN1ckNhbjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggIWJlc3RDYW5kaWRhdGUgKSB7XG5cblx0XHRcdGNhbmRpZGF0ZXMuc29ydCggYXNjZW5kaW5nU29ydCApO1xuXG5cdFx0XHRsZW5ndGggPSBjYW5kaWRhdGVzLmxlbmd0aDtcblx0XHRcdGJlc3RDYW5kaWRhdGUgPSBjYW5kaWRhdGVzWyBsZW5ndGggLSAxIF07XG5cblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcblx0XHRcdFx0aWYgKCBjYW5kaWRhdGUucmVzID49IGRwciApIHtcblx0XHRcdFx0XHRqID0gaSAtIDE7XG5cblx0XHRcdFx0XHQvLyB3ZSBoYXZlIGZvdW5kIHRoZSBwZXJmZWN0IGNhbmRpZGF0ZSxcblx0XHRcdFx0XHQvLyBidXQgbGV0J3MgaW1wcm92ZSB0aGlzIGEgbGl0dGxlIGJpdCB3aXRoIHNvbWUgYXNzdW1wdGlvbnMgOy0pXG5cdFx0XHRcdFx0aWYgKGNhbmRpZGF0ZXNbIGogXSAmJlxuXHRcdFx0XHRcdFx0KGFib3J0Q3VyU3JjIHx8IGN1clNyYyAhPT0gcGYubWFrZVVybCggY2FuZGlkYXRlLnVybCApKSAmJlxuXHRcdFx0XHRcdFx0Y2hvb3NlTG93UmVzKGNhbmRpZGF0ZXNbIGogXS5yZXMsIGNhbmRpZGF0ZS5yZXMsIGRwciwgY2FuZGlkYXRlc1sgaiBdLmNhY2hlZCkpIHtcblxuXHRcdFx0XHRcdFx0YmVzdENhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGogXTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggYmVzdENhbmRpZGF0ZSApIHtcblxuXHRcdFx0Y2FuZGlkYXRlU3JjID0gcGYubWFrZVVybCggYmVzdENhbmRpZGF0ZS51cmwgKTtcblxuXHRcdFx0aW1hZ2VEYXRhLmN1clNyYyA9IGNhbmRpZGF0ZVNyYztcblx0XHRcdGltYWdlRGF0YS5jdXJDYW4gPSBiZXN0Q2FuZGlkYXRlO1xuXG5cdFx0XHRpZiAoIGNhbmRpZGF0ZVNyYyAhPT0gY3VyU3JjICkge1xuXHRcdFx0XHRwZi5zZXRTcmMoIGltZywgYmVzdENhbmRpZGF0ZSApO1xuXHRcdFx0fVxuXHRcdFx0cGYuc2V0U2l6ZSggaW1nICk7XG5cdFx0fVxuXHR9O1xuXG5cdHBmLnNldFNyYyA9IGZ1bmN0aW9uKCBpbWcsIGJlc3RDYW5kaWRhdGUgKSB7XG5cdFx0dmFyIG9yaWdXaWR0aDtcblx0XHRpbWcuc3JjID0gYmVzdENhbmRpZGF0ZS51cmw7XG5cblx0XHQvLyBhbHRob3VnaCB0aGlzIGlzIGEgc3BlY2lmaWMgU2FmYXJpIGlzc3VlLCB3ZSBkb24ndCB3YW50IHRvIHRha2UgdG9vIG11Y2ggZGlmZmVyZW50IGNvZGUgcGF0aHNcblx0XHRpZiAoIGJlc3RDYW5kaWRhdGUuc2V0LnR5cGUgPT09IFwiaW1hZ2Uvc3ZnK3htbFwiICkge1xuXHRcdFx0b3JpZ1dpZHRoID0gaW1nLnN0eWxlLndpZHRoO1xuXHRcdFx0aW1nLnN0eWxlLndpZHRoID0gKGltZy5vZmZzZXRXaWR0aCArIDEpICsgXCJweFwiO1xuXG5cdFx0XHQvLyBuZXh0IGxpbmUgb25seSBzaG91bGQgdHJpZ2dlciBhIHJlcGFpbnRcblx0XHRcdC8vIGlmLi4uIGlzIG9ubHkgZG9uZSB0byB0cmljayBkZWFkIGNvZGUgcmVtb3ZhbFxuXHRcdFx0aWYgKCBpbWcub2Zmc2V0V2lkdGggKyAxICkge1xuXHRcdFx0XHRpbWcuc3R5bGUud2lkdGggPSBvcmlnV2lkdGg7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHBmLmdldFNldCA9IGZ1bmN0aW9uKCBpbWcgKSB7XG5cdFx0dmFyIGksIHNldCwgc3VwcG9ydHNUeXBlO1xuXHRcdHZhciBtYXRjaCA9IGZhbHNlO1xuXHRcdHZhciBzZXRzID0gaW1nIFsgcGYubnMgXS5zZXRzO1xuXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBzZXRzLmxlbmd0aCAmJiAhbWF0Y2g7IGkrKyApIHtcblx0XHRcdHNldCA9IHNldHNbaV07XG5cblx0XHRcdGlmICggIXNldC5zcmNzZXQgfHwgIXBmLm1hdGNoZXNNZWRpYSggc2V0Lm1lZGlhICkgfHwgIShzdXBwb3J0c1R5cGUgPSBwZi5zdXBwb3J0c1R5cGUoIHNldC50eXBlICkpICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBzdXBwb3J0c1R5cGUgPT09IFwicGVuZGluZ1wiICkge1xuXHRcdFx0XHRzZXQgPSBzdXBwb3J0c1R5cGU7XG5cdFx0XHR9XG5cblx0XHRcdG1hdGNoID0gc2V0O1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoO1xuXHR9O1xuXG5cdHBmLnBhcnNlU2V0cyA9IGZ1bmN0aW9uKCBlbGVtZW50LCBwYXJlbnQsIG9wdGlvbnMgKSB7XG5cdFx0dmFyIHNyY3NldEF0dHJpYnV0ZSwgaW1hZ2VTZXQsIGlzV0Rlc2NyaXBvciwgc3Jjc2V0UGFyc2VkO1xuXG5cdFx0dmFyIGhhc1BpY3R1cmUgPSBwYXJlbnQgJiYgcGFyZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUElDVFVSRVwiO1xuXHRcdHZhciBpbWFnZURhdGEgPSBlbGVtZW50WyBwZi5ucyBdO1xuXG5cdFx0aWYgKCBpbWFnZURhdGEuc3JjID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5zcmMgKSB7XG5cdFx0XHRpbWFnZURhdGEuc3JjID0gZ2V0SW1nQXR0ci5jYWxsKCBlbGVtZW50LCBcInNyY1wiICk7XG5cdFx0XHRpZiAoIGltYWdlRGF0YS5zcmMgKSB7XG5cdFx0XHRcdHNldEltZ0F0dHIuY2FsbCggZWxlbWVudCwgc3JjQXR0ciwgaW1hZ2VEYXRhLnNyYyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3ZlSW1nQXR0ci5jYWxsKCBlbGVtZW50LCBzcmNBdHRyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBpbWFnZURhdGEuc3Jjc2V0ID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5zcmNzZXQgfHwgIXBmLnN1cFNyY3NldCB8fCBlbGVtZW50LnNyY3NldCApIHtcblx0XHRcdHNyY3NldEF0dHJpYnV0ZSA9IGdldEltZ0F0dHIuY2FsbCggZWxlbWVudCwgXCJzcmNzZXRcIiApO1xuXHRcdFx0aW1hZ2VEYXRhLnNyY3NldCA9IHNyY3NldEF0dHJpYnV0ZTtcblx0XHRcdHNyY3NldFBhcnNlZCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aW1hZ2VEYXRhLnNldHMgPSBbXTtcblxuXHRcdGlmICggaGFzUGljdHVyZSApIHtcblx0XHRcdGltYWdlRGF0YS5waWMgPSB0cnVlO1xuXHRcdFx0Z2V0QWxsU291cmNlRWxlbWVudHMoIHBhcmVudCwgaW1hZ2VEYXRhLnNldHMgKTtcblx0XHR9XG5cblx0XHRpZiAoIGltYWdlRGF0YS5zcmNzZXQgKSB7XG5cdFx0XHRpbWFnZVNldCA9IHtcblx0XHRcdFx0c3Jjc2V0OiBpbWFnZURhdGEuc3Jjc2V0LFxuXHRcdFx0XHRzaXplczogZ2V0SW1nQXR0ci5jYWxsKCBlbGVtZW50LCBcInNpemVzXCIgKVxuXHRcdFx0fTtcblxuXHRcdFx0aW1hZ2VEYXRhLnNldHMucHVzaCggaW1hZ2VTZXQgKTtcblxuXHRcdFx0aXNXRGVzY3JpcG9yID0gKGFsd2F5c0NoZWNrV0Rlc2NyaXB0b3IgfHwgaW1hZ2VEYXRhLnNyYykgJiYgcmVnV0Rlc2MudGVzdChpbWFnZURhdGEuc3Jjc2V0IHx8IFwiXCIpO1xuXG5cdFx0XHQvLyBhZGQgbm9ybWFsIHNyYyBhcyBjYW5kaWRhdGUsIGlmIHNvdXJjZSBoYXMgbm8gdyBkZXNjcmlwdG9yXG5cdFx0XHRpZiAoICFpc1dEZXNjcmlwb3IgJiYgaW1hZ2VEYXRhLnNyYyAmJiAhZ2V0Q2FuZGlkYXRlRm9yU3JjKGltYWdlRGF0YS5zcmMsIGltYWdlU2V0KSAmJiAhaW1hZ2VTZXQuaGFzMXggKSB7XG5cdFx0XHRcdGltYWdlU2V0LnNyY3NldCArPSBcIiwgXCIgKyBpbWFnZURhdGEuc3JjO1xuXHRcdFx0XHRpbWFnZVNldC5jYW5kcy5wdXNoKHtcblx0XHRcdFx0XHR1cmw6IGltYWdlRGF0YS5zcmMsXG5cdFx0XHRcdFx0ZDogMSxcblx0XHRcdFx0XHRzZXQ6IGltYWdlU2V0XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIGlmICggaW1hZ2VEYXRhLnNyYyApIHtcblx0XHRcdGltYWdlRGF0YS5zZXRzLnB1c2goIHtcblx0XHRcdFx0c3Jjc2V0OiBpbWFnZURhdGEuc3JjLFxuXHRcdFx0XHRzaXplczogbnVsbFxuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdGltYWdlRGF0YS5jdXJDYW4gPSBudWxsO1xuXHRcdGltYWdlRGF0YS5jdXJTcmMgPSB1bmRlZmluZWQ7XG5cblx0XHQvLyBpZiBpbWcgaGFzIHBpY3R1cmUgb3IgdGhlIHNyY3NldCB3YXMgcmVtb3ZlZCBvciBoYXMgYSBzcmNzZXQgYW5kIGRvZXMgbm90IHN1cHBvcnQgc3Jjc2V0IGF0IGFsbFxuXHRcdC8vIG9yIGhhcyBhIHcgZGVzY3JpcHRvciAoYW5kIGRvZXMgbm90IHN1cHBvcnQgc2l6ZXMpIHNldCBzdXBwb3J0IHRvIGZhbHNlIHRvIGV2YWx1YXRlXG5cdFx0aW1hZ2VEYXRhLnN1cHBvcnRlZCA9ICEoIGhhc1BpY3R1cmUgfHwgKCBpbWFnZVNldCAmJiAhcGYuc3VwU3Jjc2V0ICkgfHwgKGlzV0Rlc2NyaXBvciAmJiAhcGYuc3VwU2l6ZXMpICk7XG5cblx0XHRpZiAoIHNyY3NldFBhcnNlZCAmJiBwZi5zdXBTcmNzZXQgJiYgIWltYWdlRGF0YS5zdXBwb3J0ZWQgKSB7XG5cdFx0XHRpZiAoIHNyY3NldEF0dHJpYnV0ZSApIHtcblx0XHRcdFx0c2V0SW1nQXR0ci5jYWxsKCBlbGVtZW50LCBzcmNzZXRBdHRyLCBzcmNzZXRBdHRyaWJ1dGUgKTtcblx0XHRcdFx0ZWxlbWVudC5zcmNzZXQgPSBcIlwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3ZlSW1nQXR0ci5jYWxsKCBlbGVtZW50LCBzcmNzZXRBdHRyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGltYWdlRGF0YS5zdXBwb3J0ZWQgJiYgIWltYWdlRGF0YS5zcmNzZXQgJiYgKCghaW1hZ2VEYXRhLnNyYyAmJiBlbGVtZW50LnNyYykgfHwgIGVsZW1lbnQuc3JjICE9PSBwZi5tYWtlVXJsKGltYWdlRGF0YS5zcmMpKSkge1xuXHRcdFx0aWYgKGltYWdlRGF0YS5zcmMgPT09IG51bGwpIHtcblx0XHRcdFx0ZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtZW50LnNyYyA9IGltYWdlRGF0YS5zcmM7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aW1hZ2VEYXRhLnBhcnNlZCA9IHRydWU7XG5cdH07XG5cblx0cGYuZmlsbEltZyA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0XHR2YXIgaW1hZ2VEYXRhO1xuXHRcdHZhciBleHRyZW1lID0gb3B0aW9ucy5yZXNlbGVjdCB8fCBvcHRpb25zLnJlZXZhbHVhdGU7XG5cblx0XHQvLyBleHBhbmRvIGZvciBjYWNoaW5nIGRhdGEgb24gdGhlIGltZ1xuXHRcdGlmICggIWVsZW1lbnRbIHBmLm5zIF0gKSB7XG5cdFx0XHRlbGVtZW50WyBwZi5ucyBdID0ge307XG5cdFx0fVxuXG5cdFx0aW1hZ2VEYXRhID0gZWxlbWVudFsgcGYubnMgXTtcblxuXHRcdC8vIGlmIHRoZSBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkLCBza2lwIGl0XG5cdFx0Ly8gdW5sZXNzIGBvcHRpb25zLnJlZXZhbHVhdGVgIGlzIHNldCB0byB0cnVlICggdGhpcywgZm9yIGV4YW1wbGUsXG5cdFx0Ly8gaXMgc2V0IHRvIHRydWUgd2hlbiBydW5uaW5nIGBwaWN0dXJlZmlsbGAgb24gYHJlc2l6ZWAgKS5cblx0XHRpZiAoICFleHRyZW1lICYmIGltYWdlRGF0YS5ldmFsZWQgPT09IGV2YWxJZCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoICFpbWFnZURhdGEucGFyc2VkIHx8IG9wdGlvbnMucmVldmFsdWF0ZSApIHtcblx0XHRcdHBmLnBhcnNlU2V0cyggZWxlbWVudCwgZWxlbWVudC5wYXJlbnROb2RlLCBvcHRpb25zICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhaW1hZ2VEYXRhLnN1cHBvcnRlZCApIHtcblx0XHRcdGFwcGx5QmVzdENhbmRpZGF0ZSggZWxlbWVudCApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbWFnZURhdGEuZXZhbGVkID0gZXZhbElkO1xuXHRcdH1cblx0fTtcblxuXHRwZi5zZXR1cFJ1biA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIWFscmVhZHlSdW4gfHwgaXNWd0RpcnR5IHx8IChEUFIgIT09IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSApIHtcblx0XHRcdHVwZGF0ZU1ldHJpY3MoKTtcblx0XHR9XG5cdH07XG5cblx0Ly8gSWYgcGljdHVyZSBpcyBzdXBwb3J0ZWQsIHdlbGwsIHRoYXQncyBhd2Vzb21lLlxuXHRpZiAoIHBmLnN1cFBpY3R1cmUgKSB7XG5cdFx0cGljdHVyZWZpbGwgPSBub29wO1xuXHRcdHBmLmZpbGxJbWcgPSBub29wO1xuXHR9IGVsc2Uge1xuXG5cdFx0IC8vIFNldCB1cCBwaWN0dXJlIHBvbHlmaWxsIGJ5IHBvbGxpbmcgdGhlIGRvY3VtZW50XG5cdFx0KGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGlzRG9tUmVhZHk7XG5cdFx0XHR2YXIgcmVnUmVhZHkgPSB3aW5kb3cuYXR0YWNoRXZlbnQgPyAvZCR8XmMvIDogL2QkfF5jfF5pLztcblxuXHRcdFx0dmFyIHJ1biA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgcmVhZHlTdGF0ZSA9IGRvY3VtZW50LnJlYWR5U3RhdGUgfHwgXCJcIjtcblxuXHRcdFx0XHR0aW1lcklkID0gc2V0VGltZW91dChydW4sIHJlYWR5U3RhdGUgPT09IFwibG9hZGluZ1wiID8gMjAwIDogIDk5OSk7XG5cdFx0XHRcdGlmICggZG9jdW1lbnQuYm9keSApIHtcblx0XHRcdFx0XHRwZi5maWxsSW1ncygpO1xuXHRcdFx0XHRcdGlzRG9tUmVhZHkgPSBpc0RvbVJlYWR5IHx8IHJlZ1JlYWR5LnRlc3QocmVhZHlTdGF0ZSk7XG5cdFx0XHRcdFx0aWYgKCBpc0RvbVJlYWR5ICkge1xuXHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lcklkICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdHZhciB0aW1lcklkID0gc2V0VGltZW91dChydW4sIGRvY3VtZW50LmJvZHkgPyA5IDogOTkpO1xuXG5cdFx0XHQvLyBBbHNvIGF0dGFjaCBwaWN0dXJlZmlsbCBvbiByZXNpemUgYW5kIHJlYWR5c3RhdGVjaGFuZ2Vcblx0XHRcdC8vIGh0dHA6Ly9tb2Rlcm5qYXZhc2NyaXB0LmJsb2dzcG90LmNvbS8yMDEzLzA4L2J1aWxkaW5nLWJldHRlci1kZWJvdW5jZS5odG1sXG5cdFx0XHR2YXIgZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG5cdFx0XHRcdHZhciB0aW1lb3V0LCB0aW1lc3RhbXA7XG5cdFx0XHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBsYXN0ID0gKG5ldyBEYXRlKCkpIC0gdGltZXN0YW1wO1xuXG5cdFx0XHRcdFx0aWYgKGxhc3QgPCB3YWl0KSB7XG5cdFx0XHRcdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdFx0XHRcdGZ1bmMoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdFx0XHRpZiAoIXRpbWVvdXQpIHtcblx0XHRcdFx0XHRcdHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdFx0dmFyIGxhc3RDbGllbnRXaWR0aCA9IGRvY0VsZW0uY2xpZW50SGVpZ2h0O1xuXHRcdFx0dmFyIG9uUmVzaXplID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlzVndEaXJ0eSA9IE1hdGgubWF4KHdpbmRvdy5pbm5lcldpZHRoIHx8IDAsIGRvY0VsZW0uY2xpZW50V2lkdGgpICE9PSB1bml0cy53aWR0aCB8fCBkb2NFbGVtLmNsaWVudEhlaWdodCAhPT0gbGFzdENsaWVudFdpZHRoO1xuXHRcdFx0XHRsYXN0Q2xpZW50V2lkdGggPSBkb2NFbGVtLmNsaWVudEhlaWdodDtcblx0XHRcdFx0aWYgKCBpc1Z3RGlydHkgKSB7XG5cdFx0XHRcdFx0cGYuZmlsbEltZ3MoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0b24oIHdpbmRvdywgXCJyZXNpemVcIiwgZGVib3VuY2Uob25SZXNpemUsIDk5ICkgKTtcblx0XHRcdG9uKCBkb2N1bWVudCwgXCJyZWFkeXN0YXRlY2hhbmdlXCIsIHJ1biApO1xuXHRcdH0pKCk7XG5cdH1cblxuXHRwZi5waWN0dXJlZmlsbCA9IHBpY3R1cmVmaWxsO1xuXHQvL3VzZSB0aGlzIGludGVybmFsbHkgZm9yIGVhc3kgbW9ua2V5IHBhdGNoaW5nL3BlcmZvcm1hbmNlIHRlc3Rpbmdcblx0cGYuZmlsbEltZ3MgPSBwaWN0dXJlZmlsbDtcblx0cGYudGVhcmRvd25SdW4gPSBub29wO1xuXG5cdC8qIGV4cG9zZSBtZXRob2RzIGZvciB0ZXN0aW5nICovXG5cdHBpY3R1cmVmaWxsLl8gPSBwZjtcblxuXHR3aW5kb3cucGljdHVyZWZpbGxDRkcgPSB7XG5cdFx0cGY6IHBmLFxuXHRcdHB1c2g6IGZ1bmN0aW9uKGFyZ3MpIHtcblx0XHRcdHZhciBuYW1lID0gYXJncy5zaGlmdCgpO1xuXHRcdFx0aWYgKHR5cGVvZiBwZltuYW1lXSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdHBmW25hbWVdLmFwcGx5KHBmLCBhcmdzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNmZ1tuYW1lXSA9IGFyZ3NbMF07XG5cdFx0XHRcdGlmIChhbHJlYWR5UnVuKSB7XG5cdFx0XHRcdFx0cGYuZmlsbEltZ3MoIHsgcmVzZWxlY3Q6IHRydWUgfSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHdoaWxlIChzZXRPcHRpb25zICYmIHNldE9wdGlvbnMubGVuZ3RoKSB7XG5cdFx0d2luZG93LnBpY3R1cmVmaWxsQ0ZHLnB1c2goc2V0T3B0aW9ucy5zaGlmdCgpKTtcblx0fVxuXG5cdC8qIGV4cG9zZSBwaWN0dXJlZmlsbCAqL1xuXHR3aW5kb3cucGljdHVyZWZpbGwgPSBwaWN0dXJlZmlsbDtcblxuXHQvKiBleHBvc2UgcGljdHVyZWZpbGwgKi9cblx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHQvLyBDb21tb25KUywganVzdCBleHBvcnRcblx0XHRtb2R1bGUuZXhwb3J0cyA9IHBpY3R1cmVmaWxsO1xuXHR9IGVsc2UgaWYgKCB0cnVlICkge1xuXHRcdC8vIEFNRCBzdXBwb3J0XG5cdFx0IShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gcGljdHVyZWZpbGw7IH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdH1cblxuXHQvLyBJRTggZXZhbHMgdGhpcyBzeW5jLCBzbyBpdCBtdXN0IGJlIHRoZSBsYXN0IHRoaW5nIHdlIGRvXG5cdGlmICggIXBmLnN1cFBpY3R1cmUgKSB7XG5cdFx0dHlwZXNbIFwiaW1hZ2Uvd2VicFwiIF0gPSBkZXRlY3RUeXBlU3VwcG9ydChcImltYWdlL3dlYnBcIiwgXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSa29BQUFCWFJVSlFWbEE0V0FvQUFBQVFBQUFBQUFBQUFBQUFRVXhRU0F3QUFBQUJCeEFSL1E5RVJQOERBQUJXVURnZ0dBQUFBREFCQUowQktnRUFBUUFEQURRbHBBQURjQUQrKy8xUUFBPT1cIiApO1xuXHR9XG5cbn0gKSggd2luZG93LCBkb2N1bWVudCApO1xuXG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgbWFwID0ge1xuXHRcIi4vaW5kZXhcIjogMCxcblx0XCIuL2luZGV4LmpzXCI6IDBcbn07XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18od2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkpO1xufTtcbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0dmFyIGlkID0gbWFwW3JlcV07XG5cdGlmKCEoaWQgKyAxKSkgLy8gY2hlY2sgZm9yIG51bWJlciBvciBzdHJpbmdcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInLlwiKTtcblx0cmV0dXJuIGlkO1xufTtcbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSA0O1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2J1bmRsZS5taW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDk3NDQwZmZhOTc1ZTE4ODU4ODE0IiwiLypcclxuICBodHRwczovL2dpdGh1Yi5jb20vdmlnZXRsYWJzL2JsZW5kaWQvYmxvYi9tYXN0ZXIvc3JjL2phdmFzY3JpcHRzL21vZHVsZXMvaW5kZXguanNcclxuICBBdXRvbWF0aWNhbGx5IGluc3RhbnRpYXRlcyBtb2R1bGVzIGJhc2VkIG9uIGRhdGEtYXR0cmlidXRlc1xyXG4gIHNwZWNpZnlpbmcgbW9kdWxlIGZpbGUtbmFtZXMuXHJcbiovXHJcblxyXG5jb25zdCBtb2R1bGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZHVsZV0nKVxyXG5cclxuZm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGVFbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gIGNvbnN0IGVsID0gbW9kdWxlRWxlbWVudHNbaV1cclxuICBjb25zdCBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW1vZHVsZScpXHJcbiAgY29uc3QgTW9kdWxlID0gcmVxdWlyZShgLi8ke25hbWV9YCkuZGVmYXVsdFxyXG4gIG5ldyBNb2R1bGUoZWwpXHJcbn1cclxuXHJcbi8qXHJcbiAgVXNhZ2U6XHJcbiAgPT09PT09XHJcbiAgaHRtbFxyXG4gIC0tLS1cclxuICA8YnV0dG9uIGRhdGEtbW9kdWxlPVwiZGlzYXBwZWFyXCI+ZGlzYXBwZWFyITwvYnV0dG9uPlxyXG4gIGpzXHJcbiAgLS1cclxuICAvLyBtb2R1bGVzL2Rpc2FwcGVhci5qc1xyXG4gIGV4cG9ydCBkZWZhdWx0IGNsYXNzIERpc2FwcGVhciB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbCkge1xyXG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICB9XHJcbiAgfVxyXG4qL1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21vZHVsZXMvaW5kZXguanMiLCJjb25zdCBwaWN0dXJlZmlsbCA9IHJlcXVpcmUoXCJwaWN0dXJlZmlsbFwiKTsgXHJcbmltcG9ydCAnLi9tb2R1bGVzJ1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jb21wb25lbnQuanMiLCIvKiEgcGljdHVyZWZpbGwgLSB2My4wLjIgLSAyMDE2LTAyLTEyXG4gKiBodHRwczovL3Njb3R0amVobC5naXRodWIuaW8vcGljdHVyZWZpbGwvXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9waWN0dXJlZmlsbC9ibG9iL21hc3Rlci9BdXRob3JzLnR4dDsgTGljZW5zZWQgTUlUXG4gKi9cbi8qISBHZWNrby1QaWN0dXJlIC0gdjEuMFxuICogaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9waWN0dXJlZmlsbC90cmVlLzMuMC9zcmMvcGx1Z2lucy9nZWNrby1waWN0dXJlXG4gKiBGaXJlZm94J3MgZWFybHkgcGljdHVyZSBpbXBsZW1lbnRhdGlvbiAocHJpb3IgdG8gRkY0MSkgaXMgc3RhdGljIGFuZCBkb2VzXG4gKiBub3QgcmVhY3QgdG8gdmlld3BvcnQgY2hhbmdlcy4gVGhpcyB0aW55IG1vZHVsZSBmaXhlcyB0aGlzLlxuICovXG4oZnVuY3Rpb24od2luZG93KSB7XG5cdC8qanNoaW50IGVxbnVsbDp0cnVlICovXG5cdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cblx0aWYgKCB3aW5kb3cuSFRNTFBpY3R1cmVFbGVtZW50ICYmICgoL2Vja28vKS50ZXN0KHVhKSAmJiB1YS5tYXRjaCgvcnZcXDooXFxkKykvKSAmJiBSZWdFeHAuJDEgPCA0NSkgKSB7XG5cdFx0YWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdGltZXI7XG5cblx0XHRcdHZhciBkdW1teVNyYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XG5cblx0XHRcdHZhciBmaXhSZXNwaW1nID0gZnVuY3Rpb24oaW1nKSB7XG5cdFx0XHRcdHZhciBzb3VyY2UsIHNpemVzO1xuXHRcdFx0XHR2YXIgcGljdHVyZSA9IGltZy5wYXJlbnROb2RlO1xuXG5cdFx0XHRcdGlmIChwaWN0dXJlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUElDVFVSRVwiKSB7XG5cdFx0XHRcdFx0c291cmNlID0gZHVtbXlTcmMuY2xvbmVOb2RlKCk7XG5cblx0XHRcdFx0XHRwaWN0dXJlLmluc2VydEJlZm9yZShzb3VyY2UsIHBpY3R1cmUuZmlyc3RFbGVtZW50Q2hpbGQpO1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRwaWN0dXJlLnJlbW92ZUNoaWxkKHNvdXJjZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIWltZy5fcGZMYXN0U2l6ZSB8fCBpbWcub2Zmc2V0V2lkdGggPiBpbWcuX3BmTGFzdFNpemUpIHtcblx0XHRcdFx0XHRpbWcuX3BmTGFzdFNpemUgPSBpbWcub2Zmc2V0V2lkdGg7XG5cdFx0XHRcdFx0c2l6ZXMgPSBpbWcuc2l6ZXM7XG5cdFx0XHRcdFx0aW1nLnNpemVzICs9IFwiLDEwMHZ3XCI7XG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGltZy5zaXplcyA9IHNpemVzO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHR2YXIgZmluZFBpY3R1cmVJbWdzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBpO1xuXHRcdFx0XHR2YXIgaW1ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJwaWN0dXJlID4gaW1nLCBpbWdbc3Jjc2V0XVtzaXplc11cIik7XG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBpbWdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0Zml4UmVzcGltZyhpbWdzW2ldKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHZhciBvblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZXIpO1xuXHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoZmluZFBpY3R1cmVJbWdzLCA5OSk7XG5cdFx0XHR9O1xuXHRcdFx0dmFyIG1xID0gd2luZG93Lm1hdGNoTWVkaWEgJiYgbWF0Y2hNZWRpYShcIihvcmllbnRhdGlvbjogbGFuZHNjYXBlKVwiKTtcblx0XHRcdHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG9uUmVzaXplKCk7XG5cblx0XHRcdFx0aWYgKG1xICYmIG1xLmFkZExpc3RlbmVyKSB7XG5cdFx0XHRcdFx0bXEuYWRkTGlzdGVuZXIob25SZXNpemUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRkdW1teVNyYy5zcmNzZXQgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCI7XG5cblx0XHRcdGlmICgvXltjfGldfGQkLy50ZXN0KGRvY3VtZW50LnJlYWR5U3RhdGUgfHwgXCJcIikpIHtcblx0XHRcdFx0aW5pdCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdCk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBvblJlc2l6ZTtcblx0XHR9KSgpKTtcblx0fVxufSkod2luZG93KTtcblxuLyohIFBpY3R1cmVmaWxsIC0gdjMuMC4yXG4gKiBodHRwOi8vc2NvdHRqZWhsLmdpdGh1Yi5pby9waWN0dXJlZmlsbFxuICogQ29weXJpZ2h0IChjKSAyMDE1IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvcGljdHVyZWZpbGwvYmxvYi9tYXN0ZXIvQXV0aG9ycy50eHQ7XG4gKiAgTGljZW5zZTogTUlUXG4gKi9cblxuKGZ1bmN0aW9uKCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQgKSB7XG5cdC8vIEVuYWJsZSBzdHJpY3QgbW9kZVxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHQvLyBIVE1MIHNoaW18diBpdCBmb3Igb2xkIElFIChJRTkgd2lsbCBzdGlsbCBuZWVkIHRoZSBIVE1MIHZpZGVvIHRhZyB3b3JrYXJvdW5kKVxuXHRkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInBpY3R1cmVcIiApO1xuXG5cdHZhciB3YXJuLCBlbWlucHgsIGFsd2F5c0NoZWNrV0Rlc2NyaXB0b3IsIGV2YWxJZDtcblx0Ly8gbG9jYWwgb2JqZWN0IGZvciBtZXRob2QgcmVmZXJlbmNlcyBhbmQgdGVzdGluZyBleHBvc3VyZVxuXHR2YXIgcGYgPSB7fTtcblx0dmFyIGlzU3VwcG9ydFRlc3RSZWFkeSA9IGZhbHNlO1xuXHR2YXIgbm9vcCA9IGZ1bmN0aW9uKCkge307XG5cdHZhciBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW1nXCIgKTtcblx0dmFyIGdldEltZ0F0dHIgPSBpbWFnZS5nZXRBdHRyaWJ1dGU7XG5cdHZhciBzZXRJbWdBdHRyID0gaW1hZ2Uuc2V0QXR0cmlidXRlO1xuXHR2YXIgcmVtb3ZlSW1nQXR0ciA9IGltYWdlLnJlbW92ZUF0dHJpYnV0ZTtcblx0dmFyIGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdHZhciB0eXBlcyA9IHt9O1xuXHR2YXIgY2ZnID0ge1xuXHRcdC8vcmVzb3VyY2Ugc2VsZWN0aW9uOlxuXHRcdGFsZ29yaXRobTogXCJcIlxuXHR9O1xuXHR2YXIgc3JjQXR0ciA9IFwiZGF0YS1wZnNyY1wiO1xuXHR2YXIgc3Jjc2V0QXR0ciA9IHNyY0F0dHIgKyBcInNldFwiO1xuXHQvLyB1YSBzbmlmZmluZyBpcyBkb25lIGZvciB1bmRldGVjdGFibGUgaW1nIGxvYWRpbmcgZmVhdHVyZXMsXG5cdC8vIHRvIGRvIHNvbWUgbm9uIGNydWNpYWwgcGVyZiBvcHRpbWl6YXRpb25zXG5cdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cdHZhciBzdXBwb3J0QWJvcnQgPSAoL3JpZGVudC8pLnRlc3QodWEpIHx8ICgoL2Vja28vKS50ZXN0KHVhKSAmJiB1YS5tYXRjaCgvcnZcXDooXFxkKykvKSAmJiBSZWdFeHAuJDEgPiAzNSApO1xuXHR2YXIgY3VyU3JjUHJvcCA9IFwiY3VycmVudFNyY1wiO1xuXHR2YXIgcmVnV0Rlc2MgPSAvXFxzK1xcKz9cXGQrKGVcXGQrKT93Lztcblx0dmFyIHJlZ1NpemUgPSAvKFxcKFteKV0rXFwpKT9cXHMqKC4rKS87XG5cdHZhciBzZXRPcHRpb25zID0gd2luZG93LnBpY3R1cmVmaWxsQ0ZHO1xuXHQvKipcblx0ICogU2hvcnRjdXQgcHJvcGVydHkgZm9yIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJhcHBzZWMvc3BlY3MvbWl4ZWRjb250ZW50LyNyZXN0cmljdHMtbWl4ZWQtY29udGVudCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxuXHQgKi9cblx0Ly8gYmFzZVN0eWxlIGFsc28gdXNlZCBieSBnZXRFbVZhbHVlIChpLmUuOiB3aWR0aDogMWVtIGlzIGltcG9ydGFudClcblx0dmFyIGJhc2VTdHlsZSA9IFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3Zpc2liaWxpdHk6aGlkZGVuO2Rpc3BsYXk6YmxvY2s7cGFkZGluZzowO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxZW07d2lkdGg6MWVtO292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMHB4LCAwcHgsIDBweCwgMHB4KVwiO1xuXHR2YXIgZnNDc3MgPSBcImZvbnQtc2l6ZToxMDAlIWltcG9ydGFudDtcIjtcblx0dmFyIGlzVndEaXJ0eSA9IHRydWU7XG5cblx0dmFyIGNzc0NhY2hlID0ge307XG5cdHZhciBzaXplTGVuZ3RoQ2FjaGUgPSB7fTtcblx0dmFyIERQUiA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuXHR2YXIgdW5pdHMgPSB7XG5cdFx0cHg6IDEsXG5cdFx0XCJpblwiOiA5NlxuXHR9O1xuXHR2YXIgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblx0LyoqXG5cdCAqIGFscmVhZHlSdW4gZmxhZyB1c2VkIGZvciBzZXRPcHRpb25zLiBpcyBpdCB0cnVlIHNldE9wdGlvbnMgd2lsbCByZWV2YWx1YXRlXG5cdCAqIEB0eXBlIHtib29sZWFufVxuXHQgKi9cblx0dmFyIGFscmVhZHlSdW4gPSBmYWxzZTtcblxuXHQvLyBSZXVzYWJsZSwgbm9uLVwiZ1wiIFJlZ2V4ZXNcblxuXHQvLyAoRG9uJ3QgdXNlIFxccywgdG8gYXZvaWQgbWF0Y2hpbmcgbm9uLWJyZWFraW5nIHNwYWNlLilcblx0dmFyIHJlZ2V4TGVhZGluZ1NwYWNlcyA9IC9eWyBcXHRcXG5cXHJcXHUwMDBjXSsvLFxuXHQgICAgcmVnZXhMZWFkaW5nQ29tbWFzT3JTcGFjZXMgPSAvXlssIFxcdFxcblxcclxcdTAwMGNdKy8sXG5cdCAgICByZWdleExlYWRpbmdOb3RTcGFjZXMgPSAvXlteIFxcdFxcblxcclxcdTAwMGNdKy8sXG5cdCAgICByZWdleFRyYWlsaW5nQ29tbWFzID0gL1ssXSskLyxcblx0ICAgIHJlZ2V4Tm9uTmVnYXRpdmVJbnRlZ2VyID0gL15cXGQrJC8sXG5cblx0ICAgIC8vICggUG9zaXRpdmUgb3IgbmVnYXRpdmUgb3IgdW5zaWduZWQgaW50ZWdlcnMgb3IgZGVjaW1hbHMsIHdpdGhvdXQgb3Igd2l0aG91dCBleHBvbmVudHMuXG5cdCAgICAvLyBNdXN0IGluY2x1ZGUgYXQgbGVhc3Qgb25lIGRpZ2l0LlxuXHQgICAgLy8gQWNjb3JkaW5nIHRvIHNwZWMgdGVzdHMgYW55IGRlY2ltYWwgcG9pbnQgbXVzdCBiZSBmb2xsb3dlZCBieSBhIGRpZ2l0LlxuXHQgICAgLy8gTm8gbGVhZGluZyBwbHVzIHNpZ24gaXMgYWxsb3dlZC4pXG5cdCAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmZyYXN0cnVjdHVyZS5odG1sI3ZhbGlkLWZsb2F0aW5nLXBvaW50LW51bWJlclxuXHQgICAgcmVnZXhGbG9hdGluZ1BvaW50ID0gL14tPyg/OlswLTldK3xbMC05XSpcXC5bMC05XSspKD86W2VFXVsrLV0/WzAtOV0rKT8kLztcblxuXHR2YXIgb24gPSBmdW5jdGlvbihvYmosIGV2dCwgZm4sIGNhcHR1cmUpIHtcblx0XHRpZiAoIG9iai5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0b2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZ0LCBmbiwgY2FwdHVyZSB8fCBmYWxzZSk7XG5cdFx0fSBlbHNlIGlmICggb2JqLmF0dGFjaEV2ZW50ICkge1xuXHRcdFx0b2JqLmF0dGFjaEV2ZW50KCBcIm9uXCIgKyBldnQsIGZuKTtcblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIHNpbXBsZSBtZW1vaXplIGZ1bmN0aW9uOlxuXHQgKi9cblxuXHR2YXIgbWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XG5cdFx0dmFyIGNhY2hlID0ge307XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG5cdFx0XHRpZiAoICEoaW5wdXQgaW4gY2FjaGUpICkge1xuXHRcdFx0XHRjYWNoZVsgaW5wdXQgXSA9IGZuKGlucHV0KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBjYWNoZVsgaW5wdXQgXTtcblx0XHR9O1xuXHR9O1xuXG5cdC8vIFVUSUxJVFkgRlVOQ1RJT05TXG5cblx0Ly8gTWFudWFsIGlzIGZhc3RlciB0aGFuIFJlZ0V4XG5cdC8vIGh0dHA6Ly9qc3BlcmYuY29tL3doaXRlc3BhY2UtY2hhcmFjdGVyLzVcblx0ZnVuY3Rpb24gaXNTcGFjZShjKSB7XG5cdFx0cmV0dXJuIChjID09PSBcIlxcdTAwMjBcIiB8fCAvLyBzcGFjZVxuXHRcdCAgICAgICAgYyA9PT0gXCJcXHUwMDA5XCIgfHwgLy8gaG9yaXpvbnRhbCB0YWJcblx0XHQgICAgICAgIGMgPT09IFwiXFx1MDAwQVwiIHx8IC8vIG5ldyBsaW5lXG5cdFx0ICAgICAgICBjID09PSBcIlxcdTAwMENcIiB8fCAvLyBmb3JtIGZlZWRcblx0XHQgICAgICAgIGMgPT09IFwiXFx1MDAwRFwiKTsgIC8vIGNhcnJpYWdlIHJldHVyblxuXHR9XG5cblx0LyoqXG5cdCAqIGdldHMgYSBtZWRpYXF1ZXJ5IGFuZCByZXR1cm5zIGEgYm9vbGVhbiBvciBnZXRzIGEgY3NzIGxlbmd0aCBhbmQgcmV0dXJucyBhIG51bWJlclxuXHQgKiBAcGFyYW0gY3NzIG1lZGlhcXVlcmllcyBvciBjc3MgbGVuZ3RoXG5cdCAqIEByZXR1cm5zIHtib29sZWFufG51bWJlcn1cblx0ICpcblx0ICogYmFzZWQgb246IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2pvbmF0aGFudG5lYWwvZGI0Zjc3MDA5YjE1NWYwODM3Mzhcblx0ICovXG5cdHZhciBldmFsQ1NTID0gKGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHJlZ0xlbmd0aCA9IC9eKFtcXGRcXC5dKykoZW18dnd8cHgpJC87XG5cdFx0dmFyIHJlcGxhY2UgPSBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBhcmdzID0gYXJndW1lbnRzLCBpbmRleCA9IDAsIHN0cmluZyA9IGFyZ3NbMF07XG5cdFx0XHR3aGlsZSAoKytpbmRleCBpbiBhcmdzKSB7XG5cdFx0XHRcdHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKGFyZ3NbaW5kZXhdLCBhcmdzWysraW5kZXhdKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBzdHJpbmc7XG5cdFx0fTtcblxuXHRcdHZhciBidWlsZFN0ciA9IG1lbW9pemUoZnVuY3Rpb24oY3NzKSB7XG5cblx0XHRcdHJldHVybiBcInJldHVybiBcIiArIHJlcGxhY2UoKGNzcyB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHQvLyBpbnRlcnByZXQgYGFuZGBcblx0XHRcdFx0L1xcYmFuZFxcYi9nLCBcIiYmXCIsXG5cblx0XHRcdFx0Ly8gaW50ZXJwcmV0IGAsYFxuXHRcdFx0XHQvLC9nLCBcInx8XCIsXG5cblx0XHRcdFx0Ly8gaW50ZXJwcmV0IGBtaW4tYCBhcyA+PVxuXHRcdFx0XHQvbWluLShbYS16LVxcc10rKTovZywgXCJlLiQxPj1cIixcblxuXHRcdFx0XHQvLyBpbnRlcnByZXQgYG1heC1gIGFzIDw9XG5cdFx0XHRcdC9tYXgtKFthLXotXFxzXSspOi9nLCBcImUuJDE8PVwiLFxuXG5cdFx0XHRcdC8vY2FsYyB2YWx1ZVxuXHRcdFx0XHQvY2FsYyhbXildKykvZywgXCIoJDEpXCIsXG5cblx0XHRcdFx0Ly8gaW50ZXJwcmV0IGNzcyB2YWx1ZXNcblx0XHRcdFx0LyhcXGQrW1xcLl0qW1xcZF0qKShbYS16XSspL2csIFwiKCQxICogZS4kMilcIixcblx0XHRcdFx0Ly9tYWtlIGV2YWwgbGVzcyBldmlsXG5cdFx0XHRcdC9eKD8hKGUuW2Etel18WzAtOVxcLiY9fD48XFwrXFwtXFwqXFwoXFwpXFwvXSkpLiovaWcsIFwiXCJcblx0XHRcdCkgKyBcIjtcIjtcblx0XHR9KTtcblxuXHRcdHJldHVybiBmdW5jdGlvbihjc3MsIGxlbmd0aCkge1xuXHRcdFx0dmFyIHBhcnNlZExlbmd0aDtcblx0XHRcdGlmICghKGNzcyBpbiBjc3NDYWNoZSkpIHtcblx0XHRcdFx0Y3NzQ2FjaGVbY3NzXSA9IGZhbHNlO1xuXHRcdFx0XHRpZiAobGVuZ3RoICYmIChwYXJzZWRMZW5ndGggPSBjc3MubWF0Y2goIHJlZ0xlbmd0aCApKSkge1xuXHRcdFx0XHRcdGNzc0NhY2hlW2Nzc10gPSBwYXJzZWRMZW5ndGhbIDEgXSAqIHVuaXRzW3BhcnNlZExlbmd0aFsgMiBdXTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvKmpzaGludCBldmlsOnRydWUgKi9cblx0XHRcdFx0XHR0cnl7XG5cdFx0XHRcdFx0XHRjc3NDYWNoZVtjc3NdID0gbmV3IEZ1bmN0aW9uKFwiZVwiLCBidWlsZFN0cihjc3MpKSh1bml0cyk7XG5cdFx0XHRcdFx0fSBjYXRjaChlKSB7fVxuXHRcdFx0XHRcdC8qanNoaW50IGV2aWw6ZmFsc2UgKi9cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNzc0NhY2hlW2Nzc107XG5cdFx0fTtcblx0fSkoKTtcblxuXHR2YXIgc2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uKCBjYW5kaWRhdGUsIHNpemVzYXR0ciApIHtcblx0XHRpZiAoIGNhbmRpZGF0ZS53ICkgeyAvLyBoID0gbWVhbnMgaGVpZ2h0OiB8fCBkZXNjcmlwdG9yLnR5cGUgPT09ICdoJyBkbyBub3QgaGFuZGxlIHlldC4uLlxuXHRcdFx0Y2FuZGlkYXRlLmNXaWR0aCA9IHBmLmNhbGNMaXN0TGVuZ3RoKCBzaXplc2F0dHIgfHwgXCIxMDB2d1wiICk7XG5cdFx0XHRjYW5kaWRhdGUucmVzID0gY2FuZGlkYXRlLncgLyBjYW5kaWRhdGUuY1dpZHRoIDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2FuZGlkYXRlLnJlcyA9IGNhbmRpZGF0ZS5kO1xuXHRcdH1cblx0XHRyZXR1cm4gY2FuZGlkYXRlO1xuXHR9O1xuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0gb3B0XG5cdCAqL1xuXHR2YXIgcGljdHVyZWZpbGwgPSBmdW5jdGlvbiggb3B0ICkge1xuXG5cdFx0aWYgKCFpc1N1cHBvcnRUZXN0UmVhZHkpIHtyZXR1cm47fVxuXG5cdFx0dmFyIGVsZW1lbnRzLCBpLCBwbGVuO1xuXG5cdFx0dmFyIG9wdGlvbnMgPSBvcHQgfHwge307XG5cblx0XHRpZiAoIG9wdGlvbnMuZWxlbWVudHMgJiYgb3B0aW9ucy5lbGVtZW50cy5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGlmICggb3B0aW9ucy5lbGVtZW50cy5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIklNR1wiICkge1xuXHRcdFx0XHRvcHRpb25zLmVsZW1lbnRzID0gIFsgb3B0aW9ucy5lbGVtZW50cyBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3B0aW9ucy5jb250ZXh0ID0gb3B0aW9ucy5lbGVtZW50cztcblx0XHRcdFx0b3B0aW9ucy5lbGVtZW50cyA9ICBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGVsZW1lbnRzID0gb3B0aW9ucy5lbGVtZW50cyB8fCBwZi5xc2EoIChvcHRpb25zLmNvbnRleHQgfHwgZG9jdW1lbnQpLCAoIG9wdGlvbnMucmVldmFsdWF0ZSB8fCBvcHRpb25zLnJlc2VsZWN0ICkgPyBwZi5zZWwgOiBwZi5zZWxTaG9ydCApO1xuXG5cdFx0aWYgKCAocGxlbiA9IGVsZW1lbnRzLmxlbmd0aCkgKSB7XG5cblx0XHRcdHBmLnNldHVwUnVuKCBvcHRpb25zICk7XG5cdFx0XHRhbHJlYWR5UnVuID0gdHJ1ZTtcblxuXHRcdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCBlbGVtZW50c1xuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBwbGVuOyBpKysgKSB7XG5cdFx0XHRcdHBmLmZpbGxJbWcoZWxlbWVudHNbIGkgXSwgb3B0aW9ucyk7XG5cdFx0XHR9XG5cblx0XHRcdHBmLnRlYXJkb3duUnVuKCBvcHRpb25zICk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBvdXRwdXRzIGEgd2FybmluZyBmb3IgdGhlIGRldmVsb3BlclxuXHQgKiBAcGFyYW0ge21lc3NhZ2V9XG5cdCAqIEB0eXBlIHtGdW5jdGlvbn1cblx0ICovXG5cdHdhcm4gPSAoIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2FybiApID9cblx0XHRmdW5jdGlvbiggbWVzc2FnZSApIHtcblx0XHRcdGNvbnNvbGUud2FybiggbWVzc2FnZSApO1xuXHRcdH0gOlxuXHRcdG5vb3Bcblx0O1xuXG5cdGlmICggIShjdXJTcmNQcm9wIGluIGltYWdlKSApIHtcblx0XHRjdXJTcmNQcm9wID0gXCJzcmNcIjtcblx0fVxuXG5cdC8vIEFkZCBzdXBwb3J0IGZvciBzdGFuZGFyZCBtaW1lIHR5cGVzLlxuXHR0eXBlc1sgXCJpbWFnZS9qcGVnXCIgXSA9IHRydWU7XG5cdHR5cGVzWyBcImltYWdlL2dpZlwiIF0gPSB0cnVlO1xuXHR0eXBlc1sgXCJpbWFnZS9wbmdcIiBdID0gdHJ1ZTtcblxuXHRmdW5jdGlvbiBkZXRlY3RUeXBlU3VwcG9ydCggdHlwZSwgdHlwZVVyaSApIHtcblx0XHQvLyBiYXNlZCBvbiBNb2Rlcm5penIncyBsb3NzbGVzcyBpbWctd2VicCB0ZXN0XG5cdFx0Ly8gbm90ZTogYXN5bmNocm9ub3VzXG5cdFx0dmFyIGltYWdlID0gbmV3IHdpbmRvdy5JbWFnZSgpO1xuXHRcdGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdHR5cGVzWyB0eXBlIF0gPSBmYWxzZTtcblx0XHRcdHBpY3R1cmVmaWxsKCk7XG5cdFx0fTtcblx0XHRpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdHR5cGVzWyB0eXBlIF0gPSBpbWFnZS53aWR0aCA9PT0gMTtcblx0XHRcdHBpY3R1cmVmaWxsKCk7XG5cdFx0fTtcblx0XHRpbWFnZS5zcmMgPSB0eXBlVXJpO1xuXHRcdHJldHVybiBcInBlbmRpbmdcIjtcblx0fVxuXG5cdC8vIHRlc3Qgc3ZnIHN1cHBvcnRcblx0dHlwZXNbIFwiaW1hZ2Uvc3ZnK3htbFwiIF0gPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCBcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjSW1hZ2VcIiwgXCIxLjFcIiApO1xuXG5cdC8qKlxuXHQgKiB1cGRhdGVzIHRoZSBpbnRlcm5hbCB2VyBwcm9wZXJ0eSB3aXRoIHRoZSBjdXJyZW50IHZpZXdwb3J0IHdpZHRoIGluIHB4XG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVNZXRyaWNzKCkge1xuXG5cdFx0aXNWd0RpcnR5ID0gZmFsc2U7XG5cdFx0RFBSID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG5cdFx0Y3NzQ2FjaGUgPSB7fTtcblx0XHRzaXplTGVuZ3RoQ2FjaGUgPSB7fTtcblxuXHRcdHBmLkRQUiA9IERQUiB8fCAxO1xuXG5cdFx0dW5pdHMud2lkdGggPSBNYXRoLm1heCh3aW5kb3cuaW5uZXJXaWR0aCB8fCAwLCBkb2NFbGVtLmNsaWVudFdpZHRoKTtcblx0XHR1bml0cy5oZWlnaHQgPSBNYXRoLm1heCh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCwgZG9jRWxlbS5jbGllbnRIZWlnaHQpO1xuXG5cdFx0dW5pdHMudncgPSB1bml0cy53aWR0aCAvIDEwMDtcblx0XHR1bml0cy52aCA9IHVuaXRzLmhlaWdodCAvIDEwMDtcblxuXHRcdGV2YWxJZCA9IFsgdW5pdHMuaGVpZ2h0LCB1bml0cy53aWR0aCwgRFBSIF0uam9pbihcIi1cIik7XG5cblx0XHR1bml0cy5lbSA9IHBmLmdldEVtVmFsdWUoKTtcblx0XHR1bml0cy5yZW0gPSB1bml0cy5lbTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNob29zZUxvd1JlcyggbG93ZXJWYWx1ZSwgaGlnaGVyVmFsdWUsIGRwclZhbHVlLCBpc0NhY2hlZCApIHtcblx0XHR2YXIgYm9udXNGYWN0b3IsIHRvb011Y2gsIGJvbnVzLCBtZWFuRGVuc2l0eTtcblxuXHRcdC8vZXhwZXJpbWVudGFsXG5cdFx0aWYgKGNmZy5hbGdvcml0aG0gPT09IFwic2F2ZURhdGFcIiApe1xuXHRcdFx0aWYgKCBsb3dlclZhbHVlID4gMi43ICkge1xuXHRcdFx0XHRtZWFuRGVuc2l0eSA9IGRwclZhbHVlICsgMTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRvb011Y2ggPSBoaWdoZXJWYWx1ZSAtIGRwclZhbHVlO1xuXHRcdFx0XHRib251c0ZhY3RvciA9IE1hdGgucG93KGxvd2VyVmFsdWUgLSAwLjYsIDEuNSk7XG5cblx0XHRcdFx0Ym9udXMgPSB0b29NdWNoICogYm9udXNGYWN0b3I7XG5cblx0XHRcdFx0aWYgKGlzQ2FjaGVkKSB7XG5cdFx0XHRcdFx0Ym9udXMgKz0gMC4xICogYm9udXNGYWN0b3I7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtZWFuRGVuc2l0eSA9IGxvd2VyVmFsdWUgKyBib251cztcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0bWVhbkRlbnNpdHkgPSAoZHByVmFsdWUgPiAxKSA/XG5cdFx0XHRcdE1hdGguc3FydChsb3dlclZhbHVlICogaGlnaGVyVmFsdWUpIDpcblx0XHRcdFx0bG93ZXJWYWx1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbWVhbkRlbnNpdHkgPiBkcHJWYWx1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFwcGx5QmVzdENhbmRpZGF0ZSggaW1nICkge1xuXHRcdHZhciBzcmNTZXRDYW5kaWRhdGVzO1xuXHRcdHZhciBtYXRjaGluZ1NldCA9IHBmLmdldFNldCggaW1nICk7XG5cdFx0dmFyIGV2YWx1YXRlZCA9IGZhbHNlO1xuXHRcdGlmICggbWF0Y2hpbmdTZXQgIT09IFwicGVuZGluZ1wiICkge1xuXHRcdFx0ZXZhbHVhdGVkID0gZXZhbElkO1xuXHRcdFx0aWYgKCBtYXRjaGluZ1NldCApIHtcblx0XHRcdFx0c3JjU2V0Q2FuZGlkYXRlcyA9IHBmLnNldFJlcyggbWF0Y2hpbmdTZXQgKTtcblx0XHRcdFx0cGYuYXBwbHlTZXRDYW5kaWRhdGUoIHNyY1NldENhbmRpZGF0ZXMsIGltZyApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpbWdbIHBmLm5zIF0uZXZhbGVkID0gZXZhbHVhdGVkO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXNjZW5kaW5nU29ydCggYSwgYiApIHtcblx0XHRyZXR1cm4gYS5yZXMgLSBiLnJlcztcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFNyY1RvQ3VyKCBpbWcsIHNyYywgc2V0ICkge1xuXHRcdHZhciBjYW5kaWRhdGU7XG5cdFx0aWYgKCAhc2V0ICYmIHNyYyApIHtcblx0XHRcdHNldCA9IGltZ1sgcGYubnMgXS5zZXRzO1xuXHRcdFx0c2V0ID0gc2V0ICYmIHNldFtzZXQubGVuZ3RoIC0gMV07XG5cdFx0fVxuXG5cdFx0Y2FuZGlkYXRlID0gZ2V0Q2FuZGlkYXRlRm9yU3JjKHNyYywgc2V0KTtcblxuXHRcdGlmICggY2FuZGlkYXRlICkge1xuXHRcdFx0c3JjID0gcGYubWFrZVVybChzcmMpO1xuXHRcdFx0aW1nWyBwZi5ucyBdLmN1clNyYyA9IHNyYztcblx0XHRcdGltZ1sgcGYubnMgXS5jdXJDYW4gPSBjYW5kaWRhdGU7XG5cblx0XHRcdGlmICggIWNhbmRpZGF0ZS5yZXMgKSB7XG5cdFx0XHRcdHNldFJlc29sdXRpb24oIGNhbmRpZGF0ZSwgY2FuZGlkYXRlLnNldC5zaXplcyApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FuZGlkYXRlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0Q2FuZGlkYXRlRm9yU3JjKCBzcmMsIHNldCApIHtcblx0XHR2YXIgaSwgY2FuZGlkYXRlLCBjYW5kaWRhdGVzO1xuXHRcdGlmICggc3JjICYmIHNldCApIHtcblx0XHRcdGNhbmRpZGF0ZXMgPSBwZi5wYXJzZVNldCggc2V0ICk7XG5cdFx0XHRzcmMgPSBwZi5tYWtlVXJsKHNyYyk7XG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGNhbmRpZGF0ZXMubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggc3JjID09PSBwZi5tYWtlVXJsKGNhbmRpZGF0ZXNbIGkgXS51cmwpICkge1xuXHRcdFx0XHRcdGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGkgXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FuZGlkYXRlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QWxsU291cmNlRWxlbWVudHMoIHBpY3R1cmUsIGNhbmRpZGF0ZXMgKSB7XG5cdFx0dmFyIGksIGxlbiwgc291cmNlLCBzcmNzZXQ7XG5cblx0XHQvLyBTUEVDIG1pc21hdGNoIGludGVuZGVkIGZvciBzaXplIGFuZCBwZXJmOlxuXHRcdC8vIGFjdHVhbGx5IG9ubHkgc291cmNlIGVsZW1lbnRzIHByZWNlZGluZyB0aGUgaW1nIHNob3VsZCBiZSB1c2VkXG5cdFx0Ly8gYWxzbyBub3RlOiBkb24ndCB1c2UgcXNhIGhlcmUsIGJlY2F1c2UgSUU4IHNvbWV0aW1lcyBkb2Vzbid0IGxpa2Ugc291cmNlIGFzIHRoZSBrZXkgcGFydCBpbiBhIHNlbGVjdG9yXG5cdFx0dmFyIHNvdXJjZXMgPSBwaWN0dXJlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInNvdXJjZVwiICk7XG5cblx0XHRmb3IgKCBpID0gMCwgbGVuID0gc291cmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdHNvdXJjZSA9IHNvdXJjZXNbIGkgXTtcblx0XHRcdHNvdXJjZVsgcGYubnMgXSA9IHRydWU7XG5cdFx0XHRzcmNzZXQgPSBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInNyY3NldFwiICk7XG5cblx0XHRcdC8vIGlmIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgc3Jjc2V0IGF0dHJpYnV0ZSwgc2tpcFxuXHRcdFx0aWYgKCBzcmNzZXQgKSB7XG5cdFx0XHRcdGNhbmRpZGF0ZXMucHVzaCgge1xuXHRcdFx0XHRcdHNyY3NldDogc3Jjc2V0LFxuXHRcdFx0XHRcdG1lZGlhOiBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcIm1lZGlhXCIgKSxcblx0XHRcdFx0XHR0eXBlOiBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApLFxuXHRcdFx0XHRcdHNpemVzOiBzb3VyY2UuZ2V0QXR0cmlidXRlKCBcInNpemVzXCIgKVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNyY3NldCBQYXJzZXJcblx0ICogQnkgQWxleCBCZWxsIHwgIE1JVCBMaWNlbnNlXG5cdCAqXG5cdCAqIEByZXR1cm5zIEFycmF5IFt7dXJsOiBfLCBkOiBfLCB3OiBfLCBoOl8sIHNldDpfKD8/Pz8pfSwgLi4uXVxuXHQgKlxuXHQgKiBCYXNlZCBzdXBlciBkdXBlciBjbG9zZWx5IG9uIHRoZSByZWZlcmVuY2UgYWxnb3JpdGhtIGF0OlxuXHQgKiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9lbWJlZGRlZC1jb250ZW50Lmh0bWwjcGFyc2UtYS1zcmNzZXQtYXR0cmlidXRlXG5cdCAqL1xuXG5cdC8vIDEuIExldCBpbnB1dCBiZSB0aGUgdmFsdWUgcGFzc2VkIHRvIHRoaXMgYWxnb3JpdGhtLlxuXHQvLyAoVE8tRE8gOiBFeHBsYWluIHdoYXQgXCJzZXRcIiBhcmd1bWVudCBpcyBoZXJlLiBNYXliZSBjaG9vc2UgYSBtb3JlXG5cdC8vIGRlc2NyaXB0aXZlICYgbW9yZSBzZWFyY2hhYmxlIG5hbWUuICBTaW5jZSBwYXNzaW5nIHRoZSBcInNldFwiIGluIHJlYWxseSBoYXNcblx0Ly8gbm90aGluZyB0byBkbyB3aXRoIHBhcnNpbmcgcHJvcGVyLCBJIHdvdWxkIHByZWZlciB0aGlzIGFzc2lnbm1lbnQgZXZlbnR1YWxseVxuXHQvLyBnbyBpbiBhbiBleHRlcm5hbCBmbi4pXG5cdGZ1bmN0aW9uIHBhcnNlU3Jjc2V0KGlucHV0LCBzZXQpIHtcblxuXHRcdGZ1bmN0aW9uIGNvbGxlY3RDaGFyYWN0ZXJzKHJlZ0V4KSB7XG5cdFx0XHR2YXIgY2hhcnMsXG5cdFx0XHQgICAgbWF0Y2ggPSByZWdFeC5leGVjKGlucHV0LnN1YnN0cmluZyhwb3MpKTtcblx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRjaGFycyA9IG1hdGNoWyAwIF07XG5cdFx0XHRcdHBvcyArPSBjaGFycy5sZW5ndGg7XG5cdFx0XHRcdHJldHVybiBjaGFycztcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2YXIgaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsXG5cdFx0ICAgIHVybCxcblx0XHQgICAgZGVzY3JpcHRvcnMsXG5cdFx0ICAgIGN1cnJlbnREZXNjcmlwdG9yLFxuXHRcdCAgICBzdGF0ZSxcblx0XHQgICAgYyxcblxuXHRcdCAgICAvLyAyLiBMZXQgcG9zaXRpb24gYmUgYSBwb2ludGVyIGludG8gaW5wdXQsIGluaXRpYWxseSBwb2ludGluZyBhdCB0aGUgc3RhcnRcblx0XHQgICAgLy8gICAgb2YgdGhlIHN0cmluZy5cblx0XHQgICAgcG9zID0gMCxcblxuXHRcdCAgICAvLyAzLiBMZXQgY2FuZGlkYXRlcyBiZSBhbiBpbml0aWFsbHkgZW1wdHkgc291cmNlIHNldC5cblx0XHQgICAgY2FuZGlkYXRlcyA9IFtdO1xuXG5cdFx0LyoqXG5cdFx0KiBBZGRzIGRlc2NyaXB0b3IgcHJvcGVydGllcyB0byBhIGNhbmRpZGF0ZSwgcHVzaGVzIHRvIHRoZSBjYW5kaWRhdGVzIGFycmF5XG5cdFx0KiBAcmV0dXJuIHVuZGVmaW5lZFxuXHRcdCovXG5cdFx0Ly8gKERlY2xhcmVkIG91dHNpZGUgb2YgdGhlIHdoaWxlIGxvb3Agc28gdGhhdCBpdCdzIG9ubHkgY3JlYXRlZCBvbmNlLlxuXHRcdC8vIChUaGlzIGZuIGlzIGRlZmluZWQgYmVmb3JlIGl0IGlzIHVzZWQsIGluIG9yZGVyIHRvIHBhc3MgSlNISU5ULlxuXHRcdC8vIFVuZm9ydHVuYXRlbHkgdGhpcyBicmVha3MgdGhlIHNlcXVlbmNpbmcgb2YgdGhlIHNwZWMgY29tbWVudHMuIDovIClcblx0XHRmdW5jdGlvbiBwYXJzZURlc2NyaXB0b3JzKCkge1xuXG5cdFx0XHQvLyA5LiBEZXNjcmlwdG9yIHBhcnNlcjogTGV0IGVycm9yIGJlIG5vLlxuXHRcdFx0dmFyIHBFcnJvciA9IGZhbHNlLFxuXG5cdFx0XHQvLyAxMC4gTGV0IHdpZHRoIGJlIGFic2VudC5cblx0XHRcdC8vIDExLiBMZXQgZGVuc2l0eSBiZSBhYnNlbnQuXG5cdFx0XHQvLyAxMi4gTGV0IGZ1dHVyZS1jb21wYXQtaCBiZSBhYnNlbnQuIChXZSdyZSBpbXBsZW1lbnRpbmcgaXQgbm93IGFzIGgpXG5cdFx0XHQgICAgdywgZCwgaCwgaSxcblx0XHRcdCAgICBjYW5kaWRhdGUgPSB7fSxcblx0XHRcdCAgICBkZXNjLCBsYXN0Q2hhciwgdmFsdWUsIGludFZhbCwgZmxvYXRWYWw7XG5cblx0XHRcdC8vIDEzLiBGb3IgZWFjaCBkZXNjcmlwdG9yIGluIGRlc2NyaXB0b3JzLCBydW4gdGhlIGFwcHJvcHJpYXRlIHNldCBvZiBzdGVwc1xuXHRcdFx0Ly8gZnJvbSB0aGUgZm9sbG93aW5nIGxpc3Q6XG5cdFx0XHRmb3IgKGkgPSAwIDsgaSA8IGRlc2NyaXB0b3JzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGRlc2MgPSBkZXNjcmlwdG9yc1sgaSBdO1xuXG5cdFx0XHRcdGxhc3RDaGFyID0gZGVzY1sgZGVzYy5sZW5ndGggLSAxIF07XG5cdFx0XHRcdHZhbHVlID0gZGVzYy5zdWJzdHJpbmcoMCwgZGVzYy5sZW5ndGggLSAxKTtcblx0XHRcdFx0aW50VmFsID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcblx0XHRcdFx0ZmxvYXRWYWwgPSBwYXJzZUZsb2F0KHZhbHVlKTtcblxuXHRcdFx0XHQvLyBJZiB0aGUgZGVzY3JpcHRvciBjb25zaXN0cyBvZiBhIHZhbGlkIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyIGZvbGxvd2VkIGJ5XG5cdFx0XHRcdC8vIGEgVSswMDc3IExBVElOIFNNQUxMIExFVFRFUiBXIGNoYXJhY3RlclxuXHRcdFx0XHRpZiAocmVnZXhOb25OZWdhdGl2ZUludGVnZXIudGVzdCh2YWx1ZSkgJiYgKGxhc3RDaGFyID09PSBcIndcIikpIHtcblxuXHRcdFx0XHRcdC8vIElmIHdpZHRoIGFuZCBkZW5zaXR5IGFyZSBub3QgYm90aCBhYnNlbnQsIHRoZW4gbGV0IGVycm9yIGJlIHllcy5cblx0XHRcdFx0XHRpZiAodyB8fCBkKSB7cEVycm9yID0gdHJ1ZTt9XG5cblx0XHRcdFx0XHQvLyBBcHBseSB0aGUgcnVsZXMgZm9yIHBhcnNpbmcgbm9uLW5lZ2F0aXZlIGludGVnZXJzIHRvIHRoZSBkZXNjcmlwdG9yLlxuXHRcdFx0XHRcdC8vIElmIHRoZSByZXN1bHQgaXMgemVybywgbGV0IGVycm9yIGJlIHllcy5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGxldCB3aWR0aCBiZSB0aGUgcmVzdWx0LlxuXHRcdFx0XHRcdGlmIChpbnRWYWwgPT09IDApIHtwRXJyb3IgPSB0cnVlO30gZWxzZSB7dyA9IGludFZhbDt9XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGRlc2NyaXB0b3IgY29uc2lzdHMgb2YgYSB2YWxpZCBmbG9hdGluZy1wb2ludCBudW1iZXIgZm9sbG93ZWQgYnlcblx0XHRcdFx0Ly8gYSBVKzAwNzggTEFUSU4gU01BTEwgTEVUVEVSIFggY2hhcmFjdGVyXG5cdFx0XHRcdH0gZWxzZSBpZiAocmVnZXhGbG9hdGluZ1BvaW50LnRlc3QodmFsdWUpICYmIChsYXN0Q2hhciA9PT0gXCJ4XCIpKSB7XG5cblx0XHRcdFx0XHQvLyBJZiB3aWR0aCwgZGVuc2l0eSBhbmQgZnV0dXJlLWNvbXBhdC1oIGFyZSBub3QgYWxsIGFic2VudCwgdGhlbiBsZXQgZXJyb3Jcblx0XHRcdFx0XHQvLyBiZSB5ZXMuXG5cdFx0XHRcdFx0aWYgKHcgfHwgZCB8fCBoKSB7cEVycm9yID0gdHJ1ZTt9XG5cblx0XHRcdFx0XHQvLyBBcHBseSB0aGUgcnVsZXMgZm9yIHBhcnNpbmcgZmxvYXRpbmctcG9pbnQgbnVtYmVyIHZhbHVlcyB0byB0aGUgZGVzY3JpcHRvci5cblx0XHRcdFx0XHQvLyBJZiB0aGUgcmVzdWx0IGlzIGxlc3MgdGhhbiB6ZXJvLCBsZXQgZXJyb3IgYmUgeWVzLiBPdGhlcndpc2UsIGxldCBkZW5zaXR5XG5cdFx0XHRcdFx0Ly8gYmUgdGhlIHJlc3VsdC5cblx0XHRcdFx0XHRpZiAoZmxvYXRWYWwgPCAwKSB7cEVycm9yID0gdHJ1ZTt9IGVsc2Uge2QgPSBmbG9hdFZhbDt9XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGRlc2NyaXB0b3IgY29uc2lzdHMgb2YgYSB2YWxpZCBub24tbmVnYXRpdmUgaW50ZWdlciBmb2xsb3dlZCBieVxuXHRcdFx0XHQvLyBhIFUrMDA2OCBMQVRJTiBTTUFMTCBMRVRURVIgSCBjaGFyYWN0ZXJcblx0XHRcdFx0fSBlbHNlIGlmIChyZWdleE5vbk5lZ2F0aXZlSW50ZWdlci50ZXN0KHZhbHVlKSAmJiAobGFzdENoYXIgPT09IFwiaFwiKSkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgaGVpZ2h0IGFuZCBkZW5zaXR5IGFyZSBub3QgYm90aCBhYnNlbnQsIHRoZW4gbGV0IGVycm9yIGJlIHllcy5cblx0XHRcdFx0XHRpZiAoaCB8fCBkKSB7cEVycm9yID0gdHJ1ZTt9XG5cblx0XHRcdFx0XHQvLyBBcHBseSB0aGUgcnVsZXMgZm9yIHBhcnNpbmcgbm9uLW5lZ2F0aXZlIGludGVnZXJzIHRvIHRoZSBkZXNjcmlwdG9yLlxuXHRcdFx0XHRcdC8vIElmIHRoZSByZXN1bHQgaXMgemVybywgbGV0IGVycm9yIGJlIHllcy4gT3RoZXJ3aXNlLCBsZXQgZnV0dXJlLWNvbXBhdC1oXG5cdFx0XHRcdFx0Ly8gYmUgdGhlIHJlc3VsdC5cblx0XHRcdFx0XHRpZiAoaW50VmFsID09PSAwKSB7cEVycm9yID0gdHJ1ZTt9IGVsc2Uge2ggPSBpbnRWYWw7fVxuXG5cdFx0XHRcdC8vIEFueXRoaW5nIGVsc2UsIExldCBlcnJvciBiZSB5ZXMuXG5cdFx0XHRcdH0gZWxzZSB7cEVycm9yID0gdHJ1ZTt9XG5cdFx0XHR9IC8vIChjbG9zZSBzdGVwIDEzIGZvciBsb29wKVxuXG5cdFx0XHQvLyAxNS4gSWYgZXJyb3IgaXMgc3RpbGwgbm8sIHRoZW4gYXBwZW5kIGEgbmV3IGltYWdlIHNvdXJjZSB0byBjYW5kaWRhdGVzIHdob3NlXG5cdFx0XHQvLyBVUkwgaXMgdXJsLCBhc3NvY2lhdGVkIHdpdGggYSB3aWR0aCB3aWR0aCBpZiBub3QgYWJzZW50IGFuZCBhIHBpeGVsXG5cdFx0XHQvLyBkZW5zaXR5IGRlbnNpdHkgaWYgbm90IGFic2VudC4gT3RoZXJ3aXNlLCB0aGVyZSBpcyBhIHBhcnNlIGVycm9yLlxuXHRcdFx0aWYgKCFwRXJyb3IpIHtcblx0XHRcdFx0Y2FuZGlkYXRlLnVybCA9IHVybDtcblxuXHRcdFx0XHRpZiAodykgeyBjYW5kaWRhdGUudyA9IHc7fVxuXHRcdFx0XHRpZiAoZCkgeyBjYW5kaWRhdGUuZCA9IGQ7fVxuXHRcdFx0XHRpZiAoaCkgeyBjYW5kaWRhdGUuaCA9IGg7fVxuXHRcdFx0XHRpZiAoIWggJiYgIWQgJiYgIXcpIHtjYW5kaWRhdGUuZCA9IDE7fVxuXHRcdFx0XHRpZiAoY2FuZGlkYXRlLmQgPT09IDEpIHtzZXQuaGFzMXggPSB0cnVlO31cblx0XHRcdFx0Y2FuZGlkYXRlLnNldCA9IHNldDtcblxuXHRcdFx0XHRjYW5kaWRhdGVzLnB1c2goY2FuZGlkYXRlKTtcblx0XHRcdH1cblx0XHR9IC8vIChjbG9zZSBwYXJzZURlc2NyaXB0b3JzIGZuKVxuXG5cdFx0LyoqXG5cdFx0KiBUb2tlbml6ZXMgZGVzY3JpcHRvciBwcm9wZXJ0aWVzIHByaW9yIHRvIHBhcnNpbmdcblx0XHQqIFJldHVybnMgdW5kZWZpbmVkLlxuXHRcdCogKEFnYWluLCB0aGlzIGZuIGlzIGRlZmluZWQgYmVmb3JlIGl0IGlzIHVzZWQsIGluIG9yZGVyIHRvIHBhc3MgSlNISU5ULlxuXHRcdCogVW5mb3J0dW5hdGVseSB0aGlzIGJyZWFrcyB0aGUgbG9naWNhbCBzZXF1ZW5jaW5nIG9mIHRoZSBzcGVjIGNvbW1lbnRzLiA6LyApXG5cdFx0Ki9cblx0XHRmdW5jdGlvbiB0b2tlbml6ZSgpIHtcblxuXHRcdFx0Ly8gOC4xLiBEZXNjcmlwdG9yIHRva2VuaXNlcjogU2tpcCB3aGl0ZXNwYWNlXG5cdFx0XHRjb2xsZWN0Q2hhcmFjdGVycyhyZWdleExlYWRpbmdTcGFjZXMpO1xuXG5cdFx0XHQvLyA4LjIuIExldCBjdXJyZW50IGRlc2NyaXB0b3IgYmUgdGhlIGVtcHR5IHN0cmluZy5cblx0XHRcdGN1cnJlbnREZXNjcmlwdG9yID0gXCJcIjtcblxuXHRcdFx0Ly8gOC4zLiBMZXQgc3RhdGUgYmUgaW4gZGVzY3JpcHRvci5cblx0XHRcdHN0YXRlID0gXCJpbiBkZXNjcmlwdG9yXCI7XG5cblx0XHRcdHdoaWxlICh0cnVlKSB7XG5cblx0XHRcdFx0Ly8gOC40LiBMZXQgYyBiZSB0aGUgY2hhcmFjdGVyIGF0IHBvc2l0aW9uLlxuXHRcdFx0XHRjID0gaW5wdXQuY2hhckF0KHBvcyk7XG5cblx0XHRcdFx0Ly8gIERvIHRoZSBmb2xsb3dpbmcgZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZSBvZiBzdGF0ZS5cblx0XHRcdFx0Ly8gIEZvciB0aGUgcHVycG9zZSBvZiB0aGlzIHN0ZXAsIFwiRU9GXCIgaXMgYSBzcGVjaWFsIGNoYXJhY3RlciByZXByZXNlbnRpbmdcblx0XHRcdFx0Ly8gIHRoYXQgcG9zaXRpb24gaXMgcGFzdCB0aGUgZW5kIG9mIGlucHV0LlxuXG5cdFx0XHRcdC8vIEluIGRlc2NyaXB0b3Jcblx0XHRcdFx0aWYgKHN0YXRlID09PSBcImluIGRlc2NyaXB0b3JcIikge1xuXHRcdFx0XHRcdC8vIERvIHRoZSBmb2xsb3dpbmcsIGRlcGVuZGluZyBvbiB0aGUgdmFsdWUgb2YgYzpcblxuXHRcdFx0XHQgIC8vIFNwYWNlIGNoYXJhY3RlclxuXHRcdFx0XHQgIC8vIElmIGN1cnJlbnQgZGVzY3JpcHRvciBpcyBub3QgZW1wdHksIGFwcGVuZCBjdXJyZW50IGRlc2NyaXB0b3IgdG9cblx0XHRcdFx0ICAvLyBkZXNjcmlwdG9ycyBhbmQgbGV0IGN1cnJlbnQgZGVzY3JpcHRvciBiZSB0aGUgZW1wdHkgc3RyaW5nLlxuXHRcdFx0XHQgIC8vIFNldCBzdGF0ZSB0byBhZnRlciBkZXNjcmlwdG9yLlxuXHRcdFx0XHRcdGlmIChpc1NwYWNlKGMpKSB7XG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudERlc2NyaXB0b3IpIHtcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRvcnMucHVzaChjdXJyZW50RGVzY3JpcHRvcik7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnREZXNjcmlwdG9yID0gXCJcIjtcblx0XHRcdFx0XHRcdFx0c3RhdGUgPSBcImFmdGVyIGRlc2NyaXB0b3JcIjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFUrMDAyQyBDT01NQSAoLClcblx0XHRcdFx0XHQvLyBBZHZhbmNlIHBvc2l0aW9uIHRvIHRoZSBuZXh0IGNoYXJhY3RlciBpbiBpbnB1dC4gSWYgY3VycmVudCBkZXNjcmlwdG9yXG5cdFx0XHRcdFx0Ly8gaXMgbm90IGVtcHR5LCBhcHBlbmQgY3VycmVudCBkZXNjcmlwdG9yIHRvIGRlc2NyaXB0b3JzLiBKdW1wIHRvIHRoZSBzdGVwXG5cdFx0XHRcdFx0Ly8gbGFiZWxlZCBkZXNjcmlwdG9yIHBhcnNlci5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKGMgPT09IFwiLFwiKSB7XG5cdFx0XHRcdFx0XHRwb3MgKz0gMTtcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50RGVzY3JpcHRvcikge1xuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdG9ycy5wdXNoKGN1cnJlbnREZXNjcmlwdG9yKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHBhcnNlRGVzY3JpcHRvcnMoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblxuXHRcdFx0XHRcdC8vIFUrMDAyOCBMRUZUIFBBUkVOVEhFU0lTICgoKVxuXHRcdFx0XHRcdC8vIEFwcGVuZCBjIHRvIGN1cnJlbnQgZGVzY3JpcHRvci4gU2V0IHN0YXRlIHRvIGluIHBhcmVucy5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKGMgPT09IFwiXFx1MDAyOFwiKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50RGVzY3JpcHRvciA9IGN1cnJlbnREZXNjcmlwdG9yICsgYztcblx0XHRcdFx0XHRcdHN0YXRlID0gXCJpbiBwYXJlbnNcIjtcblxuXHRcdFx0XHRcdC8vIEVPRlxuXHRcdFx0XHRcdC8vIElmIGN1cnJlbnQgZGVzY3JpcHRvciBpcyBub3QgZW1wdHksIGFwcGVuZCBjdXJyZW50IGRlc2NyaXB0b3IgdG9cblx0XHRcdFx0XHQvLyBkZXNjcmlwdG9ycy4gSnVtcCB0byB0aGUgc3RlcCBsYWJlbGVkIGRlc2NyaXB0b3IgcGFyc2VyLlxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYyA9PT0gXCJcIikge1xuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnREZXNjcmlwdG9yKSB7XG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0b3JzLnB1c2goY3VycmVudERlc2NyaXB0b3IpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cGFyc2VEZXNjcmlwdG9ycygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZVxuXHRcdFx0XHRcdC8vIEFwcGVuZCBjIHRvIGN1cnJlbnQgZGVzY3JpcHRvci5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y3VycmVudERlc2NyaXB0b3IgPSBjdXJyZW50RGVzY3JpcHRvciArIGM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQvLyAoZW5kIFwiaW4gZGVzY3JpcHRvclwiXG5cblx0XHRcdFx0Ly8gSW4gcGFyZW5zXG5cdFx0XHRcdH0gZWxzZSBpZiAoc3RhdGUgPT09IFwiaW4gcGFyZW5zXCIpIHtcblxuXHRcdFx0XHRcdC8vIFUrMDAyOSBSSUdIVCBQQVJFTlRIRVNJUyAoKSlcblx0XHRcdFx0XHQvLyBBcHBlbmQgYyB0byBjdXJyZW50IGRlc2NyaXB0b3IuIFNldCBzdGF0ZSB0byBpbiBkZXNjcmlwdG9yLlxuXHRcdFx0XHRcdGlmIChjID09PSBcIilcIikge1xuXHRcdFx0XHRcdFx0Y3VycmVudERlc2NyaXB0b3IgPSBjdXJyZW50RGVzY3JpcHRvciArIGM7XG5cdFx0XHRcdFx0XHRzdGF0ZSA9IFwiaW4gZGVzY3JpcHRvclwiO1xuXG5cdFx0XHRcdFx0Ly8gRU9GXG5cdFx0XHRcdFx0Ly8gQXBwZW5kIGN1cnJlbnQgZGVzY3JpcHRvciB0byBkZXNjcmlwdG9ycy4gSnVtcCB0byB0aGUgc3RlcCBsYWJlbGVkXG5cdFx0XHRcdFx0Ly8gZGVzY3JpcHRvciBwYXJzZXIuXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdG9ycy5wdXNoKGN1cnJlbnREZXNjcmlwdG9yKTtcblx0XHRcdFx0XHRcdHBhcnNlRGVzY3JpcHRvcnMoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblxuXHRcdFx0XHRcdC8vIEFueXRoaW5nIGVsc2Vcblx0XHRcdFx0XHQvLyBBcHBlbmQgYyB0byBjdXJyZW50IGRlc2NyaXB0b3IuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGN1cnJlbnREZXNjcmlwdG9yID0gY3VycmVudERlc2NyaXB0b3IgKyBjO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBZnRlciBkZXNjcmlwdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoc3RhdGUgPT09IFwiYWZ0ZXIgZGVzY3JpcHRvclwiKSB7XG5cblx0XHRcdFx0XHQvLyBEbyB0aGUgZm9sbG93aW5nLCBkZXBlbmRpbmcgb24gdGhlIHZhbHVlIG9mIGM6XG5cdFx0XHRcdFx0Ly8gU3BhY2UgY2hhcmFjdGVyOiBTdGF5IGluIHRoaXMgc3RhdGUuXG5cdFx0XHRcdFx0aWYgKGlzU3BhY2UoYykpIHtcblxuXHRcdFx0XHRcdC8vIEVPRjogSnVtcCB0byB0aGUgc3RlcCBsYWJlbGVkIGRlc2NyaXB0b3IgcGFyc2VyLlxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYyA9PT0gXCJcIikge1xuXHRcdFx0XHRcdFx0cGFyc2VEZXNjcmlwdG9ycygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZVxuXHRcdFx0XHRcdC8vIFNldCBzdGF0ZSB0byBpbiBkZXNjcmlwdG9yLiBTZXQgcG9zaXRpb24gdG8gdGhlIHByZXZpb3VzIGNoYXJhY3RlciBpbiBpbnB1dC5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c3RhdGUgPSBcImluIGRlc2NyaXB0b3JcIjtcblx0XHRcdFx0XHRcdHBvcyAtPSAxO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQWR2YW5jZSBwb3NpdGlvbiB0byB0aGUgbmV4dCBjaGFyYWN0ZXIgaW4gaW5wdXQuXG5cdFx0XHRcdHBvcyArPSAxO1xuXG5cdFx0XHQvLyBSZXBlYXQgdGhpcyBzdGVwLlxuXHRcdFx0fSAvLyAoY2xvc2Ugd2hpbGUgdHJ1ZSBsb29wKVxuXHRcdH1cblxuXHRcdC8vIDQuIFNwbGl0dGluZyBsb29wOiBDb2xsZWN0IGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyB0aGF0IGFyZSBzcGFjZVxuXHRcdC8vICAgIGNoYXJhY3RlcnMgb3IgVSswMDJDIENPTU1BIGNoYXJhY3RlcnMuIElmIGFueSBVKzAwMkMgQ09NTUEgY2hhcmFjdGVyc1xuXHRcdC8vICAgIHdlcmUgY29sbGVjdGVkLCB0aGF0IGlzIGEgcGFyc2UgZXJyb3IuXG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdGNvbGxlY3RDaGFyYWN0ZXJzKHJlZ2V4TGVhZGluZ0NvbW1hc09yU3BhY2VzKTtcblxuXHRcdFx0Ly8gNS4gSWYgcG9zaXRpb24gaXMgcGFzdCB0aGUgZW5kIG9mIGlucHV0LCByZXR1cm4gY2FuZGlkYXRlcyBhbmQgYWJvcnQgdGhlc2Ugc3RlcHMuXG5cdFx0XHRpZiAocG9zID49IGlucHV0TGVuZ3RoKSB7XG5cdFx0XHRcdHJldHVybiBjYW5kaWRhdGVzOyAvLyAod2UncmUgZG9uZSwgdGhpcyBpcyB0aGUgc29sZSByZXR1cm4gcGF0aClcblx0XHRcdH1cblxuXHRcdFx0Ly8gNi4gQ29sbGVjdCBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IHNwYWNlIGNoYXJhY3RlcnMsXG5cdFx0XHQvLyAgICBhbmQgbGV0IHRoYXQgYmUgdXJsLlxuXHRcdFx0dXJsID0gY29sbGVjdENoYXJhY3RlcnMocmVnZXhMZWFkaW5nTm90U3BhY2VzKTtcblxuXHRcdFx0Ly8gNy4gTGV0IGRlc2NyaXB0b3JzIGJlIGEgbmV3IGVtcHR5IGxpc3QuXG5cdFx0XHRkZXNjcmlwdG9ycyA9IFtdO1xuXG5cdFx0XHQvLyA4LiBJZiB1cmwgZW5kcyB3aXRoIGEgVSswMDJDIENPTU1BIGNoYXJhY3RlciAoLCksIGZvbGxvdyB0aGVzZSBzdWJzdGVwczpcblx0XHRcdC8vXHRcdCgxKS4gUmVtb3ZlIGFsbCB0cmFpbGluZyBVKzAwMkMgQ09NTUEgY2hhcmFjdGVycyBmcm9tIHVybC4gSWYgdGhpcyByZW1vdmVkXG5cdFx0XHQvLyAgICAgICAgIG1vcmUgdGhhbiBvbmUgY2hhcmFjdGVyLCB0aGF0IGlzIGEgcGFyc2UgZXJyb3IuXG5cdFx0XHRpZiAodXJsLnNsaWNlKC0xKSA9PT0gXCIsXCIpIHtcblx0XHRcdFx0dXJsID0gdXJsLnJlcGxhY2UocmVnZXhUcmFpbGluZ0NvbW1hcywgXCJcIik7XG5cdFx0XHRcdC8vIChKdW1wIGFoZWFkIHRvIHN0ZXAgOSB0byBza2lwIHRva2VuaXphdGlvbiBhbmQganVzdCBwdXNoIHRoZSBjYW5kaWRhdGUpLlxuXHRcdFx0XHRwYXJzZURlc2NyaXB0b3JzKCk7XG5cblx0XHRcdC8vXHRPdGhlcndpc2UsIGZvbGxvdyB0aGVzZSBzdWJzdGVwczpcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRva2VuaXplKCk7XG5cdFx0XHR9IC8vIChjbG9zZSBlbHNlIG9mIHN0ZXAgOClcblxuXHRcdC8vIDE2LiBSZXR1cm4gdG8gdGhlIHN0ZXAgbGFiZWxlZCBzcGxpdHRpbmcgbG9vcC5cblx0XHR9IC8vIChDbG9zZSBvZiBiaWcgd2hpbGUgbG9vcC4pXG5cdH1cblxuXHQvKlxuXHQgKiBTaXplcyBQYXJzZXJcblx0ICpcblx0ICogQnkgQWxleCBCZWxsIHwgIE1JVCBMaWNlbnNlXG5cdCAqXG5cdCAqIE5vbi1zdHJpY3QgYnV0IGFjY3VyYXRlIGFuZCBsaWdodHdlaWdodCBKUyBQYXJzZXIgZm9yIHRoZSBzdHJpbmcgdmFsdWUgPGltZyBzaXplcz1cImhlcmVcIj5cblx0ICpcblx0ICogUmVmZXJlbmNlIGFsZ29yaXRobSBhdDpcblx0ICogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI3BhcnNlLWEtc2l6ZXMtYXR0cmlidXRlXG5cdCAqXG5cdCAqIE1vc3QgY29tbWVudHMgYXJlIGNvcGllZCBpbiBkaXJlY3RseSBmcm9tIHRoZSBzcGVjXG5cdCAqIChleGNlcHQgZm9yIGNvbW1lbnRzIGluIHBhcmVucykuXG5cdCAqXG5cdCAqIEdyYW1tYXIgaXM6XG5cdCAqIDxzb3VyY2Utc2l6ZS1saXN0PiA9IDxzb3VyY2Utc2l6ZT4jIFsgLCA8c291cmNlLXNpemUtdmFsdWU+IF0/IHwgPHNvdXJjZS1zaXplLXZhbHVlPlxuXHQgKiA8c291cmNlLXNpemU+ID0gPG1lZGlhLWNvbmRpdGlvbj4gPHNvdXJjZS1zaXplLXZhbHVlPlxuXHQgKiA8c291cmNlLXNpemUtdmFsdWU+ID0gPGxlbmd0aD5cblx0ICogaHR0cDovL3d3dy53My5vcmcvaHRtbC93Zy9kcmFmdHMvaHRtbC9tYXN0ZXIvZW1iZWRkZWQtY29udGVudC5odG1sI2F0dHItaW1nLXNpemVzXG5cdCAqXG5cdCAqIEUuZy4gXCIobWF4LXdpZHRoOiAzMGVtKSAxMDB2dywgKG1heC13aWR0aDogNTBlbSkgNzB2dywgMTAwdndcIlxuXHQgKiBvciBcIihtaW4td2lkdGg6IDMwZW0pLCBjYWxjKDMwdncgLSAxNXB4KVwiIG9yIGp1c3QgXCIzMHZ3XCJcblx0ICpcblx0ICogUmV0dXJucyB0aGUgZmlyc3QgdmFsaWQgPGNzcy1sZW5ndGg+IHdpdGggYSBtZWRpYSBjb25kaXRpb24gdGhhdCBldmFsdWF0ZXMgdG8gdHJ1ZSxcblx0ICogb3IgXCIxMDB2d1wiIGlmIGFsbCB2YWxpZCBtZWRpYSBjb25kaXRpb25zIGV2YWx1YXRlIHRvIGZhbHNlLlxuXHQgKlxuXHQgKi9cblxuXHRmdW5jdGlvbiBwYXJzZVNpemVzKHN0clZhbHVlKSB7XG5cblx0XHQvLyAoUGVyY2VudGFnZSBDU1MgbGVuZ3RocyBhcmUgbm90IGFsbG93ZWQgaW4gdGhpcyBjYXNlLCB0byBhdm9pZCBjb25mdXNpb246XG5cdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZW1iZWRkZWQtY29udGVudC5odG1sI3ZhbGlkLXNvdXJjZS1zaXplLWxpc3Rcblx0XHQvLyBDU1MgYWxsb3dzIGEgc2luZ2xlIG9wdGlvbmFsIHBsdXMgb3IgbWludXMgc2lnbjpcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyL3N5bmRhdGEuaHRtbCNudW1iZXJzXG5cdFx0Ly8gQ1NTIGlzIEFTQ0lJIGNhc2UtaW5zZW5zaXRpdmU6XG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMi9zeW5kYXRhLmh0bWwjY2hhcmFjdGVycyApXG5cdFx0Ly8gU3BlYyBhbGxvd3MgZXhwb25lbnRpYWwgbm90YXRpb24gZm9yIDxudW1iZXI+IHR5cGU6XG5cdFx0Ly8gaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy8jbnVtYmVyc1xuXHRcdHZhciByZWdleENzc0xlbmd0aFdpdGhVbml0cyA9IC9eKD86WystXT9bMC05XSt8WzAtOV0qXFwuWzAtOV0rKSg/OltlRV1bKy1dP1swLTldKyk/KD86Y2h8Y218ZW18ZXh8aW58bW18cGN8cHR8cHh8cmVtfHZofHZtaW58dm1heHx2dykkL2k7XG5cblx0XHQvLyAoVGhpcyBpcyBhIHF1aWNrIGFuZCBsZW5pZW50IHRlc3QuIEJlY2F1c2Ugb2Ygb3B0aW9uYWwgdW5saW1pdGVkLWRlcHRoIGludGVybmFsXG5cdFx0Ly8gZ3JvdXBpbmcgcGFyZW5zIGFuZCBzdHJpY3Qgc3BhY2luZyBydWxlcywgdGhpcyBjb3VsZCBnZXQgdmVyeSBjb21wbGljYXRlZC4pXG5cdFx0dmFyIHJlZ2V4Q3NzQ2FsYyA9IC9eY2FsY1xcKCg/OlswLTlhLXogXFwuXFwrXFwtXFwqXFwvXFwoXFwpXSspXFwpJC9pO1xuXG5cdFx0dmFyIGk7XG5cdFx0dmFyIHVucGFyc2VkU2l6ZXNMaXN0O1xuXHRcdHZhciB1bnBhcnNlZFNpemVzTGlzdExlbmd0aDtcblx0XHR2YXIgdW5wYXJzZWRTaXplO1xuXHRcdHZhciBsYXN0Q29tcG9uZW50VmFsdWU7XG5cdFx0dmFyIHNpemU7XG5cblx0XHQvLyBVVElMSVRZIEZVTkNUSU9OU1xuXG5cdFx0Ly8gIChUb3kgQ1NTIHBhcnNlci4gVGhlIGdvYWxzIGhlcmUgYXJlOlxuXHRcdC8vICAxKSBleHBhbnNpdmUgdGVzdCBjb3ZlcmFnZSB3aXRob3V0IHRoZSB3ZWlnaHQgb2YgYSBmdWxsIENTUyBwYXJzZXIuXG5cdFx0Ly8gIDIpIEF2b2lkaW5nIHJlZ2V4IHdoZXJldmVyIGNvbnZlbmllbnQuXG5cdFx0Ly8gIFF1aWNrIHRlc3RzOiBodHRwOi8vanNmaWRkbGUubmV0L2d0bnRMNGdyLzMvXG5cdFx0Ly8gIFJldHVybnMgYW4gYXJyYXkgb2YgYXJyYXlzLilcblx0XHRmdW5jdGlvbiBwYXJzZUNvbXBvbmVudFZhbHVlcyhzdHIpIHtcblx0XHRcdHZhciBjaHJjdHI7XG5cdFx0XHR2YXIgY29tcG9uZW50ID0gXCJcIjtcblx0XHRcdHZhciBjb21wb25lbnRBcnJheSA9IFtdO1xuXHRcdFx0dmFyIGxpc3RBcnJheSA9IFtdO1xuXHRcdFx0dmFyIHBhcmVuRGVwdGggPSAwO1xuXHRcdFx0dmFyIHBvcyA9IDA7XG5cdFx0XHR2YXIgaW5Db21tZW50ID0gZmFsc2U7XG5cblx0XHRcdGZ1bmN0aW9uIHB1c2hDb21wb25lbnQoKSB7XG5cdFx0XHRcdGlmIChjb21wb25lbnQpIHtcblx0XHRcdFx0XHRjb21wb25lbnRBcnJheS5wdXNoKGNvbXBvbmVudCk7XG5cdFx0XHRcdFx0Y29tcG9uZW50ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBwdXNoQ29tcG9uZW50QXJyYXkoKSB7XG5cdFx0XHRcdGlmIChjb21wb25lbnRBcnJheVswXSkge1xuXHRcdFx0XHRcdGxpc3RBcnJheS5wdXNoKGNvbXBvbmVudEFycmF5KTtcblx0XHRcdFx0XHRjb21wb25lbnRBcnJheSA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIChMb29wIGZvcndhcmRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgc3RyaW5nLilcblx0XHRcdHdoaWxlICh0cnVlKSB7XG5cdFx0XHRcdGNocmN0ciA9IHN0ci5jaGFyQXQocG9zKTtcblxuXHRcdFx0XHRpZiAoY2hyY3RyID09PSBcIlwiKSB7IC8vICggRW5kIG9mIHN0cmluZyByZWFjaGVkLilcblx0XHRcdFx0XHRwdXNoQ29tcG9uZW50KCk7XG5cdFx0XHRcdFx0cHVzaENvbXBvbmVudEFycmF5KCk7XG5cdFx0XHRcdFx0cmV0dXJuIGxpc3RBcnJheTtcblx0XHRcdFx0fSBlbHNlIGlmIChpbkNvbW1lbnQpIHtcblx0XHRcdFx0XHRpZiAoKGNocmN0ciA9PT0gXCIqXCIpICYmIChzdHJbcG9zICsgMV0gPT09IFwiL1wiKSkgeyAvLyAoQXQgZW5kIG9mIGEgY29tbWVudC4pXG5cdFx0XHRcdFx0XHRpbkNvbW1lbnQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHBvcyArPSAyO1xuXHRcdFx0XHRcdFx0cHVzaENvbXBvbmVudCgpO1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHBvcyArPSAxOyAvLyAoU2tpcCBhbGwgY2hhcmFjdGVycyBpbnNpZGUgY29tbWVudHMuKVxuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKGlzU3BhY2UoY2hyY3RyKSkge1xuXHRcdFx0XHRcdC8vIChJZiBwcmV2aW91cyBjaGFyYWN0ZXIgaW4gbG9vcCB3YXMgYWxzbyBhIHNwYWNlLCBvciBpZlxuXHRcdFx0XHRcdC8vIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZywgZG8gbm90IGFkZCBzcGFjZSBjaGFyIHRvXG5cdFx0XHRcdFx0Ly8gY29tcG9uZW50Lilcblx0XHRcdFx0XHRpZiAoIChzdHIuY2hhckF0KHBvcyAtIDEpICYmIGlzU3BhY2UoIHN0ci5jaGFyQXQocG9zIC0gMSkgKSApIHx8ICFjb21wb25lbnQgKSB7XG5cdFx0XHRcdFx0XHRwb3MgKz0gMTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAocGFyZW5EZXB0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0cHVzaENvbXBvbmVudCgpO1xuXHRcdFx0XHRcdFx0cG9zICs9MTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyAoUmVwbGFjZSBhbnkgc3BhY2UgY2hhcmFjdGVyIHdpdGggYSBwbGFpbiBzcGFjZSBmb3IgbGVnaWJpbGl0eS4pXG5cdFx0XHRcdFx0XHRjaHJjdHIgPSBcIiBcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2hyY3RyID09PSBcIihcIikge1xuXHRcdFx0XHRcdHBhcmVuRGVwdGggKz0gMTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaHJjdHIgPT09IFwiKVwiKSB7XG5cdFx0XHRcdFx0cGFyZW5EZXB0aCAtPSAxO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNocmN0ciA9PT0gXCIsXCIpIHtcblx0XHRcdFx0XHRwdXNoQ29tcG9uZW50KCk7XG5cdFx0XHRcdFx0cHVzaENvbXBvbmVudEFycmF5KCk7XG5cdFx0XHRcdFx0cG9zICs9IDE7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIChjaHJjdHIgPT09IFwiL1wiKSAmJiAoc3RyLmNoYXJBdChwb3MgKyAxKSA9PT0gXCIqXCIpICkge1xuXHRcdFx0XHRcdGluQ29tbWVudCA9IHRydWU7XG5cdFx0XHRcdFx0cG9zICs9IDI7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb21wb25lbnQgPSBjb21wb25lbnQgKyBjaHJjdHI7XG5cdFx0XHRcdHBvcyArPSAxO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGlzVmFsaWROb25OZWdhdGl2ZVNvdXJjZVNpemVWYWx1ZShzKSB7XG5cdFx0XHRpZiAocmVnZXhDc3NMZW5ndGhXaXRoVW5pdHMudGVzdChzKSAmJiAocGFyc2VGbG9hdChzKSA+PSAwKSkge3JldHVybiB0cnVlO31cblx0XHRcdGlmIChyZWdleENzc0NhbGMudGVzdChzKSkge3JldHVybiB0cnVlO31cblx0XHRcdC8vICggaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMi9zeW5kYXRhLmh0bWwjbnVtYmVycyBzYXlzOlxuXHRcdFx0Ly8gXCItMCBpcyBlcXVpdmFsZW50IHRvIDAgYW5kIGlzIG5vdCBhIG5lZ2F0aXZlIG51bWJlci5cIiB3aGljaCBtZWFucyB0aGF0XG5cdFx0XHQvLyB1bml0bGVzcyB6ZXJvIGFuZCB1bml0bGVzcyBuZWdhdGl2ZSB6ZXJvIG11c3QgYmUgYWNjZXB0ZWQgYXMgc3BlY2lhbCBjYXNlcy4pXG5cdFx0XHRpZiAoKHMgPT09IFwiMFwiKSB8fCAocyA9PT0gXCItMFwiKSB8fCAocyA9PT0gXCIrMFwiKSkge3JldHVybiB0cnVlO31cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBXaGVuIGFza2VkIHRvIHBhcnNlIGEgc2l6ZXMgYXR0cmlidXRlIGZyb20gYW4gZWxlbWVudCwgcGFyc2UgYVxuXHRcdC8vIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIGNvbXBvbmVudCB2YWx1ZXMgZnJvbSB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQnc1xuXHRcdC8vIHNpemVzIGF0dHJpYnV0ZSAob3IgdGhlIGVtcHR5IHN0cmluZywgaWYgdGhlIGF0dHJpYnV0ZSBpcyBhYnNlbnQpLCBhbmQgbGV0XG5cdFx0Ly8gdW5wYXJzZWQgc2l6ZXMgbGlzdCBiZSB0aGUgcmVzdWx0LlxuXHRcdC8vIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzcy1zeW50YXgvI3BhcnNlLWNvbW1hLXNlcGFyYXRlZC1saXN0LW9mLWNvbXBvbmVudC12YWx1ZXNcblxuXHRcdHVucGFyc2VkU2l6ZXNMaXN0ID0gcGFyc2VDb21wb25lbnRWYWx1ZXMoc3RyVmFsdWUpO1xuXHRcdHVucGFyc2VkU2l6ZXNMaXN0TGVuZ3RoID0gdW5wYXJzZWRTaXplc0xpc3QubGVuZ3RoO1xuXG5cdFx0Ly8gRm9yIGVhY2ggdW5wYXJzZWQgc2l6ZSBpbiB1bnBhcnNlZCBzaXplcyBsaXN0OlxuXHRcdGZvciAoaSA9IDA7IGkgPCB1bnBhcnNlZFNpemVzTGlzdExlbmd0aDsgaSsrKSB7XG5cdFx0XHR1bnBhcnNlZFNpemUgPSB1bnBhcnNlZFNpemVzTGlzdFtpXTtcblxuXHRcdFx0Ly8gMS4gUmVtb3ZlIGFsbCBjb25zZWN1dGl2ZSA8d2hpdGVzcGFjZS10b2tlbj5zIGZyb20gdGhlIGVuZCBvZiB1bnBhcnNlZCBzaXplLlxuXHRcdFx0Ly8gKCBwYXJzZUNvbXBvbmVudFZhbHVlcygpIGFscmVhZHkgb21pdHMgc3BhY2VzIG91dHNpZGUgb2YgcGFyZW5zLiApXG5cblx0XHRcdC8vIElmIHVucGFyc2VkIHNpemUgaXMgbm93IGVtcHR5LCB0aGF0IGlzIGEgcGFyc2UgZXJyb3I7IGNvbnRpbnVlIHRvIHRoZSBuZXh0XG5cdFx0XHQvLyBpdGVyYXRpb24gb2YgdGhpcyBhbGdvcml0aG0uXG5cdFx0XHQvLyAoIHBhcnNlQ29tcG9uZW50VmFsdWVzKCkgd29uJ3QgcHVzaCBhbiBlbXB0eSBhcnJheS4gKVxuXG5cdFx0XHQvLyAyLiBJZiB0aGUgbGFzdCBjb21wb25lbnQgdmFsdWUgaW4gdW5wYXJzZWQgc2l6ZSBpcyBhIHZhbGlkIG5vbi1uZWdhdGl2ZVxuXHRcdFx0Ly8gPHNvdXJjZS1zaXplLXZhbHVlPiwgbGV0IHNpemUgYmUgaXRzIHZhbHVlIGFuZCByZW1vdmUgdGhlIGNvbXBvbmVudCB2YWx1ZVxuXHRcdFx0Ly8gZnJvbSB1bnBhcnNlZCBzaXplLiBBbnkgQ1NTIGZ1bmN0aW9uIG90aGVyIHRoYW4gdGhlIGNhbGMoKSBmdW5jdGlvbiBpc1xuXHRcdFx0Ly8gaW52YWxpZC4gT3RoZXJ3aXNlLCB0aGVyZSBpcyBhIHBhcnNlIGVycm9yOyBjb250aW51ZSB0byB0aGUgbmV4dCBpdGVyYXRpb25cblx0XHRcdC8vIG9mIHRoaXMgYWxnb3JpdGhtLlxuXHRcdFx0Ly8gaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXN5bnRheC8jcGFyc2UtY29tcG9uZW50LXZhbHVlXG5cdFx0XHRsYXN0Q29tcG9uZW50VmFsdWUgPSB1bnBhcnNlZFNpemVbdW5wYXJzZWRTaXplLmxlbmd0aCAtIDFdO1xuXG5cdFx0XHRpZiAoaXNWYWxpZE5vbk5lZ2F0aXZlU291cmNlU2l6ZVZhbHVlKGxhc3RDb21wb25lbnRWYWx1ZSkpIHtcblx0XHRcdFx0c2l6ZSA9IGxhc3RDb21wb25lbnRWYWx1ZTtcblx0XHRcdFx0dW5wYXJzZWRTaXplLnBvcCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIDMuIFJlbW92ZSBhbGwgY29uc2VjdXRpdmUgPHdoaXRlc3BhY2UtdG9rZW4+cyBmcm9tIHRoZSBlbmQgb2YgdW5wYXJzZWRcblx0XHRcdC8vIHNpemUuIElmIHVucGFyc2VkIHNpemUgaXMgbm93IGVtcHR5LCByZXR1cm4gc2l6ZSBhbmQgZXhpdCB0aGlzIGFsZ29yaXRobS5cblx0XHRcdC8vIElmIHRoaXMgd2FzIG5vdCB0aGUgbGFzdCBpdGVtIGluIHVucGFyc2VkIHNpemVzIGxpc3QsIHRoYXQgaXMgYSBwYXJzZSBlcnJvci5cblx0XHRcdGlmICh1bnBhcnNlZFNpemUubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHJldHVybiBzaXplO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyA0LiBQYXJzZSB0aGUgcmVtYWluaW5nIGNvbXBvbmVudCB2YWx1ZXMgaW4gdW5wYXJzZWQgc2l6ZSBhcyBhXG5cdFx0XHQvLyA8bWVkaWEtY29uZGl0aW9uPi4gSWYgaXQgZG9lcyBub3QgcGFyc2UgY29ycmVjdGx5LCBvciBpdCBkb2VzIHBhcnNlXG5cdFx0XHQvLyBjb3JyZWN0bHkgYnV0IHRoZSA8bWVkaWEtY29uZGl0aW9uPiBldmFsdWF0ZXMgdG8gZmFsc2UsIGNvbnRpbnVlIHRvIHRoZVxuXHRcdFx0Ly8gbmV4dCBpdGVyYXRpb24gb2YgdGhpcyBhbGdvcml0aG0uXG5cdFx0XHQvLyAoUGFyc2luZyBhbGwgcG9zc2libGUgY29tcG91bmQgbWVkaWEgY29uZGl0aW9ucyBpbiBKUyBpcyBoZWF2eSwgY29tcGxpY2F0ZWQsXG5cdFx0XHQvLyBhbmQgdGhlIHBheW9mZiBpcyB1bmNsZWFyLiBJcyB0aGVyZSBldmVyIGFuIHNpdHVhdGlvbiB3aGVyZSB0aGVcblx0XHRcdC8vIG1lZGlhIGNvbmRpdGlvbiBwYXJzZXMgaW5jb3JyZWN0bHkgYnV0IHN0aWxsIHNvbWVob3cgZXZhbHVhdGVzIHRvIHRydWU/XG5cdFx0XHQvLyBDYW4gd2UganVzdCByZWx5IG9uIHRoZSBicm93c2VyL3BvbHlmaWxsIHRvIGRvIGl0Pylcblx0XHRcdHVucGFyc2VkU2l6ZSA9IHVucGFyc2VkU2l6ZS5qb2luKFwiIFwiKTtcblx0XHRcdGlmICghKHBmLm1hdGNoZXNNZWRpYSggdW5wYXJzZWRTaXplICkgKSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIDUuIFJldHVybiBzaXplIGFuZCBleGl0IHRoaXMgYWxnb3JpdGhtLlxuXHRcdFx0cmV0dXJuIHNpemU7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlIGFib3ZlIGFsZ29yaXRobSBleGhhdXN0cyB1bnBhcnNlZCBzaXplcyBsaXN0IHdpdGhvdXQgcmV0dXJuaW5nIGFcblx0XHQvLyBzaXplIHZhbHVlLCByZXR1cm4gMTAwdncuXG5cdFx0cmV0dXJuIFwiMTAwdndcIjtcblx0fVxuXG5cdC8vIG5hbWVzcGFjZVxuXHRwZi5ucyA9IChcInBmXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSkuc3Vic3RyKDAsIDkpO1xuXG5cdC8vIHNyY3NldCBzdXBwb3J0IHRlc3Rcblx0cGYuc3VwU3Jjc2V0ID0gXCJzcmNzZXRcIiBpbiBpbWFnZTtcblx0cGYuc3VwU2l6ZXMgPSBcInNpemVzXCIgaW4gaW1hZ2U7XG5cdHBmLnN1cFBpY3R1cmUgPSAhIXdpbmRvdy5IVE1MUGljdHVyZUVsZW1lbnQ7XG5cblx0Ly8gVUMgYnJvd3NlciBkb2VzIGNsYWltIHRvIHN1cHBvcnQgc3Jjc2V0IGFuZCBwaWN0dXJlLCBidXQgbm90IHNpemVzLFxuXHQvLyB0aGlzIGV4dGVuZGVkIHRlc3QgcmV2ZWFscyB0aGUgYnJvd3NlciBkb2VzIHN1cHBvcnQgbm90aGluZ1xuXHRpZiAocGYuc3VwU3Jjc2V0ICYmIHBmLnN1cFBpY3R1cmUgJiYgIXBmLnN1cFNpemVzKSB7XG5cdFx0KGZ1bmN0aW9uKGltYWdlMikge1xuXHRcdFx0aW1hZ2Uuc3Jjc2V0ID0gXCJkYXRhOixhXCI7XG5cdFx0XHRpbWFnZTIuc3JjID0gXCJkYXRhOixhXCI7XG5cdFx0XHRwZi5zdXBTcmNzZXQgPSBpbWFnZS5jb21wbGV0ZSA9PT0gaW1hZ2UyLmNvbXBsZXRlO1xuXHRcdFx0cGYuc3VwUGljdHVyZSA9IHBmLnN1cFNyY3NldCAmJiBwZi5zdXBQaWN0dXJlO1xuXHRcdH0pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIikpO1xuXHR9XG5cblx0Ly8gU2FmYXJpOSBoYXMgYmFzaWMgc3VwcG9ydCBmb3Igc2l6ZXMsIGJ1dCBkb2VzJ3QgZXhwb3NlIHRoZSBgc2l6ZXNgIGlkbCBhdHRyaWJ1dGVcblx0aWYgKHBmLnN1cFNyY3NldCAmJiAhcGYuc3VwU2l6ZXMpIHtcblxuXHRcdChmdW5jdGlvbigpIHtcblx0XHRcdHZhciB3aWR0aDIgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFnQUJBUEFBQVAvLy93QUFBQ0g1QkFBQUFBQUFMQUFBQUFBQ0FBRUFBQUlDQkFvQU93PT1cIjtcblx0XHRcdHZhciB3aWR0aDEgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCI7XG5cdFx0XHR2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0XHRcdHZhciB0ZXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciB3aWR0aCA9IGltZy53aWR0aDtcblxuXHRcdFx0XHRpZiAod2lkdGggPT09IDIpIHtcblx0XHRcdFx0XHRwZi5zdXBTaXplcyA9IHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhbHdheXNDaGVja1dEZXNjcmlwdG9yID0gcGYuc3VwU3Jjc2V0ICYmICFwZi5zdXBTaXplcztcblxuXHRcdFx0XHRpc1N1cHBvcnRUZXN0UmVhZHkgPSB0cnVlO1xuXHRcdFx0XHQvLyBmb3JjZSBhc3luY1xuXHRcdFx0XHRzZXRUaW1lb3V0KHBpY3R1cmVmaWxsKTtcblx0XHRcdH07XG5cblx0XHRcdGltZy5vbmxvYWQgPSB0ZXN0O1xuXHRcdFx0aW1nLm9uZXJyb3IgPSB0ZXN0O1xuXHRcdFx0aW1nLnNldEF0dHJpYnV0ZShcInNpemVzXCIsIFwiOXB4XCIpO1xuXG5cdFx0XHRpbWcuc3Jjc2V0ID0gd2lkdGgxICsgXCIgMXcsXCIgKyB3aWR0aDIgKyBcIiA5d1wiO1xuXHRcdFx0aW1nLnNyYyA9IHdpZHRoMTtcblx0XHR9KSgpO1xuXG5cdH0gZWxzZSB7XG5cdFx0aXNTdXBwb3J0VGVzdFJlYWR5ID0gdHJ1ZTtcblx0fVxuXG5cdC8vIHVzaW5nIHBmLnFzYSBpbnN0ZWFkIG9mIGRvbSB0cmF2ZXJzaW5nIGRvZXMgc2NhbGUgbXVjaCBiZXR0ZXIsXG5cdC8vIGVzcGVjaWFsbHkgb24gc2l0ZXMgbWl4aW5nIHJlc3BvbnNpdmUgYW5kIG5vbi1yZXNwb25zaXZlIGltYWdlc1xuXHRwZi5zZWxTaG9ydCA9IFwicGljdHVyZT5pbWcsaW1nW3NyY3NldF1cIjtcblx0cGYuc2VsID0gcGYuc2VsU2hvcnQ7XG5cdHBmLmNmZyA9IGNmZztcblxuXHQvKipcblx0ICogU2hvcnRjdXQgcHJvcGVydHkgZm9yIGBkZXZpY2VQaXhlbFJhdGlvYCAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxuXHQgKi9cblx0cGYuRFBSID0gKERQUiAgfHwgMSApO1xuXHRwZi51ID0gdW5pdHM7XG5cblx0Ly8gY29udGFpbmVyIG9mIHN1cHBvcnRlZCBtaW1lIHR5cGVzIHRoYXQgb25lIG1pZ2h0IG5lZWQgdG8gcXVhbGlmeSBiZWZvcmUgdXNpbmdcblx0cGYudHlwZXMgPSAgdHlwZXM7XG5cblx0cGYuc2V0U2l6ZSA9IG5vb3A7XG5cblx0LyoqXG5cdCAqIEdldHMgYSBzdHJpbmcgYW5kIHJldHVybnMgdGhlIGFic29sdXRlIFVSTFxuXHQgKiBAcGFyYW0gc3JjXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IGFic29sdXRlIFVSTFxuXHQgKi9cblxuXHRwZi5tYWtlVXJsID0gbWVtb2l6ZShmdW5jdGlvbihzcmMpIHtcblx0XHRhbmNob3IuaHJlZiA9IHNyYztcblx0XHRyZXR1cm4gYW5jaG9yLmhyZWY7XG5cdH0pO1xuXG5cdC8qKlxuXHQgKiBHZXRzIGEgRE9NIGVsZW1lbnQgb3IgZG9jdW1lbnQgYW5kIGEgc2VsY3RvciBhbmQgcmV0dXJucyB0aGUgZm91bmQgbWF0Y2hlc1xuXHQgKiBDYW4gYmUgZXh0ZW5kZWQgd2l0aCBqUXVlcnkvU2l6emxlIGZvciBJRTcgc3VwcG9ydFxuXHQgKiBAcGFyYW0gY29udGV4dFxuXHQgKiBAcGFyYW0gc2VsXG5cdCAqIEByZXR1cm5zIHtOb2RlTGlzdHxBcnJheX1cblx0ICovXG5cdHBmLnFzYSA9IGZ1bmN0aW9uKGNvbnRleHQsIHNlbCkge1xuXHRcdHJldHVybiAoIFwicXVlcnlTZWxlY3RvclwiIGluIGNvbnRleHQgKSA/IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChzZWwpIDogW107XG5cdH07XG5cblx0LyoqXG5cdCAqIFNob3J0Y3V0IG1ldGhvZCBmb3IgbWF0Y2hNZWRpYSAoIGZvciBlYXN5IG92ZXJyaWRpbmcgaW4gdGVzdHMgKVxuXHQgKiB3ZXRoZXIgbmF0aXZlIG9yIHBmLm1NUSBpcyB1c2VkIHdpbGwgYmUgZGVjaWRlZCBsYXp5IG9uIGZpcnN0IGNhbGxcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuXHRwZi5tYXRjaGVzTWVkaWEgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoIHdpbmRvdy5tYXRjaE1lZGlhICYmIChtYXRjaE1lZGlhKCBcIihtaW4td2lkdGg6IDAuMWVtKVwiICkgfHwge30pLm1hdGNoZXMgKSB7XG5cdFx0XHRwZi5tYXRjaGVzTWVkaWEgPSBmdW5jdGlvbiggbWVkaWEgKSB7XG5cdFx0XHRcdHJldHVybiAhbWVkaWEgfHwgKCBtYXRjaE1lZGlhKCBtZWRpYSApLm1hdGNoZXMgKTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBmLm1hdGNoZXNNZWRpYSA9IHBmLm1NUTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcGYubWF0Y2hlc01lZGlhLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0fTtcblxuXHQvKipcblx0ICogQSBzaW1wbGlmaWVkIG1hdGNoTWVkaWEgaW1wbGVtZW50YXRpb24gZm9yIElFOCBhbmQgSUU5XG5cdCAqIGhhbmRsZXMgb25seSBtaW4td2lkdGgvbWF4LXdpZHRoIHdpdGggcHggb3IgZW0gdmFsdWVzXG5cdCAqIEBwYXJhbSBtZWRpYVxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG5cdHBmLm1NUSA9IGZ1bmN0aW9uKCBtZWRpYSApIHtcblx0XHRyZXR1cm4gbWVkaWEgPyBldmFsQ1NTKG1lZGlhKSA6IHRydWU7XG5cdH07XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGNhbGN1bGF0ZWQgbGVuZ3RoIGluIGNzcyBwaXhlbCBmcm9tIHRoZSBnaXZlbiBzb3VyY2VTaXplVmFsdWVcblx0ICogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNsZW5ndGgtdmFsdWVcblx0ICogaW50ZW5kZWQgU3BlYyBtaXNtYXRjaGVzOlxuXHQgKiAqIERvZXMgbm90IGNoZWNrIGZvciBpbnZhbGlkIHVzZSBvZiBDU1MgZnVuY3Rpb25zXG5cdCAqICogRG9lcyBoYW5kbGUgYSBjb21wdXRlZCBsZW5ndGggb2YgMCB0aGUgc2FtZSBhcyBhIG5lZ2F0aXZlIGFuZCB0aGVyZWZvcmUgaW52YWxpZCB2YWx1ZVxuXHQgKiBAcGFyYW0gc291cmNlU2l6ZVZhbHVlXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9XG5cdCAqL1xuXHRwZi5jYWxjTGVuZ3RoID0gZnVuY3Rpb24oIHNvdXJjZVNpemVWYWx1ZSApIHtcblxuXHRcdHZhciB2YWx1ZSA9IGV2YWxDU1Moc291cmNlU2l6ZVZhbHVlLCB0cnVlKSB8fCBmYWxzZTtcblx0XHRpZiAodmFsdWUgPCAwKSB7XG5cdFx0XHR2YWx1ZSA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdHJldHVybiB2YWx1ZTtcblx0fTtcblxuXHQvKipcblx0ICogVGFrZXMgYSB0eXBlIHN0cmluZyBhbmQgY2hlY2tzIGlmIGl0cyBzdXBwb3J0ZWRcblx0ICovXG5cblx0cGYuc3VwcG9ydHNUeXBlID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuICggdHlwZSApID8gdHlwZXNbIHR5cGUgXSA6IHRydWU7XG5cdH07XG5cblx0LyoqXG5cdCAqIFBhcnNlcyBhIHNvdXJjZVNpemUgaW50byBtZWRpYUNvbmRpdGlvbiAobWVkaWEpIGFuZCBzb3VyY2VTaXplVmFsdWUgKGxlbmd0aClcblx0ICogQHBhcmFtIHNvdXJjZVNpemVTdHJcblx0ICogQHJldHVybnMgeyp9XG5cdCAqL1xuXHRwZi5wYXJzZVNpemUgPSBtZW1vaXplKGZ1bmN0aW9uKCBzb3VyY2VTaXplU3RyICkge1xuXHRcdHZhciBtYXRjaCA9ICggc291cmNlU2l6ZVN0ciB8fCBcIlwiICkubWF0Y2gocmVnU2l6ZSk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG1lZGlhOiBtYXRjaCAmJiBtYXRjaFsxXSxcblx0XHRcdGxlbmd0aDogbWF0Y2ggJiYgbWF0Y2hbMl1cblx0XHR9O1xuXHR9KTtcblxuXHRwZi5wYXJzZVNldCA9IGZ1bmN0aW9uKCBzZXQgKSB7XG5cdFx0aWYgKCAhc2V0LmNhbmRzICkge1xuXHRcdFx0c2V0LmNhbmRzID0gcGFyc2VTcmNzZXQoc2V0LnNyY3NldCwgc2V0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHNldC5jYW5kcztcblx0fTtcblxuXHQvKipcblx0ICogcmV0dXJucyAxZW0gaW4gY3NzIHB4IGZvciBodG1sL2JvZHkgZGVmYXVsdCBzaXplXG5cdCAqIGZ1bmN0aW9uIHRha2VuIGZyb20gcmVzcG9uZGpzXG5cdCAqIEByZXR1cm5zIHsqfG51bWJlcn1cblx0ICovXG5cdHBmLmdldEVtVmFsdWUgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgYm9keTtcblx0XHRpZiAoICFlbWlucHggJiYgKGJvZHkgPSBkb2N1bWVudC5ib2R5KSApIHtcblx0XHRcdHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG5cdFx0XHRcdG9yaWdpbmFsSFRNTENTUyA9IGRvY0VsZW0uc3R5bGUuY3NzVGV4dCxcblx0XHRcdFx0b3JpZ2luYWxCb2R5Q1NTID0gYm9keS5zdHlsZS5jc3NUZXh0O1xuXG5cdFx0XHRkaXYuc3R5bGUuY3NzVGV4dCA9IGJhc2VTdHlsZTtcblxuXHRcdFx0Ly8gMWVtIGluIGEgbWVkaWEgcXVlcnkgaXMgdGhlIHZhbHVlIG9mIHRoZSBkZWZhdWx0IGZvbnQgc2l6ZSBvZiB0aGUgYnJvd3NlclxuXHRcdFx0Ly8gcmVzZXQgZG9jRWxlbSBhbmQgYm9keSB0byBlbnN1cmUgdGhlIGNvcnJlY3QgdmFsdWUgaXMgcmV0dXJuZWRcblx0XHRcdGRvY0VsZW0uc3R5bGUuY3NzVGV4dCA9IGZzQ3NzO1xuXHRcdFx0Ym9keS5zdHlsZS5jc3NUZXh0ID0gZnNDc3M7XG5cblx0XHRcdGJvZHkuYXBwZW5kQ2hpbGQoIGRpdiApO1xuXHRcdFx0ZW1pbnB4ID0gZGl2Lm9mZnNldFdpZHRoO1xuXHRcdFx0Ym9keS5yZW1vdmVDaGlsZCggZGl2ICk7XG5cblx0XHRcdC8vYWxzbyB1cGRhdGUgZW1pbnB4IGJlZm9yZSByZXR1cm5pbmdcblx0XHRcdGVtaW5weCA9IHBhcnNlRmxvYXQoIGVtaW5weCwgMTAgKTtcblxuXHRcdFx0Ly8gcmVzdG9yZSB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHRkb2NFbGVtLnN0eWxlLmNzc1RleHQgPSBvcmlnaW5hbEhUTUxDU1M7XG5cdFx0XHRib2R5LnN0eWxlLmNzc1RleHQgPSBvcmlnaW5hbEJvZHlDU1M7XG5cblx0XHR9XG5cdFx0cmV0dXJuIGVtaW5weCB8fCAxNjtcblx0fTtcblxuXHQvKipcblx0ICogVGFrZXMgYSBzdHJpbmcgb2Ygc2l6ZXMgYW5kIHJldHVybnMgdGhlIHdpZHRoIGluIHBpeGVscyBhcyBhIG51bWJlclxuXHQgKi9cblx0cGYuY2FsY0xpc3RMZW5ndGggPSBmdW5jdGlvbiggc291cmNlU2l6ZUxpc3RTdHIgKSB7XG5cdFx0Ly8gU3BsaXQgdXAgc291cmNlIHNpemUgbGlzdCwgaWUgKCBtYXgtd2lkdGg6IDMwZW0gKSAxMDAlLCAoIG1heC13aWR0aDogNTBlbSApIDUwJSwgMzMlXG5cdFx0Ly9cblx0XHQvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIChtaW4td2lkdGg6MzBlbSkgY2FsYygzMCUgLSAxNXB4KVxuXHRcdGlmICggIShzb3VyY2VTaXplTGlzdFN0ciBpbiBzaXplTGVuZ3RoQ2FjaGUpIHx8IGNmZy51VCApIHtcblx0XHRcdHZhciB3aW5uaW5nTGVuZ3RoID0gcGYuY2FsY0xlbmd0aCggcGFyc2VTaXplcyggc291cmNlU2l6ZUxpc3RTdHIgKSApO1xuXG5cdFx0XHRzaXplTGVuZ3RoQ2FjaGVbIHNvdXJjZVNpemVMaXN0U3RyIF0gPSAhd2lubmluZ0xlbmd0aCA/IHVuaXRzLndpZHRoIDogd2lubmluZ0xlbmd0aDtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2l6ZUxlbmd0aENhY2hlWyBzb3VyY2VTaXplTGlzdFN0ciBdO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBUYWtlcyBhIGNhbmRpZGF0ZSBvYmplY3Qgd2l0aCBhIHNyY3NldCBwcm9wZXJ0eSBpbiB0aGUgZm9ybSBvZiB1cmwvXG5cdCAqIGV4LiBcImltYWdlcy9waWMtbWVkaXVtLnBuZyAxeCwgaW1hZ2VzL3BpYy1tZWRpdW0tMngucG5nIDJ4XCIgb3Jcblx0ICogICAgIFwiaW1hZ2VzL3BpYy1tZWRpdW0ucG5nIDQwMHcsIGltYWdlcy9waWMtbWVkaXVtLTJ4LnBuZyA4MDB3XCIgb3Jcblx0ICogICAgIFwiaW1hZ2VzL3BpYy1zbWFsbC5wbmdcIlxuXHQgKiBHZXQgYW4gYXJyYXkgb2YgaW1hZ2UgY2FuZGlkYXRlcyBpbiB0aGUgZm9ybSBvZlxuXHQgKiAgICAgIHt1cmw6IFwiL2Zvby9iYXIucG5nXCIsIHJlc29sdXRpb246IDF9XG5cdCAqIHdoZXJlIHJlc29sdXRpb24gaXMgaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzLXZhbHVlcy0zLyNyZXNvbHV0aW9uLXZhbHVlXG5cdCAqIElmIHNpemVzIGlzIHNwZWNpZmllZCwgcmVzIGlzIGNhbGN1bGF0ZWRcblx0ICovXG5cdHBmLnNldFJlcyA9IGZ1bmN0aW9uKCBzZXQgKSB7XG5cdFx0dmFyIGNhbmRpZGF0ZXM7XG5cdFx0aWYgKCBzZXQgKSB7XG5cblx0XHRcdGNhbmRpZGF0ZXMgPSBwZi5wYXJzZVNldCggc2V0ICk7XG5cblx0XHRcdGZvciAoIHZhciBpID0gMCwgbGVuID0gY2FuZGlkYXRlcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0c2V0UmVzb2x1dGlvbiggY2FuZGlkYXRlc1sgaSBdLCBzZXQuc2l6ZXMgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhbmRpZGF0ZXM7XG5cdH07XG5cblx0cGYuc2V0UmVzLnJlcyA9IHNldFJlc29sdXRpb247XG5cblx0cGYuYXBwbHlTZXRDYW5kaWRhdGUgPSBmdW5jdGlvbiggY2FuZGlkYXRlcywgaW1nICkge1xuXHRcdGlmICggIWNhbmRpZGF0ZXMubGVuZ3RoICkge3JldHVybjt9XG5cdFx0dmFyIGNhbmRpZGF0ZSxcblx0XHRcdGksXG5cdFx0XHRqLFxuXHRcdFx0bGVuZ3RoLFxuXHRcdFx0YmVzdENhbmRpZGF0ZSxcblx0XHRcdGN1clNyYyxcblx0XHRcdGN1ckNhbixcblx0XHRcdGNhbmRpZGF0ZVNyYyxcblx0XHRcdGFib3J0Q3VyU3JjO1xuXG5cdFx0dmFyIGltYWdlRGF0YSA9IGltZ1sgcGYubnMgXTtcblx0XHR2YXIgZHByID0gcGYuRFBSO1xuXG5cdFx0Y3VyU3JjID0gaW1hZ2VEYXRhLmN1clNyYyB8fCBpbWdbY3VyU3JjUHJvcF07XG5cblx0XHRjdXJDYW4gPSBpbWFnZURhdGEuY3VyQ2FuIHx8IHNldFNyY1RvQ3VyKGltZywgY3VyU3JjLCBjYW5kaWRhdGVzWzBdLnNldCk7XG5cblx0XHQvLyBpZiB3ZSBoYXZlIGEgY3VycmVudCBzb3VyY2UsIHdlIG1pZ2h0IGVpdGhlciBiZWNvbWUgbGF6eSBvciBnaXZlIHRoaXMgc291cmNlIHNvbWUgYWR2YW50YWdlXG5cdFx0aWYgKCBjdXJDYW4gJiYgY3VyQ2FuLnNldCA9PT0gY2FuZGlkYXRlc1sgMCBdLnNldCApIHtcblxuXHRcdFx0Ly8gaWYgYnJvd3NlciBjYW4gYWJvcnQgaW1hZ2UgcmVxdWVzdCBhbmQgdGhlIGltYWdlIGhhcyBhIGhpZ2hlciBwaXhlbCBkZW5zaXR5IHRoYW4gbmVlZGVkXG5cdFx0XHQvLyBhbmQgdGhpcyBpbWFnZSBpc24ndCBkb3dubG9hZGVkIHlldCwgd2Ugc2tpcCBuZXh0IHBhcnQgYW5kIHRyeSB0byBzYXZlIGJhbmR3aWR0aFxuXHRcdFx0YWJvcnRDdXJTcmMgPSAoc3VwcG9ydEFib3J0ICYmICFpbWcuY29tcGxldGUgJiYgY3VyQ2FuLnJlcyAtIDAuMSA+IGRwcik7XG5cblx0XHRcdGlmICggIWFib3J0Q3VyU3JjICkge1xuXHRcdFx0XHRjdXJDYW4uY2FjaGVkID0gdHJ1ZTtcblxuXHRcdFx0XHQvLyBpZiBjdXJyZW50IGNhbmRpZGF0ZSBpcyBcImJlc3RcIiwgXCJiZXR0ZXJcIiBvciBcIm9rYXlcIixcblx0XHRcdFx0Ly8gc2V0IGl0IHRvIGJlc3RDYW5kaWRhdGVcblx0XHRcdFx0aWYgKCBjdXJDYW4ucmVzID49IGRwciApIHtcblx0XHRcdFx0XHRiZXN0Q2FuZGlkYXRlID0gY3VyQ2FuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAhYmVzdENhbmRpZGF0ZSApIHtcblxuXHRcdFx0Y2FuZGlkYXRlcy5zb3J0KCBhc2NlbmRpbmdTb3J0ICk7XG5cblx0XHRcdGxlbmd0aCA9IGNhbmRpZGF0ZXMubGVuZ3RoO1xuXHRcdFx0YmVzdENhbmRpZGF0ZSA9IGNhbmRpZGF0ZXNbIGxlbmd0aCAtIDEgXTtcblxuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0Y2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgaSBdO1xuXHRcdFx0XHRpZiAoIGNhbmRpZGF0ZS5yZXMgPj0gZHByICkge1xuXHRcdFx0XHRcdGogPSBpIC0gMTtcblxuXHRcdFx0XHRcdC8vIHdlIGhhdmUgZm91bmQgdGhlIHBlcmZlY3QgY2FuZGlkYXRlLFxuXHRcdFx0XHRcdC8vIGJ1dCBsZXQncyBpbXByb3ZlIHRoaXMgYSBsaXR0bGUgYml0IHdpdGggc29tZSBhc3N1bXB0aW9ucyA7LSlcblx0XHRcdFx0XHRpZiAoY2FuZGlkYXRlc1sgaiBdICYmXG5cdFx0XHRcdFx0XHQoYWJvcnRDdXJTcmMgfHwgY3VyU3JjICE9PSBwZi5tYWtlVXJsKCBjYW5kaWRhdGUudXJsICkpICYmXG5cdFx0XHRcdFx0XHRjaG9vc2VMb3dSZXMoY2FuZGlkYXRlc1sgaiBdLnJlcywgY2FuZGlkYXRlLnJlcywgZHByLCBjYW5kaWRhdGVzWyBqIF0uY2FjaGVkKSkge1xuXG5cdFx0XHRcdFx0XHRiZXN0Q2FuZGlkYXRlID0gY2FuZGlkYXRlc1sgaiBdO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGJlc3RDYW5kaWRhdGUgPSBjYW5kaWRhdGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBiZXN0Q2FuZGlkYXRlICkge1xuXG5cdFx0XHRjYW5kaWRhdGVTcmMgPSBwZi5tYWtlVXJsKCBiZXN0Q2FuZGlkYXRlLnVybCApO1xuXG5cdFx0XHRpbWFnZURhdGEuY3VyU3JjID0gY2FuZGlkYXRlU3JjO1xuXHRcdFx0aW1hZ2VEYXRhLmN1ckNhbiA9IGJlc3RDYW5kaWRhdGU7XG5cblx0XHRcdGlmICggY2FuZGlkYXRlU3JjICE9PSBjdXJTcmMgKSB7XG5cdFx0XHRcdHBmLnNldFNyYyggaW1nLCBiZXN0Q2FuZGlkYXRlICk7XG5cdFx0XHR9XG5cdFx0XHRwZi5zZXRTaXplKCBpbWcgKTtcblx0XHR9XG5cdH07XG5cblx0cGYuc2V0U3JjID0gZnVuY3Rpb24oIGltZywgYmVzdENhbmRpZGF0ZSApIHtcblx0XHR2YXIgb3JpZ1dpZHRoO1xuXHRcdGltZy5zcmMgPSBiZXN0Q2FuZGlkYXRlLnVybDtcblxuXHRcdC8vIGFsdGhvdWdoIHRoaXMgaXMgYSBzcGVjaWZpYyBTYWZhcmkgaXNzdWUsIHdlIGRvbid0IHdhbnQgdG8gdGFrZSB0b28gbXVjaCBkaWZmZXJlbnQgY29kZSBwYXRoc1xuXHRcdGlmICggYmVzdENhbmRpZGF0ZS5zZXQudHlwZSA9PT0gXCJpbWFnZS9zdmcreG1sXCIgKSB7XG5cdFx0XHRvcmlnV2lkdGggPSBpbWcuc3R5bGUud2lkdGg7XG5cdFx0XHRpbWcuc3R5bGUud2lkdGggPSAoaW1nLm9mZnNldFdpZHRoICsgMSkgKyBcInB4XCI7XG5cblx0XHRcdC8vIG5leHQgbGluZSBvbmx5IHNob3VsZCB0cmlnZ2VyIGEgcmVwYWludFxuXHRcdFx0Ly8gaWYuLi4gaXMgb25seSBkb25lIHRvIHRyaWNrIGRlYWQgY29kZSByZW1vdmFsXG5cdFx0XHRpZiAoIGltZy5vZmZzZXRXaWR0aCArIDEgKSB7XG5cdFx0XHRcdGltZy5zdHlsZS53aWR0aCA9IG9yaWdXaWR0aDtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cGYuZ2V0U2V0ID0gZnVuY3Rpb24oIGltZyApIHtcblx0XHR2YXIgaSwgc2V0LCBzdXBwb3J0c1R5cGU7XG5cdFx0dmFyIG1hdGNoID0gZmFsc2U7XG5cdFx0dmFyIHNldHMgPSBpbWcgWyBwZi5ucyBdLnNldHM7XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IHNldHMubGVuZ3RoICYmICFtYXRjaDsgaSsrICkge1xuXHRcdFx0c2V0ID0gc2V0c1tpXTtcblxuXHRcdFx0aWYgKCAhc2V0LnNyY3NldCB8fCAhcGYubWF0Y2hlc01lZGlhKCBzZXQubWVkaWEgKSB8fCAhKHN1cHBvcnRzVHlwZSA9IHBmLnN1cHBvcnRzVHlwZSggc2V0LnR5cGUgKSkgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHN1cHBvcnRzVHlwZSA9PT0gXCJwZW5kaW5nXCIgKSB7XG5cdFx0XHRcdHNldCA9IHN1cHBvcnRzVHlwZTtcblx0XHRcdH1cblxuXHRcdFx0bWF0Y2ggPSBzZXQ7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRyZXR1cm4gbWF0Y2g7XG5cdH07XG5cblx0cGYucGFyc2VTZXRzID0gZnVuY3Rpb24oIGVsZW1lbnQsIHBhcmVudCwgb3B0aW9ucyApIHtcblx0XHR2YXIgc3Jjc2V0QXR0cmlidXRlLCBpbWFnZVNldCwgaXNXRGVzY3JpcG9yLCBzcmNzZXRQYXJzZWQ7XG5cblx0XHR2YXIgaGFzUGljdHVyZSA9IHBhcmVudCAmJiBwYXJlbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJQSUNUVVJFXCI7XG5cdFx0dmFyIGltYWdlRGF0YSA9IGVsZW1lbnRbIHBmLm5zIF07XG5cblx0XHRpZiAoIGltYWdlRGF0YS5zcmMgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnNyYyApIHtcblx0XHRcdGltYWdlRGF0YS5zcmMgPSBnZXRJbWdBdHRyLmNhbGwoIGVsZW1lbnQsIFwic3JjXCIgKTtcblx0XHRcdGlmICggaW1hZ2VEYXRhLnNyYyApIHtcblx0XHRcdFx0c2V0SW1nQXR0ci5jYWxsKCBlbGVtZW50LCBzcmNBdHRyLCBpbWFnZURhdGEuc3JjICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZW1vdmVJbWdBdHRyLmNhbGwoIGVsZW1lbnQsIHNyY0F0dHIgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGltYWdlRGF0YS5zcmNzZXQgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnNyY3NldCB8fCAhcGYuc3VwU3Jjc2V0IHx8IGVsZW1lbnQuc3Jjc2V0ICkge1xuXHRcdFx0c3Jjc2V0QXR0cmlidXRlID0gZ2V0SW1nQXR0ci5jYWxsKCBlbGVtZW50LCBcInNyY3NldFwiICk7XG5cdFx0XHRpbWFnZURhdGEuc3Jjc2V0ID0gc3Jjc2V0QXR0cmlidXRlO1xuXHRcdFx0c3Jjc2V0UGFyc2VkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpbWFnZURhdGEuc2V0cyA9IFtdO1xuXG5cdFx0aWYgKCBoYXNQaWN0dXJlICkge1xuXHRcdFx0aW1hZ2VEYXRhLnBpYyA9IHRydWU7XG5cdFx0XHRnZXRBbGxTb3VyY2VFbGVtZW50cyggcGFyZW50LCBpbWFnZURhdGEuc2V0cyApO1xuXHRcdH1cblxuXHRcdGlmICggaW1hZ2VEYXRhLnNyY3NldCApIHtcblx0XHRcdGltYWdlU2V0ID0ge1xuXHRcdFx0XHRzcmNzZXQ6IGltYWdlRGF0YS5zcmNzZXQsXG5cdFx0XHRcdHNpemVzOiBnZXRJbWdBdHRyLmNhbGwoIGVsZW1lbnQsIFwic2l6ZXNcIiApXG5cdFx0XHR9O1xuXG5cdFx0XHRpbWFnZURhdGEuc2V0cy5wdXNoKCBpbWFnZVNldCApO1xuXG5cdFx0XHRpc1dEZXNjcmlwb3IgPSAoYWx3YXlzQ2hlY2tXRGVzY3JpcHRvciB8fCBpbWFnZURhdGEuc3JjKSAmJiByZWdXRGVzYy50ZXN0KGltYWdlRGF0YS5zcmNzZXQgfHwgXCJcIik7XG5cblx0XHRcdC8vIGFkZCBub3JtYWwgc3JjIGFzIGNhbmRpZGF0ZSwgaWYgc291cmNlIGhhcyBubyB3IGRlc2NyaXB0b3Jcblx0XHRcdGlmICggIWlzV0Rlc2NyaXBvciAmJiBpbWFnZURhdGEuc3JjICYmICFnZXRDYW5kaWRhdGVGb3JTcmMoaW1hZ2VEYXRhLnNyYywgaW1hZ2VTZXQpICYmICFpbWFnZVNldC5oYXMxeCApIHtcblx0XHRcdFx0aW1hZ2VTZXQuc3Jjc2V0ICs9IFwiLCBcIiArIGltYWdlRGF0YS5zcmM7XG5cdFx0XHRcdGltYWdlU2V0LmNhbmRzLnB1c2goe1xuXHRcdFx0XHRcdHVybDogaW1hZ2VEYXRhLnNyYyxcblx0XHRcdFx0XHRkOiAxLFxuXHRcdFx0XHRcdHNldDogaW1hZ2VTZXRcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHR9IGVsc2UgaWYgKCBpbWFnZURhdGEuc3JjICkge1xuXHRcdFx0aW1hZ2VEYXRhLnNldHMucHVzaCgge1xuXHRcdFx0XHRzcmNzZXQ6IGltYWdlRGF0YS5zcmMsXG5cdFx0XHRcdHNpemVzOiBudWxsXG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0aW1hZ2VEYXRhLmN1ckNhbiA9IG51bGw7XG5cdFx0aW1hZ2VEYXRhLmN1clNyYyA9IHVuZGVmaW5lZDtcblxuXHRcdC8vIGlmIGltZyBoYXMgcGljdHVyZSBvciB0aGUgc3Jjc2V0IHdhcyByZW1vdmVkIG9yIGhhcyBhIHNyY3NldCBhbmQgZG9lcyBub3Qgc3VwcG9ydCBzcmNzZXQgYXQgYWxsXG5cdFx0Ly8gb3IgaGFzIGEgdyBkZXNjcmlwdG9yIChhbmQgZG9lcyBub3Qgc3VwcG9ydCBzaXplcykgc2V0IHN1cHBvcnQgdG8gZmFsc2UgdG8gZXZhbHVhdGVcblx0XHRpbWFnZURhdGEuc3VwcG9ydGVkID0gISggaGFzUGljdHVyZSB8fCAoIGltYWdlU2V0ICYmICFwZi5zdXBTcmNzZXQgKSB8fCAoaXNXRGVzY3JpcG9yICYmICFwZi5zdXBTaXplcykgKTtcblxuXHRcdGlmICggc3Jjc2V0UGFyc2VkICYmIHBmLnN1cFNyY3NldCAmJiAhaW1hZ2VEYXRhLnN1cHBvcnRlZCApIHtcblx0XHRcdGlmICggc3Jjc2V0QXR0cmlidXRlICkge1xuXHRcdFx0XHRzZXRJbWdBdHRyLmNhbGwoIGVsZW1lbnQsIHNyY3NldEF0dHIsIHNyY3NldEF0dHJpYnV0ZSApO1xuXHRcdFx0XHRlbGVtZW50LnNyY3NldCA9IFwiXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZW1vdmVJbWdBdHRyLmNhbGwoIGVsZW1lbnQsIHNyY3NldEF0dHIgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoaW1hZ2VEYXRhLnN1cHBvcnRlZCAmJiAhaW1hZ2VEYXRhLnNyY3NldCAmJiAoKCFpbWFnZURhdGEuc3JjICYmIGVsZW1lbnQuc3JjKSB8fCAgZWxlbWVudC5zcmMgIT09IHBmLm1ha2VVcmwoaW1hZ2VEYXRhLnNyYykpKSB7XG5cdFx0XHRpZiAoaW1hZ2VEYXRhLnNyYyA9PT0gbnVsbCkge1xuXHRcdFx0XHRlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcInNyY1wiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnQuc3JjID0gaW1hZ2VEYXRhLnNyYztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpbWFnZURhdGEucGFyc2VkID0gdHJ1ZTtcblx0fTtcblxuXHRwZi5maWxsSW1nID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuXHRcdHZhciBpbWFnZURhdGE7XG5cdFx0dmFyIGV4dHJlbWUgPSBvcHRpb25zLnJlc2VsZWN0IHx8IG9wdGlvbnMucmVldmFsdWF0ZTtcblxuXHRcdC8vIGV4cGFuZG8gZm9yIGNhY2hpbmcgZGF0YSBvbiB0aGUgaW1nXG5cdFx0aWYgKCAhZWxlbWVudFsgcGYubnMgXSApIHtcblx0XHRcdGVsZW1lbnRbIHBmLm5zIF0gPSB7fTtcblx0XHR9XG5cblx0XHRpbWFnZURhdGEgPSBlbGVtZW50WyBwZi5ucyBdO1xuXG5cdFx0Ly8gaWYgdGhlIGVsZW1lbnQgaGFzIGFscmVhZHkgYmVlbiBldmFsdWF0ZWQsIHNraXAgaXRcblx0XHQvLyB1bmxlc3MgYG9wdGlvbnMucmVldmFsdWF0ZWAgaXMgc2V0IHRvIHRydWUgKCB0aGlzLCBmb3IgZXhhbXBsZSxcblx0XHQvLyBpcyBzZXQgdG8gdHJ1ZSB3aGVuIHJ1bm5pbmcgYHBpY3R1cmVmaWxsYCBvbiBgcmVzaXplYCApLlxuXHRcdGlmICggIWV4dHJlbWUgJiYgaW1hZ2VEYXRhLmV2YWxlZCA9PT0gZXZhbElkICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggIWltYWdlRGF0YS5wYXJzZWQgfHwgb3B0aW9ucy5yZWV2YWx1YXRlICkge1xuXHRcdFx0cGYucGFyc2VTZXRzKCBlbGVtZW50LCBlbGVtZW50LnBhcmVudE5vZGUsIG9wdGlvbnMgKTtcblx0XHR9XG5cblx0XHRpZiAoICFpbWFnZURhdGEuc3VwcG9ydGVkICkge1xuXHRcdFx0YXBwbHlCZXN0Q2FuZGlkYXRlKCBlbGVtZW50ICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGltYWdlRGF0YS5ldmFsZWQgPSBldmFsSWQ7XG5cdFx0fVxuXHR9O1xuXG5cdHBmLnNldHVwUnVuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCAhYWxyZWFkeVJ1biB8fCBpc1Z3RGlydHkgfHwgKERQUiAhPT0gd2luZG93LmRldmljZVBpeGVsUmF0aW8pICkge1xuXHRcdFx0dXBkYXRlTWV0cmljcygpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBJZiBwaWN0dXJlIGlzIHN1cHBvcnRlZCwgd2VsbCwgdGhhdCdzIGF3ZXNvbWUuXG5cdGlmICggcGYuc3VwUGljdHVyZSApIHtcblx0XHRwaWN0dXJlZmlsbCA9IG5vb3A7XG5cdFx0cGYuZmlsbEltZyA9IG5vb3A7XG5cdH0gZWxzZSB7XG5cblx0XHQgLy8gU2V0IHVwIHBpY3R1cmUgcG9seWZpbGwgYnkgcG9sbGluZyB0aGUgZG9jdW1lbnRcblx0XHQoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaXNEb21SZWFkeTtcblx0XHRcdHZhciByZWdSZWFkeSA9IHdpbmRvdy5hdHRhY2hFdmVudCA/IC9kJHxeYy8gOiAvZCR8XmN8XmkvO1xuXG5cdFx0XHR2YXIgcnVuID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciByZWFkeVN0YXRlID0gZG9jdW1lbnQucmVhZHlTdGF0ZSB8fCBcIlwiO1xuXG5cdFx0XHRcdHRpbWVySWQgPSBzZXRUaW1lb3V0KHJ1biwgcmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIgPyAyMDAgOiAgOTk5KTtcblx0XHRcdFx0aWYgKCBkb2N1bWVudC5ib2R5ICkge1xuXHRcdFx0XHRcdHBmLmZpbGxJbWdzKCk7XG5cdFx0XHRcdFx0aXNEb21SZWFkeSA9IGlzRG9tUmVhZHkgfHwgcmVnUmVhZHkudGVzdChyZWFkeVN0YXRlKTtcblx0XHRcdFx0XHRpZiAoIGlzRG9tUmVhZHkgKSB7XG5cdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVySWQgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0dmFyIHRpbWVySWQgPSBzZXRUaW1lb3V0KHJ1biwgZG9jdW1lbnQuYm9keSA/IDkgOiA5OSk7XG5cblx0XHRcdC8vIEFsc28gYXR0YWNoIHBpY3R1cmVmaWxsIG9uIHJlc2l6ZSBhbmQgcmVhZHlzdGF0ZWNoYW5nZVxuXHRcdFx0Ly8gaHR0cDovL21vZGVybmphdmFzY3JpcHQuYmxvZ3Nwb3QuY29tLzIwMTMvMDgvYnVpbGRpbmctYmV0dGVyLWRlYm91bmNlLmh0bWxcblx0XHRcdHZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcblx0XHRcdFx0dmFyIHRpbWVvdXQsIHRpbWVzdGFtcDtcblx0XHRcdFx0dmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIGxhc3QgPSAobmV3IERhdGUoKSkgLSB0aW1lc3RhbXA7XG5cblx0XHRcdFx0XHRpZiAobGFzdCA8IHdhaXQpIHtcblx0XHRcdFx0XHRcdHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0XHRcdFx0ZnVuYygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dGltZXN0YW1wID0gbmV3IERhdGUoKTtcblxuXHRcdFx0XHRcdGlmICghdGltZW91dCkge1xuXHRcdFx0XHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0XHR2YXIgbGFzdENsaWVudFdpZHRoID0gZG9jRWxlbS5jbGllbnRIZWlnaHQ7XG5cdFx0XHR2YXIgb25SZXNpemUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aXNWd0RpcnR5ID0gTWF0aC5tYXgod2luZG93LmlubmVyV2lkdGggfHwgMCwgZG9jRWxlbS5jbGllbnRXaWR0aCkgIT09IHVuaXRzLndpZHRoIHx8IGRvY0VsZW0uY2xpZW50SGVpZ2h0ICE9PSBsYXN0Q2xpZW50V2lkdGg7XG5cdFx0XHRcdGxhc3RDbGllbnRXaWR0aCA9IGRvY0VsZW0uY2xpZW50SGVpZ2h0O1xuXHRcdFx0XHRpZiAoIGlzVndEaXJ0eSApIHtcblx0XHRcdFx0XHRwZi5maWxsSW1ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRvbiggd2luZG93LCBcInJlc2l6ZVwiLCBkZWJvdW5jZShvblJlc2l6ZSwgOTkgKSApO1xuXHRcdFx0b24oIGRvY3VtZW50LCBcInJlYWR5c3RhdGVjaGFuZ2VcIiwgcnVuICk7XG5cdFx0fSkoKTtcblx0fVxuXG5cdHBmLnBpY3R1cmVmaWxsID0gcGljdHVyZWZpbGw7XG5cdC8vdXNlIHRoaXMgaW50ZXJuYWxseSBmb3IgZWFzeSBtb25rZXkgcGF0Y2hpbmcvcGVyZm9ybWFuY2UgdGVzdGluZ1xuXHRwZi5maWxsSW1ncyA9IHBpY3R1cmVmaWxsO1xuXHRwZi50ZWFyZG93blJ1biA9IG5vb3A7XG5cblx0LyogZXhwb3NlIG1ldGhvZHMgZm9yIHRlc3RpbmcgKi9cblx0cGljdHVyZWZpbGwuXyA9IHBmO1xuXG5cdHdpbmRvdy5waWN0dXJlZmlsbENGRyA9IHtcblx0XHRwZjogcGYsXG5cdFx0cHVzaDogZnVuY3Rpb24oYXJncykge1xuXHRcdFx0dmFyIG5hbWUgPSBhcmdzLnNoaWZ0KCk7XG5cdFx0XHRpZiAodHlwZW9mIHBmW25hbWVdID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0cGZbbmFtZV0uYXBwbHkocGYsIGFyZ3MpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2ZnW25hbWVdID0gYXJnc1swXTtcblx0XHRcdFx0aWYgKGFscmVhZHlSdW4pIHtcblx0XHRcdFx0XHRwZi5maWxsSW1ncyggeyByZXNlbGVjdDogdHJ1ZSB9ICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0d2hpbGUgKHNldE9wdGlvbnMgJiYgc2V0T3B0aW9ucy5sZW5ndGgpIHtcblx0XHR3aW5kb3cucGljdHVyZWZpbGxDRkcucHVzaChzZXRPcHRpb25zLnNoaWZ0KCkpO1xuXHR9XG5cblx0LyogZXhwb3NlIHBpY3R1cmVmaWxsICovXG5cdHdpbmRvdy5waWN0dXJlZmlsbCA9IHBpY3R1cmVmaWxsO1xuXG5cdC8qIGV4cG9zZSBwaWN0dXJlZmlsbCAqL1xuXHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuXHRcdC8vIENvbW1vbkpTLCBqdXN0IGV4cG9ydFxuXHRcdG1vZHVsZS5leHBvcnRzID0gcGljdHVyZWZpbGw7XG5cdH0gZWxzZSBpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXHRcdC8vIEFNRCBzdXBwb3J0XG5cdFx0ZGVmaW5lKCBcInBpY3R1cmVmaWxsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGljdHVyZWZpbGw7IH0gKTtcblx0fVxuXG5cdC8vIElFOCBldmFscyB0aGlzIHN5bmMsIHNvIGl0IG11c3QgYmUgdGhlIGxhc3QgdGhpbmcgd2UgZG9cblx0aWYgKCAhcGYuc3VwUGljdHVyZSApIHtcblx0XHR0eXBlc1sgXCJpbWFnZS93ZWJwXCIgXSA9IGRldGVjdFR5cGVTdXBwb3J0KFwiaW1hZ2Uvd2VicFwiLCBcImRhdGE6aW1hZ2Uvd2VicDtiYXNlNjQsVWtsR1Jrb0FBQUJYUlVKUVZsQTRXQW9BQUFBUUFBQUFBQUFBQUFBQVFVeFFTQXdBQUFBQkJ4QVIvUTlFUlA4REFBQldVRGdnR0FBQUFEQUJBSjBCS2dFQUFRQURBRFFscEFBRGNBRCsrLzFRQUE9PVwiICk7XG5cdH1cblxufSApKCB3aW5kb3csIGRvY3VtZW50ICk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L3BpY3R1cmVmaWxsL2Rpc3QvcGljdHVyZWZpbGwuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIG1hcCA9IHtcblx0XCIuL2luZGV4XCI6IDAsXG5cdFwiLi9pbmRleC5qc1wiOiAwXG59O1xuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpKTtcbn07XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdHZhciBpZCA9IG1hcFtyZXFdO1xuXHRpZighKGlkICsgMSkpIC8vIGNoZWNrIGZvciBudW1iZXIgb3Igc3RyaW5nXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJy5cIik7XG5cdHJldHVybiBpZDtcbn07XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gNDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2pzL21vZHVsZXMgXlxcLlxcLy4qJFxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9